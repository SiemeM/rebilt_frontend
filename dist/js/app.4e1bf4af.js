(()=>{"use strict";var e={996:(e,o,a)=>{e.exports=a.p+"img/Odette_lunettes.6bf5e346.webp"},202:(e,o,a)=>{var t=a(751),l=a(641);function n(e,o){const a=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.Wv)(a)}var r=a(262);const s={},i=(0,r.A)(s,[["render",n]]),c=i;var u=a(220),d=a(33),p=a(953),v=a(335);const m={__name:"DynamicStyle",setup(e){const o=(0,u.rd)(),a=localStorage.getItem("jwtToken"),t=a?JSON.parse(atob(a.split(".")[1])):{};let n=t.companyId;const r="localhost"!==window.location.hostname,s=r?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",i={primary_color:"rgb(151, 71, 255)",secondary_color:"rgb(26, 26, 26)",text_color:"rgb(255, 255, 255)",titles_color:"rgb(0, 113, 227)",background_color:"rgb(0, 0, 0)",button_color:"#146ef5",logo_url:"../assets/images/rebilt-favicon.svg",fontFamilyTitles:"Syne, serif",fontFamilyBodyText:"DM Sans, sans-serif",black:"#080808",white:"#fff",blue_600:"#0055d4",gray_100:"#f0f0f0",gray_200:"#d8d8d8",gray_300:"#ababab",gray_400:"#898989",gray_500:"#757575",gray_600:"#5a5a5a",gray_700:"#363636",gray_800:"#222",gray_900:"#171717"},c=(0,p.KR)(null),d=async()=>{if(a){const e=JSON.parse(atob(a.split(".")[1]));return e?.companyId||null}{const e=o.currentRoute.value.query.partner;if(e)return k(e)}},m=async e=>{if(e)try{const e=await v.A.get(`${s}/partners/${n}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}}),o=e.data.data.partner||i;document.documentElement.style.setProperty("--primary-color",o.primary_color),document.documentElement.style.setProperty("--secondary-color",o.secondary_color),document.documentElement.style.setProperty("--text-color",o.text_color),document.documentElement.style.setProperty("--titles-color",o.titles_color),document.documentElement.style.setProperty("--background-color",o.background_color),document.documentElement.style.setProperty("--button-color",o.button_color),document.documentElement.style.setProperty("--background-image",`url(${o.logo_url})`),document.documentElement.style.setProperty("--title-font",o.fontFamilyTitles),document.documentElement.style.setProperty("--body-font",o.fontFamilyBodyText),document.documentElement.style.setProperty("--black",o.black),document.documentElement.style.setProperty("--white",o.white),document.documentElement.style.setProperty("--blue-600",o.blue_600),document.documentElement.style.setProperty("--gray-100",o.gray_100),document.documentElement.style.setProperty("--gray-200",o.gray_200),document.documentElement.style.setProperty("--gray-300",o.gray_300),document.documentElement.style.setProperty("--gray-400",o.gray_400),document.documentElement.style.setProperty("--gray-500",o.gray_500),document.documentElement.style.setProperty("--gray-600",o.gray_600),document.documentElement.style.setProperty("--gray-700",o.gray_700),document.documentElement.style.setProperty("--gray-800",o.gray_800),document.documentElement.style.setProperty("--gray-900",o.gray_900),f(o.fontFamilyBodyText,o.fontFamilyTitles)}catch(c){g()}else g()},k=async e=>{try{const o=e.replace(/([A-Z])/g," $1").trim(),a=await v.A.get(`${s}/partners?partnerName=${o}`),t=a.data.data.partners.find((e=>e.name.toLowerCase()===o.toLowerCase()));return t?._id||null}catch(o){return c.value="Er is een fout opgetreden bij het ophalen van de partner.",null}},g=()=>{document.documentElement.style.setProperty("--primary-color",i.primary_color),document.documentElement.style.setProperty("--secondary-color",i.secondary_color),document.documentElement.style.setProperty("--text-color",i.text_color),document.documentElement.style.setProperty("--titles-color",i.titles_color),document.documentElement.style.setProperty("--background-color",i.background_color),document.documentElement.style.setProperty("--button-color",i.button_color),document.documentElement.style.setProperty("--background-image",`url(${i.logo_url})`),document.documentElement.style.setProperty("--title-font",i.fontFamilyTitles),document.documentElement.style.setProperty("--body-font",i.fontFamilyBodyText),document.documentElement.style.setProperty("--black",i.black),document.documentElement.style.setProperty("--white",i.white),document.documentElement.style.setProperty("--blue-600",i.blue_600),document.documentElement.style.setProperty("--gray-100",i.gray_100),document.documentElement.style.setProperty("--gray-200",i.gray_200),document.documentElement.style.setProperty("--gray-300",i.gray_300),document.documentElement.style.setProperty("--gray-400",i.gray_400),document.documentElement.style.setProperty("--gray-500",i.gray_500),document.documentElement.style.setProperty("--gray-600",i.gray_600),document.documentElement.style.setProperty("--gray-700",i.gray_700),document.documentElement.style.setProperty("--gray-800",i.gray_800),document.documentElement.style.setProperty("--gray-900",i.gray_900),f(i.fontFamilyBodyText,i.fontFamilyTitles)},f=(e,o)=>{const a=e=>{const o=document.head.querySelector(`link[href="${e}"]`);if(!o){const o=document.createElement("link");o.rel="stylesheet",o.href=e,document.head.appendChild(o)}};e&&a(`https://fonts.googleapis.com/css2?family=${e.replace(/ /g,"+")}:wght@400;700&display=swap`),o&&a(`https://fonts.googleapis.com/css2?family=${o.replace(/ /g,"+")}:wght@400;700&display=swap`)};return(0,l.sV)((async()=>{n=await d(),n?await m(n.value):(console.warn("Geen partner ID gevonden, fallback stijlen toepassen."),g())})),(e,o)=>((0,l.uX)(),(0,l.CE)("div"))}},k=m,g=k,f={class:"container"},h={class:"overlay"},y={class:"elements"},L={class:"column"},b={class:"column"},w={class:"row"},C={key:0,class:"error"},_={__name:"LoginPage",setup(e){const o=(0,p.KR)(""),a=(0,p.KR)(""),n=(0,p.KR)(""),r="localhost"!==window.location.hostname,s=r?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",i=()=>{n.value="",o.value&&a.value?fetch(`${s}/users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.value,password:a.value})}).then((e=>{if(!e.ok)throw new Error("Login failed");return e.json()})).then((e=>{if("success"===e.status){localStorage.setItem("jwtToken",e.data.token);const o=JSON.parse(atob(e.data.token.split(".")[1])),a=o.role;"partner_admin"===a||"partner_owner"===a?xu.push("/admin"):n.value="Geen toegang tot de admin sectie.","platform_admin"===a&&xu.push("/admin/partners")}else n.value=e.message||"Inloggen mislukt."})).catch((e=>{n.value="Er is een fout opgetreden. Probeer het opnieuw."})):n.value="Gelieve alle velden in te vullen."};return(e,r)=>{const s=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.Lk)("div",f,[(0,l.Lk)("div",h,[(0,l.Lk)("div",y,[r[8]||(r[8]=(0,l.Lk)("h1",null,"Welcome back",-1)),(0,l.Lk)("form",null,[(0,l.Lk)("div",L,[r[4]||(r[4]=(0,l.Lk)("label",{for:"email"},"Email",-1)),(0,l.bo)((0,l.Lk)("input",{id:"email","onUpdate:modelValue":r[0]||(r[0]=e=>o.value=e),type:"text",placeholder:"johndoe@gmail.com"},null,512),[[t.Jo,o.value]])]),(0,l.Lk)("div",b,[r[5]||(r[5]=(0,l.Lk)("label",{for:"password"},"Password",-1)),(0,l.bo)((0,l.Lk)("input",{id:"password","onUpdate:modelValue":r[1]||(r[1]=e=>a.value=e),type:"password",placeholder:"●●●●●●●●",onFocus:r[2]||(r[2]=o=>e.showPlaceholder=!1),onBlur:r[3]||(r[3]=o=>e.showPlaceholder=""===a.value)},null,544),[[t.Jo,a.value]])]),(0,l.Lk)("div",w,[r[7]||(r[7]=(0,l.Lk)("div",{class:"rememberMe"},[(0,l.Lk)("input",{type:"checkbox",id:"rememberMeCheckbox"}),(0,l.Lk)("label",{for:"rememberMeCheckbox"},"Remember me")],-1)),(0,l.bF)(s,{exact:"",to:"./ForgotPassword"},{default:(0,l.k6)((()=>r[6]||(r[6]=[(0,l.eW)(" Forgot password? ")]))),_:1})]),n.value?((0,l.uX)(),(0,l.CE)("p",C,(0,d.v_)(n.value),1)):(0,l.Q3)("",!0),(0,l.Lk)("button",{class:"btn active",type:"submit",onClick:(0,t.D$)(i,["prevent"])}," Login ")])])])])],64)}}},E=(0,r.A)(_,[["__scopeId","data-v-516a90d0"]]),I=E,P={class:"container"},T={class:"overlay"},A={class:"elements"},$={class:"column"},x={key:0,class:"error"},S={__name:"ForgotPassword",setup(e){const o=(0,p.KR)(""),a=((0,p.KR)(""),(0,p.KR)("")),n=(0,u.rd)(),r=(0,u.lq)(),s=e=>{if(!e||"string"!==typeof e)return!1;const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return o.test(e)};(0,l.sV)((()=>{const e=r.query.email;e&&(o.value=e)}));const i="localhost"!==window.location.hostname,c=i?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",m=async()=>{if(s(o.value))try{const e=await v.A.post(`${c}/users/forgot-password`,{email:o.value});e&&e.status>=200&&e.status<300?(a.value="",n.push({path:"/verificationCode",query:{email:o.value}})):a.value="Er is een onverwachte fout opgetreden."}catch(e){e.response?404===e.response.status?a.value="Gebruiker niet gevonden.":500===e.response.status?(a.value="Er is een serverfout opgetreden. Probeer het later opnieuw.",console.error("500 Error:",e.response.data)):a.value="Er is een onbekende fout opgetreden.":a.value="Er is een probleem met het netwerk."}else a.value="Voer een geldig e-mailadres in."};return(e,n)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.Lk)("div",P,[(0,l.Lk)("div",T,[(0,l.Lk)("div",A,[n[3]||(n[3]=(0,l.Lk)("h1",null,"Forgot password",-1)),(0,l.Lk)("form",{onSubmit:(0,t.D$)(m,["prevent"])},[(0,l.Lk)("div",$,[n[1]||(n[1]=(0,l.Lk)("label",{for:"email"},"Email",-1)),(0,l.bo)((0,l.Lk)("input",{id:"email","onUpdate:modelValue":n[0]||(n[0]=e=>o.value=e),type:"email",placeholder:"johndoe@gmail.com",required:""},null,512),[[t.Jo,o.value]])]),a.value?((0,l.uX)(),(0,l.CE)("p",x,(0,d.v_)(a.value),1)):(0,l.Q3)("",!0),n[2]||(n[2]=(0,l.Lk)("button",{class:"btn active",type:"submit"},"Send mail",-1))],32)])])])],64))}},N=(0,r.A)(S,[["__scopeId","data-v-1b2fe415"]]),K=N,U={class:"container"},F={class:"overlay"},R={class:"elements"},V={class:"column"},X={key:0,class:"error"},j={key:1,class:"success"},O={__name:"VerificationCode",setup(e){const o=(0,p.KR)(""),a=(0,p.KR)(""),n=(0,p.KR)(""),r=(0,p.KR)(""),s=(0,u.rd)(),i=(0,u.lq)(),c=e=>{if(!e||"string"!==typeof e)return!1;const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return o.test(e)},m=e=>"string"===typeof e&&e.trim().length>0;(0,l.sV)((()=>{const e=i.query.email;"string"===typeof e?o.value=e:e&&console.warn("Unexpected email query type:",typeof e)}));const k="localhost"!==window.location.hostname,f=k?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",h=async()=>{if(c(o.value))try{const e=await v.A.post(`${f}/users/forgot-password`,{email:o.value});e&&e.status>=200&&e.status<300?(r.value="",s.push({path:"/verificationCode",query:{email:o.value}})):r.value="Er is een onverwachte fout opgetreden.",n.value="De mail is succesvol opnieuw verstuurd."}catch(e){e.response&&404===e.response.status?r.value="Gebruiker niet gevonden.":r.value="Er is een fout opgetreden bij het versturen van de e-mail."}else r.value="Voer een geldig e-mailadres in."},y=async()=>{if(m(a.value))try{const e=await v.A.post(`${f}/users/verify-code`,{code:a.value,email:o.value});200===e.status?s.push({path:"/newPassword",query:{email:o.value}}):r.value="De verificatiecode is ongeldig."}catch(e){if(v.A.isAxiosError(e)&&e.response)switch(e.response.status){case 400:r.value="Ongeldige verificatiecode.";break;case 404:r.value="Verificatiecode niet gevonden.";break;default:r.value="Er is een fout opgetreden bij het verifiëren van de code.";break}else r.value="Er is een netwerkfout opgetreden."}else r.value="Voer een geldige verificatiecode in."};return(e,o)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.Lk)("div",U,[(0,l.Lk)("div",F,[(0,l.Lk)("div",R,[o[3]||(o[3]=(0,l.Lk)("h1",null,"Forgot password",-1)),(0,l.Lk)("form",{onSubmit:(0,t.D$)(y,["prevent"])},[(0,l.Lk)("div",V,[o[1]||(o[1]=(0,l.Lk)("label",{for:"verificationCode"},"Verification code",-1)),(0,l.bo)((0,l.Lk)("input",{id:"verificationCode","onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),type:"text",placeholder:"HFDQ2FDQL4",required:""},null,512),[[t.Jo,a.value]])]),r.value?((0,l.uX)(),(0,l.CE)("p",X,(0,d.v_)(r.value),1)):(0,l.Q3)("",!0),n.value?((0,l.uX)(),(0,l.CE)("p",j,(0,d.v_)(n.value),1)):(0,l.Q3)("",!0),(0,l.Lk)("button",{class:"btn",type:"button",onClick:h}," Send mail again "),o[2]||(o[2]=(0,l.Lk)("button",{class:"btn active",type:"submit"},"Verify code",-1))],32)])])])],64))}},D=(0,r.A)(O,[["__scopeId","data-v-b93c90b0"]]),B=D,J={class:"container"},z={class:"overlay"},q={class:"elements"},M={class:"column"},Q={class:"column"},G={key:0,class:"error"},W={__name:"NewPassword",setup(e){const o=(0,p.KR)(""),a=(0,p.KR)(""),n=(0,p.KR)(""),r=(0,p.KR)(""),s=(0,u.rd)(),i=(0,u.lq)();(0,l.sV)((()=>{const e=i.query.email;"string"===typeof e?o.value=e:e?console.warn("Email query parameter is not a string:",e):console.info("No email query parameter provided.")}));const c="localhost"!==window.location.hostname,m=c?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",k=async()=>{if(a.value===n.value)if(a.value.length<8)r.value="Het wachtwoord moet minimaal 8 tekens lang zijn.";else try{const e=await v.A.post(`${m}/users/reset-password`,{email:o.value,newPassword:a.value});200===e.status?s.push("/login"):r.value="Er is een onverwachte fout opgetreden."}catch(e){if(v.A.isAxiosError(e)&&e.response)switch(e.response.status){case 400:r.value="Ongeldig verzoek.";break;case 404:r.value="Gebruiker niet gevonden.";break;default:r.value="Er is een fout opgetreden bij het instellen van het wachtwoord.";break}else r.value="Netwerkfout."}else r.value="Wachtwoorden komen niet overeen."};return(e,o)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.Lk)("div",J,[(0,l.Lk)("div",z,[(0,l.Lk)("div",q,[o[5]||(o[5]=(0,l.Lk)("h1",null,"Nieuw wachtwoord instellen",-1)),(0,l.Lk)("form",{onSubmit:(0,t.D$)(k,["prevent"])},[(0,l.Lk)("div",M,[o[2]||(o[2]=(0,l.Lk)("label",{for:"newPassword"},"Nieuw wachtwoord",-1)),(0,l.bo)((0,l.Lk)("input",{id:"newPassword","onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),type:"password",placeholder:"●●●●●●●●",required:""},null,512),[[t.Jo,a.value]])]),(0,l.Lk)("div",Q,[o[3]||(o[3]=(0,l.Lk)("label",{for:"repeatNewPassword"},"Herhaal nieuw wachtwoord",-1)),(0,l.bo)((0,l.Lk)("input",{id:"repeatNewPassword","onUpdate:modelValue":o[1]||(o[1]=e=>n.value=e),type:"password",placeholder:"●●●●●●●●",required:""},null,512),[[t.Jo,n.value]])]),r.value?((0,l.uX)(),(0,l.CE)("p",G,(0,d.v_)(r.value),1)):(0,l.Q3)("",!0),o[4]||(o[4]=(0,l.Lk)("button",{class:"btn active",type:"submit"},"Wachtwoord instellen",-1))],32)])])])],64))}},H=(0,r.A)(W,[["__scopeId","data-v-298ebca1"]]),Z=H;var Y=a(70),ee=a(763),oe=a(728);(0,p.KR)(""),(0,p.KR)("");const ae=async(e,o,a)=>{try{if(!e||!e.name)throw new Error("No file provided or file name is missing.");const t=new FormData;t.append("file",e),t.append("upload_preset","ycy4zvmj"),t.append("cloud_name","dzempjvto");const l=e=>e.replace(/[^a-zA-Z0-9/_-]/g,""),n=l(`${a||"DefaultFolder"}/products/${o}`);t.append("folder",n);const r=e.name.split(".").pop().toLowerCase();let s;if(["jpg","jpeg","svg","png","gif","bmp","webp"].includes(r))s="https://api.cloudinary.com/v1_1/dzempjvto/image/upload";else{if(!["glb","obj","gltf"].includes(r))throw new Error("Unsupported file type");s="https://api.cloudinary.com/v1_1/dzempjvto/raw/upload"}const i=await fetch(s,{method:"POST",body:t});if(!i.ok){const e=await i.json();throw new Error(`Cloudinary upload failed: ${e.error.message}`)}const c=await i.json();if(!c.secure_url)throw new Error("No secure_url found in Cloudinary response");return c.secure_url}catch(t){throw console.error("Error uploading file:",t),t}};var te=a(526);(0,u.rd)();const le=new oe.Z;le.setDecoderPath("https://www.gstatic.com/draco/v1/decoders/");const ne=new ee.B;ne.setDRACOLoader(le);new Y.L;(0,p.KR)("");const re="localhost"!==window.location.hostname,se=re?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",ie=((0,p.KR)(""),(0,p.KR)([]),localStorage.getItem("jwtToken")),ce=ie?JSON.parse(atob(ie.split(".")[1])):{},ue=ce.companyId;(0,p.KR)([]),(0,p.KR)([]);const de=async e=>{if(!e)return console.error("partnerId is undefined or null!"),[];try{const o=await v.A.get(`${se}/partners/${e}`),a=o.data.data.partner.name;if(!a)throw new Error("Partner name not found");const t=`${se}/products?partnerName=${a}`,l=await v.A.get(t),n=l.data?.data?.products||[];return n}catch(o){return console.error("Error fetching products:",o),[]}},pe=async e=>{if(!e)return console.error("partnerId is undefined or null!"),[];try{const o=await v.A.get(`${se}/partners/${e}`),a=o.data?.data?.partner?.name;if(!a)throw new Error("Partner name not found");const t=`${se}/products?partnerName=${a}`,l=await v.A.get(t),n=l.data?.data?.products||[],r=new Set(n.map((e=>e.productType))),s=Array.from(r);return s||[]}catch(o){return console.error("Error fetching products:",o),[]}};async function ve(e){try{const o=await v.A.get(`${se}/partnerConfigurations?partnerId=${e}`);if("success"!==o.data.status||!o.data.data)throw new Error("❌ Geen configuraties gevonden voor deze partner.");const a=o.data.data,t=[];return a.forEach((e=>{e.options.length>0&&e.options.forEach((e=>{const o=e.optionId?._id,a=e.optionId?.name;o&&!t.some((e=>e.optionId===o))&&t.push({optionId:o,color:a||"Unnamed Color"})}))})),t}catch(o){return console.error("❌ Fout in getcolors:",o),[]}}(0,p.KR)([]);const me=(e,o)=>{Array.isArray(e)?e.includes(o)?console.warn("This product type already exists!"):e.push(o):console.error("productTypes is not an array",e)};async function ke({productCode:e,productName:o,productType:a,productPrice:t,description:l,brand:n,file:r,configurationId:s,configurations:i,images:c}){try{if(console.log("Received selectedConfigurationId in add2DProduct:",s),console.log("Received configurations:",e),console.log("Received images:",c),!i||0===i.length)return void console.error("❌ Geen geldige configuraties ontvangen in add2DProduct!");if(!s)throw console.error("❌ selectedConfigurationId is niet gedefinieerd!"),new Error("❌ selectedConfigurationId is niet gedefinieerd!");let r=[];if(Array.isArray(c)?r=c:"string"===typeof c&&c.trim()&&(r=[c]),0===r.length)throw console.error("❌ Geen afbeeldingen om te uploaden!"),new Error("❌ Geen afbeeldingen om te uploaden!");const u=r.map((e=>({url:e,configurationId:s}))),d=i.find((e=>{const o=e.configurationId?._id||e.configurationId;return o===s}));if(!d)return void console.error(`❌ Configuratie met ID ${s} niet gevonden!`);d.selectedOptions&&Array.isArray(d.selectedOptions)||(console.warn("⚠️ selectedOptions ontbreekt of is geen array. Voeg lege array toe."),d.selectedOptions=[]);let p=d.options?.[0]?._id;if(!p)return void console.error(`❌ Geen optionId gevonden voor configuratie ID: ${s}`);let v=d.selectedOptions.find((e=>e.optionId===p));v||(v={_id:(0,te.A)(),optionId:p,images:[]},d.selectedOptions.push(v)),v.images?v.images.push(...u.map((e=>e.url))):v.images=[...u.map((e=>e.url))];const m={productCode:e||"",productName:o||"",productType:a||"",productPrice:t||0,description:l||"",brand:n||"",activeInactive:"active",partnerId:ue,configurations:i.map((e=>({_id:(0,te.A)(),configurationId:e.configurationId._id,selectedOptions:Array.isArray(e.selectedOptions)?e.selectedOptions.map((e=>({_id:e._id||(0,te.A)(),optionId:e.optionId,images:e.images||[]}))):[]})))},k=localStorage.getItem("jwtToken")||null,g=await fetch(`${se}/products`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify(m)});if(!g.ok){const e=await g.json();throw console.error("❌ Server response error:",e),new Error(e.message||"Onbekende serverfout")}const f=await g.json();return f}catch(u){console.error("❌ Algemene fout:",u.message),console.error("Fout in add2DProduct:",u)}}const ge=async({productCode:e,productName:o,productType:a,productPrice:t,description:l,brand:n,activeInactive:r,partnerId:s,configurations:i,file:c,thumbnail:u})=>{try{const d=await ae(c,o,s),p=await ae(u,o,s);if(!d||!d.startsWith("https://"))return void console.error("❌ Ongeldige 3D-model URL:",d);if(!p||!p.startsWith("https://"))return void console.error("❌ Ongeldige thumbnail URL:",p);let v=[];for(const e of i){let o=[];Array.isArray(e.options)&&0!==e.options.length?(o=e.options.map((e=>{const o=e.optionId?._id||"onbekend-option-id";return{optionId:o,images:[d],_id:`${o}-${Date.now()}`}})),o.length>0&&v.push({configurationId:e.configurationId?._id||"onbekend-config-id",selectedOptions:o})):console.warn("⚠️ Geen opties beschikbaar voor configuratie:",e.configurationId)}if(0===v.length)return void console.error("❌ Geen geldige configuraties gevonden");const m={productCode:e,productName:o,productType:a,brand:n,description:l,productPrice:t,activeInactive:r,partnerId:s,configurations:v,modelFile:d,thumbnail:p},k=localStorage.getItem("jwtToken")||null,g=await fetch(`${se}/products`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify(m)});if(!g.ok){const e=await g.json();throw console.error("❌ Server response error:",e),new Error(e.message||"Onbekende serverfout")}const f=await g.json();return f}catch(d){console.error("❌ Algemene fout in add3DProduct:",d)}},fe="localhost"!==window.location.hostname,he=fe?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",ye=((0,p.KR)(""),localStorage.getItem("jwtToken")),Le=ye?JSON.parse(atob(ye.split(".")[1])):{},be=()=>{ye&&Le||(console.warn("Geen geldig JWT token gevonden. Doorverwijzen naar login..."),xu.push("/login"))};async function we(e){try{const o=await fetch(`${he}/partners/${e}`);if(!o.ok)throw new Error("Network response was not ok");const a=await o.json(),t=a.data?.partner?.package||null;return t}catch(o){return console.error("Error fetching partner package:",o),null}}async function Ce(e){if(!e||"string"!==typeof e)return console.error("Partnernaam is ongeldig of ontbreekt."),null;try{const o=await v.A.get(`${he}/partners/partner/${e}`,{headers:{"Content-Type":"application/json"}});if(200===o.status){const e=o.data?.data||null;return e||(console.warn("Geen partner gevonden met deze naam."),null)}return console.error(`Onverwachte statuscode ontvangen: ${o.status}`),null}catch(o){return console.error("Fout tijdens het ophalen van de partner:",o.message),null}}async function _e(e){if(!e||"string"!==typeof e)return console.error("Partner ID is ongeldig of ontbreekt."),null;try{const o=await v.A.get(`${he}/partners/${e}`,{headers:{"Content-Type":"application/json"}});if(200===o.status){const e=o.data?.data||null;return e||(console.warn("Geen partner gevonden met dit ID."),null)}return console.error(`Onverwachte statuscode ontvangen: ${o.status}`),null}catch(o){return console.error("Fout tijdens het ophalen van de partner:",o.message),null}}const Ee={class:"content"},Ie={class:"top"},Pe={class:"collection-nav"},Te=["onClick"],Ae={key:0},$e={key:1},xe={key:2,class:"products"},Se={class:"row"},Ne={class:"product-grid"},Ke={class:"product-image-container"},Ue={key:1,class:"no-image-message"},Fe={class:"product-info"},Re={class:"product-name"},Ve={class:"product-price"},Xe={__name:"Collections",setup(e){const o=(0,u.lq)(),a=((0,p.KR)(null),(0,p.KR)([])),t=(0,p.KR)(!1),n=(0,p.KR)(null),r=(0,p.KR)(["All"]),s=(0,p.KR)("All"),i=async e=>{try{const o=await de(e);a.value=o}catch(o){throw console.error("Error fetching products:",o),new Error("Er is een fout opgetreden bij het ophalen van producten.")}},c=async e=>{try{const o=await pe(e);r.value=["All",...o]}catch(o){throw console.error("Error fetching product types:",o),new Error("Er is een fout opgetreden bij het ophalen van producttypes.")}};(0,l.sV)((async()=>{try{t.value=!0;const e=o.query.partner?o.query.partner.replace(/([A-Z])/g," $1").trim():null,a=await Ce(e);if(a){const e=a._id;await _e(e);await i(e),await c(e)}else console.error("Partner niet gevonden.")}catch(e){n.value=e.message}finally{t.value=!1}}));const v=(0,l.EW)((()=>s.value&&"All"!==s.value?a.value.filter((e=>e.productType?.toLowerCase()===s.value.toLowerCase())):a.value)),m=e=>{s.value=e};function k(e){for(const o of e.configurations)for(const e of o.selectedOptions)if(e.images&&e.images.length>0)return e.images[0];return""}return(e,o)=>{const a=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.Lk)("div",Ee,[(0,l.Lk)("div",Ie,[o[0]||(o[0]=(0,l.Lk)("h1",null,"Collections",-1)),(0,l.Lk)("nav",Pe,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.value,(e=>((0,l.uX)(),(0,l.CE)("p",{key:e,class:(0,d.C4)({active:s.value===e}),onClick:o=>m(e)},(0,d.v_)(e),11,Te)))),128))])]),t.value?((0,l.uX)(),(0,l.CE)("div",Ae,"Laden...")):(0,l.Q3)("",!0),n.value?((0,l.uX)(),(0,l.CE)("div",$e,(0,d.v_)(n.value),1)):(0,l.Q3)("",!0),t.value||n.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",xe,[(0,l.Lk)("div",Se,[(0,l.Lk)("h2",null,(0,d.v_)(s.value),1),(0,l.Lk)("p",null,[(0,l.Lk)("span",null,(0,d.v_)(v.value?v.value.length:0),1),o[1]||(o[1]=(0,l.eW)(" items "))])]),(0,l.Lk)("div",Ne,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(v.value,(e=>((0,l.uX)(),(0,l.Wv)(a,{key:e._id,to:`/product/${e._id}`,class:(0,d.C4)(["product-card",e.productType])},{default:(0,l.k6)((()=>[(0,l.Lk)("div",Ke,[e.configurations?.length>0&&e.configurations[0].selectedOptions?.length>0?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"product-image",style:(0,d.Tr)({backgroundImage:"url("+(e.thumbnail||k(e))+")"})},null,4)):((0,l.uX)(),(0,l.CE)("div",Ue," Geen afbeelding beschikbaar "))]),(0,l.Lk)("div",Fe,[(0,l.Lk)("p",Re,(0,d.v_)(e.productName),1),(0,l.Lk)("p",Ve,"€ "+(0,d.v_)(e.productPrice)+",00",1)])])),_:2},1032,["to","class"])))),128))])]))])],64)}}},je=(0,r.A)(Xe,[["__scopeId","data-v-67e69018"]]),Oe=je;var De=a(922),Be=a(437);const Je={class:"ar-container"},ze={ref:"videoElement",autoplay:"",playsinline:""},qe={ref:"canvasElement",width:"640",height:"480"};function Me(e,o,a,t,n,r){return(0,l.uX)(),(0,l.CE)("div",Je,[(0,l.Lk)("video",ze,null,512),(0,l.Lk)("canvas",qe,null,512)])}var Qe=a(726),Ge=a(866),We=a(398);const He={name:"FaceTracking",data(){return{video:null,faceMesh:null,canvas:null,ctx:null}},mounted(){this.initCamera()},methods:{async initCamera(){try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});this.video=this.$refs.videoElement,this.video.srcObject=e,this.video.onloadedmetadata=()=>{this.video.play(),this.initFaceMesh()}}catch(e){console.error("Camera error:",e)}},initFaceMesh(){this.faceMesh=new Qe.FaceMesh({locateFile:e=>"face_mesh_solution_simd_wasm_bin.js"===e?"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh@0.4/face_mesh_solution_wasm_bin.js":`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh@0.4/${e}`}),this.faceMesh.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.7,minTrackingConfidence:.7}),this.faceMesh.onResults(this.onFaceMeshResults);const e=new Ge.Camera(this.$refs.videoElement,{onFrame:async()=>{await this.faceMesh.send({image:this.$refs.videoElement})},width:640,height:480});e.start()},onFaceMeshResults(e){if(this.canvas||(this.canvas=this.$refs.canvasElement),this.ctx||(this.ctx=this.canvas.getContext("2d")),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(e.image,0,0,this.canvas.width,this.canvas.height),e.multiFaceLandmarks)for(const o of e.multiFaceLandmarks)(0,We.drawConnectors)(this.ctx,o,Qe.FACEMESH_TESSELATION,{color:"#00FF00",lineWidth:1}),(0,We.drawLandmarks)(this.ctx,o,{color:"#FF0000",radius:2})}}},Ze=(0,r.A)(He,[["render",Me],["__scopeId","data-v-42dcdf80"]]),Ye=Ze,eo={class:"container"},oo={key:0,class:"carousel"},ao={class:"top"},to={class:"processbar"},lo={key:1,class:"model desktop"},no={class:"icons desktop"},ro={key:0,class:"icon"},so={key:2,class:"rotate-informer desktop"},io={class:"mobileElements"},co={class:"row"},uo={class:"name"},po={class:"icons"},vo={key:0,class:"icon"},mo={key:0,class:"model"},ko={key:1,class:"bigImageWithImages"},go={class:"images"},fo=["onClick"],ho={key:2,class:"rotate-informer desktop"},yo={class:"config-wrapper"},Lo={class:"overview"},bo={key:0},wo={key:1},Co={class:"fieldName"},_o={class:"row"},Eo=["onClick"],Io={class:"summary"},Po={key:0},To={key:1},Ao={class:"links"},$o={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",style:{transform:"rotate(180deg)"}},xo=.005,So={__name:"DetailsProduct",setup(e){const o=(0,p.KR)(!1),a=(0,p.KR)(!1);function n(){a.value=!a.value}function r(e){e.preventDefault(),z=!0;const o=e.touches?e.touches[0]:e;q=o.clientX,M=o.clientY}function s(e){if(!z)return;const o=e.touches?e.touches[0]:e,a=o.clientX-q,t=o.clientY-M;D&&(D.rotation.y+=a*xo,D.rotation.x+=t*xo),q=o.clientX,M=o.clientY}function i(){z=!1}function c(e){z=!0,q=e.clientX,M=e.clientY}function v(e){if(!z)return;const o=e.clientX-q,a=e.clientY-M;D&&(D.rotation.y+=o*xo,D.rotation.x+=a*xo),q=e.clientX,M=e.clientY}function m(){z=!1}(0,p.KR)([]);const k=(0,p.KR)([]),f=(0,p.KR)([]),h=(0,p.KR)([]),y=((0,p.KR)([]),(0,p.KR)([]),(0,p.KR)(null),(0,p.KR)(0)),L=(0,p.KR)([]),b=(0,p.KR)(null),w=(0,u.lq)(),C=((0,u.rd)(),(0,p.KR)(null)),_=(0,p.KR)({productName:"",productCode:"",productPrice:0,productModelFile:""}),E=(0,p.KR)(""),I=(0,p.KR)(""),P=(0,p.KR)(!0),T=(0,p.KR)(null),A=(0,p.KR)(""),$="localhost"!==window.location.hostname,x=$?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",S=((0,l.EW)((()=>W.value)),(0,p.KR)("")),N=(0,p.KR)("");let K,U,F,R=new De.Z58;const V=new Y.L,X=new oe.Z,j=new ee.B;X.setDecoderPath("https://www.gstatic.com/draco/v1/decoders/"),j.setDRACOLoader(X);(0,p.KR)(null);let O=!1,D=null,B=!1,J=!1,z=!1,q=0,M=0;const Q=(0,p.KR)(0),G=(0,p.KR)(null),W=(0,p.KR)([]),H=(0,p.KR)([]),Z=(0,p.KR)([]),ae=(0,p.KR)([]);async function te(e){try{const o=await fetch(`${x}/partners/${e}`);if(!o.ok)throw new Error("Network response was not ok");const a=await o.json();S.value=a.data.partner.name||""}catch(o){console.error("Error fetching partner package:",o)}}async function le(e){try{const o=await fetch(`${x}/partners/${e}`);if(!o.ok)throw new Error("Failed to fetch partner package");const a=await o.json();a&&a.data&&a.data.partner?N.value=a.data.partner.package:console.error("Partner data is incomplete:",a)}catch(T){console.error("Error fetching partner package:",T)}}function ne(){const e=document.querySelector(".model");e&&F&&(F.setSize(e.offsetWidth,e.offsetHeight),K.aspect=e.offsetWidth/e.offsetHeight,K.updateProjectionMatrix())}function re(){R||console.error("Scene is niet geïnitialiseerd!")}function se(){if(!B)try{R=new De.Z58,K=new De.ubm(75,window.innerWidth/window.innerHeight,.1,1e3),K.position.set(0,0,40),K.lookAt(0,0,0);const e=document.querySelector(".mobileElements .model"),o=document.querySelector(".model.desktop");if(!e&&!o)return void console.error("3D container element niet gevonden!");!U&&window.innerWidth<=768&&e&&(U=new Be.JeP,U.setSize(e.offsetWidth,e.offsetHeight),e.contains(U.domElement)||e.appendChild(U.domElement)),!F&&window.innerWidth>768&&o&&(F=new Be.JeP,F.setSize(o.offsetWidth,o.offsetHeight),o.contains(F.domElement)||o.appendChild(F.domElement));const a=new De.HiM(16777215,1,100);a.position.set(50,50,50),R.add(a);const t=new De.ZyN(16777215,.4);t.position.set(10,20,10),t.target.position.set(0,0,0),R.add(t),R.add(t.target);const l=new De.$p8(4210752,.8);R.add(l),e&&(e.addEventListener("mousedown",c,!1),e.addEventListener("touchstart",r,!1)),o&&(o.addEventListener("mousedown",c,!1),o.addEventListener("touchstart",r,!1)),window.addEventListener("mousemove",v,!1),window.addEventListener("touchmove",s,!1),window.addEventListener("mouseup",m,!1),window.addEventListener("touchend",i,!1),J=!0,B=!0,ie()}catch(e){console.error("Fout bij initialisatie van de scene:",e)}}function ie(){requestAnimationFrame(ie),U?U.render(R,K):F&&F.render(R,K)}function ce(e){k.value=[],f.value=[],h.value=[],e.traverse((e=>{e.isMesh&&(Array.isArray(e.material)?e.material.forEach((e=>{k.value.push(e),f.value.includes(e.name)||(f.value.push(e.name),h.value.push("#ffffff"))})):(k.value.push(e.material),f.value.includes(e.material.name)||(f.value.push(e.material.name),h.value.push("#ffffff"))))})),f.value=[...new Set(f.value)]}function ue(e){if(!B)return void console.error("Scene is not initialized.");const o=e.split(".").pop().toLowerCase();"obj"===o?pe(e):"glb"===o||"gltf"===o?de(e):console.error("Unsupported file type:",o)}function de(e){j.load(e,(e=>{const o=e.scene,a=(new De.NRn).setFromObject(o),t=a.getCenter(new De.Pq0);o.position.set(-t.x,-t.y,-t.z),o.scale.set(100,100,100),R.add(o),D=o,O=!0,ce(o),re()}))}function pe(e){V.load(e,(e=>{e.scale.set(10,10,10),R.add(e),D=e,O=!0,ce(e),re()}))}function ve(e){let o=_.value.configurations||[],a=o.find((o=>o.selectedOptions.some((o=>o.optionId?.name===e))));if(a){a.configurationId;const o=a.selectedOptions.find((o=>o.optionId?.name===e));if(o){const e=o.optionId?.name;if(e)return e}else console.warn(`Geen geselecteerde optie gevonden voor ${e}`)}else console.warn(`Geen configuratie gevonden voor ${e}`);return"#FFFFFF"}function me(e){if(!R)return void console.error("Scene is niet geïnitialiseerd!");const o=document.querySelector(".config-ui__page.active");if(!o)return void console.error("Geen actieve pagina gevonden.");const a=o.querySelector("h2.fieldName");let t=a.textContent.trim();const l=t.match(/for\s+(.+)/);if(l&&(t=l[1].trim()),!t||"string"!==typeof t)return void console.error("Ongeldig fieldName opgegeven.");const n=/^#[0-9A-Fa-f]{6}$/i.test(e);n||(console.warn(`Ongeldige kleur: ${e}, standaardkleur wordt toegepast.`),e="#FFFFFF");let r=!1;R.traverse((o=>{o instanceof De.eaF&&o.name.toLowerCase()===t.toLowerCase()&&o.material&&(o.material instanceof De._4j?(o.material.color.set(e),r=!0):Array.isArray(o.material)?(o.material.forEach((o=>{o instanceof De._4j&&o.color.set(e)})),r=!0):console.warn(`Object '${o.name}' heeft een niet-ondersteund materiaaltype.`))})),r||console.warn(`Geen object gevonden met naam '${t}' om de kleur toe te passen.`)}async function ke(e){const o=w.params.productId;if(o){Q.value=e;try{const a=await fetch(`${x}/products/${o}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Product fetch error! Status: ${a.status}`);const t=await a.json(),l=t.data.product,n=l.configurations||[],r=ve(e);r&&me(r),_.value={productName:l.productName,productCode:l.productCode,productPrice:l.productPrice,productModelFile:l.productModelFile,configurations:n}}catch(a){console.error("Error fetching product data:",a.message)}}else console.error("productId is undefined!")}function ge(e){const o=_.value.configurations||[],a=o.find((o=>o.selectedOptions.some((o=>o.optionId?.name===e))));return a?a.configurationId?.fieldName||null:(console.warn(`Geen fieldName gevonden voor optie: ${e}`),null)}async function fe(e){try{const o=await fetch(`${x}/partnerConfigurations`);if(!o.ok)throw new Error("Network response was not ok");const a=await o.json(),t=a.data.filter((o=>o.partnerId===e)).length;return ae.value=t,t}catch(o){console.error("Error fetching partner configurations:",o)}}async function he(e,o){try{const a=await fetch(`${x}/partnerConfigurations?partnerId=${e}`);if(!a.ok)throw new Error("Unable to fetch partner configurations");const t=await a.json();if(!Array.isArray(t.data))return console.error("Fetched data is not an array:",t.data),[];t.data.filter((o=>o.partnerId===e));o.configurations&&o.configurations.length>0?Z.value=o.configurations:(console.error("No configurations available for the product."),Z.value=[]);const l=o.configurations?.[0]?.configurationId;if(!l)return console.error("ConfigurationId for product is not available."),[]}catch(a){return console.error("Error fetching partner configurations:",a),[]}}async function ye(e){try{const o=await fetch(`${x}/options/${e}`);if(!o.ok)throw new Error("Network response was not ok");const a=await o.json(),t=W.value.find((o=>o.optionId===e));return t||W.value.push({optionId:e,name:a.data.name}),a.data.name}catch(T){return console.error("Error fetching option by ID:",T),null}}async function Le(e){try{const o=await fetch(`${x}/configurations/${e}`);if(!o.ok)throw new Error("Network response was not ok");const a=await o.json();for(const e of a.data.options)await ye(e.optionId);return a.data.options}catch(T){return console.error("Error fetching configuration options:",T),null}}async function be(e){try{P.value=!0,T.value=null;const o=await fetch(`${x}/products/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);const a=await o.json(),t=a.data.product;console.log(a.data.product),E.value=t.productName,I.value=t.modelFile,console.log(t.modelFile);const l=t.configurations||[];W.value=[];let n=[];const r=await Promise.all(l.map((async e=>{let o=e.configurationId;"object"===typeof o&&o._id&&(o=o._id),await Le(o);const a=`${x}/configurations/${o}`;try{const t=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Configuration fetch error! Status: ${t.status}`);const l=await t.json(),r=l.data.options||[],s=e.selectedOptions[0];let i=s?.name;if(!i&&s?.optionId){const e=`${x}/options/${s.optionId._id}`,o=await fetch(e),a=await o.json();i=a.data?.name||"Option 1"}s?.images&&n.push(...s.images);const c=H.value.findIndex((e=>e.configurationId===o));return-1!==c?H.value[c].selectedItem={optionName:i,images:n}:H.value.push({configurationId:o,selectedItem:{optionName:i,images:n}}),{...e,options:r}}catch(t){return console.error(`Error fetching configuration for ID ${o}:`,t.message),{...e,options:[]}}})));n.length>0?(L.value=n,b.value=n[0]):console.warn("No images found for the selected option"),_.value={productName:t.productName,productCode:t.productCode,productPrice:t.productPrice,productModelFile:t.productModelFile,images:n,configurations:r};const s=r.flatMap((e=>e.selectedOptions.map((e=>e.optionName))));W.value=s;const i=t.partnerId;i&&(await te(i),await le(i),await fe(i),await _e(i),await he(i,t))}catch(o){console.error("Error fetching product data:",o.message),T.value="Er is een fout opgetreden bij het ophalen van de productgegevens."}finally{P.value=!1}}async function we(){const e=document.querySelectorAll(".config-ui__page"),o=document.querySelector(".overview"),a=document.querySelector(".summary"),t=document.querySelector(".nextButton"),l=document.querySelector(".backButton");e&&0!==e.length?(0===y.value&&(o&&(o.style.display="flex",e.forEach((e=>e.classList.remove("active")))),t&&(t.style.visibility="visible"),l&&(l.style.visibility="hidden"),a&&"flex"==a.style.display&&(o.style.display="none",e.forEach((e=>e.classList.remove("active"))),e[y.value].classList.add("active"),l.style.visibility="visible"),a&&(a.style.display="none")),a&&(a.style.display="none"),y.value>0&&(e[y.value].classList.remove("active"),y.value--,e[y.value].classList.add("active"),o&&(o.style.display="none"),l&&(l.style.visibility="visible"),0===y.value&&l&&(l.style.visibility="hidden"),t&&(t.style.visibility="visible"))):console.warn("No config-ui__page elements found.")}async function Ce(){const e=document.querySelector(".overview"),o=document.querySelector(".summary"),a=document.querySelectorAll(".config-ui__page");if(a&&0!==a.length)if(e&&"none"!==e.style.display)e.style.display="none",y.value=0,a.forEach((e=>e.classList.remove("active"))),a[y.value].classList.add("active"),document.querySelector(".backButton").style.visibility="visible";else if(a[y.value].classList.remove("active"),y.value<a.length-1)y.value++,a[y.value].classList.add("active");else{const e=w.params.productId;if(!e)return void console.error("productId is undefined!");try{const a=await fetch(`${x}/products/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Failed to fetch product data. Status: ${a.status}`);const t=await a.json(),l=t.data.product,n=l.partnerId,r=await fe(n);r<=1&&(o.style.display="flex",document.querySelector(".nextButton").style.visibility="hidden")}catch(t){console.error("Error fetching product data:",t.message)}}else console.warn("No config-ui__page elements found.")}async function _e(e){try{const o=await fetch(`${x}/partners/${e}`);if(!o.ok)throw new Error("Unable to fetch logo URL");const a=await o.json();a?.data?.partner?A.value=a.data.partner.logo_url:console.warn("Partner not found in the response.")}catch(o){console.error("Error fetching logo URL:",o)}}function Ee(){const e=L.value.indexOf(b.value);e>0&&(b.value=L.value[e-1])}function Ie(){const e=L.value.indexOf(b.value);e<L.value.length-1&&(b.value=L.value[e+1])}function Pe(e){b.value=e}return(0,l.hi)((()=>{window.removeEventListener("resize",ne)})),(0,l.wB)(G,(e=>{if(e){const o=ge(e),a=ve(e);a&&o&&me(a)}})),(0,l.sV)((async()=>{const e=w.params.productId;if(e)try{P.value=!0,T.value=null,await be(e);const o=_.value.partnerId;if(o&&await le(o),"pro"===N.value&&b.value){const e=document.querySelector(".model");if(e){se();const e=`${b.value}`;ue(e)}else console.error("3D container not found!")}}catch(o){console.error("Error fetching product data:",o.message),T.value="Error occurred while fetching product data."}finally{P.value=!1}})),(0,l.wB)((()=>w.params.productId),(async e=>{e&&e!==C.value&&(C.value=e,await be(e))}),{immediate:!0}),(e,a)=>{const r=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.Lk)("div",eo,[(0,l.Lk)("div",{class:"logoConfigurator",style:(0,d.Tr)({backgroundImage:`url(${A.value})`})},null,4),null==I.value?((0,l.uX)(),(0,l.CE)("div",oo,[(0,l.Lk)("div",ao,[(0,l.Lk)("div",{class:(0,d.C4)(["icon",{disabled:b.value===L.value[0]}]),onClick:a[0]||(a[0]=e=>b.value!==L.value[0]&&Ee())},a[5]||(a[5]=[(0,l.Lk)("i",{class:"fa fa-angle-left"},null,-1)]),2),(0,l.Lk)("div",{class:"image",style:(0,d.Tr)({backgroundImage:`url(${b.value})`})},null,4),(0,l.Lk)("div",{class:(0,d.C4)(["icon",{disabled:b.value===L.value[L.value.length-1]}]),onClick:a[1]||(a[1]=e=>b.value!==L.value[L.value.length-1]&&Ie())},a[6]||(a[6]=[(0,l.Lk)("i",{class:"fa fa-angle-right"},null,-1)]),2)]),(0,l.Lk)("div",to,[a[7]||(a[7]=(0,l.Lk)("div",{class:"long-bar"},null,-1)),(0,l.Lk)("div",{class:"short-bar",style:(0,d.Tr)({width:(L.value.indexOf(b.value)+1)/L.value.length*100+"%"})},null,4)])])):(0,l.Q3)("",!0),I.value?((0,l.uX)(),(0,l.CE)("div",lo)):(0,l.Q3)("",!0),(0,l.Lk)("div",no,[(0,l.Lk)("a",{onClick:a[2]||(a[2]=o=>e.$router.go(-1))},a[8]||(a[8]=[(0,l.Lk)("div",{class:"icon"},[(0,l.Lk)("div",null,[(0,l.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 256 256"},[(0,l.Lk)("path",{d:"M104,216V152h48v64h64V120a8,8,0,0,0-2.34-5.66l-80-80a8,8,0,0,0-11.32,0l-80,80A8,8,0,0,0,40,120v96Z",fill:"none",stroke:"white","stroke-width":"8"})])]),(0,l.Lk)("p",null,"Home")],-1)])),"pro"===N.value?((0,l.uX)(),(0,l.CE)("div",ro,[(0,l.Lk)("div",{onClick:a[3]||(a[3]=e=>o.value=!o.value),class:"AR"},a[9]||(a[9]=[(0,l.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[(0,l.Lk)("path",{d:"M11.98 2.36a.75.75 0 00-.33.1L8.3 4.11H8.3a.08.08 0 00-.01.01.76.76 0 00-.31 1c.09.18.24.31.43.38.19.06.4.05.57-.04l2.26-1.13v2.7c0 .2.08.39.22.53a.76.76 0 001.08 0 .76.76 0 00.22-.54V4.34L15 5.47h.01a.76.76 0 001.03-.91.75.75 0 00-.34-.42l-.01-.01a.08.08 0 00-.01 0l-3.34-1.68a.75.75 0 00-.37-.09zm-5.57 2.8a.76.76 0 00-.34.08L2.72 6.9a.76.76 0 00-.42.7v3.9c0 .2.08.39.22.53a.76.76 0 001.07 0 .76.76 0 00.22-.54V8.81l2.26 1.13a.76.76 0 001.05-.91.76.76 0 00-.35-.42.08.08 0 00-.02-.02l-2-1 2-1c.3-.16.48-.52.4-.85a.77.77 0 00-.74-.58zm11.18 0a.77.77 0 00-.73.58c-.08.32.08.67.37.83l.02.02 2 1-2 1a.08.08 0 00-.02.02c-.17.1-.3.24-.35.42a.76.76 0 00.47.95c.19.06.4.05.58-.04l2.26-1.13v2.7c0 .2.08.39.22.53a.76.76 0 001.07 0 .76.76 0 00.22-.54V7.6a.76.76 0 00-.42-.69l-3.35-1.67a.76.76 0 00-.34-.08zm-2.24 4.47a.75.75 0 00-.33.08L12 11.2l-3.02-1.5a.76.76 0 00-1.05.91c.06.18.2.33.36.42a.08.08 0 000 .01h.01a.08.08 0 000 .01l2.94 1.47v2.89c0 .2.08.39.22.53a.76.76 0 001.08 0 .76.76 0 00.22-.53v-2.9l2.93-1.46.02-.02c.3-.16.45-.5.37-.83a.77.77 0 00-.73-.58zM3.01 14.11a.75.75 0 00-.7.75v3.9c-.01.29.15.56.41.69l3.35 1.67a.76.76 0 001.05-.91.76.76 0 00-.34-.42.08.08 0 00-.03-.02l-2-1 2-1 .02-.02c.17-.1.3-.24.35-.42a.76.76 0 00-.47-.95.77.77 0 00-.58.04l-2.26 1.13v-2.7c0-.2-.08-.4-.24-.55a.76.76 0 00-.56-.2zm17.88 0a.76.76 0 00-.7.75v2.69l-2.26-1.13a.76.76 0 00-1.05.91c.06.18.18.33.35.42a.08.08 0 00.01 0v.02a.08.08 0 00.01 0l2 1-2 1h-.01a.08.08 0 000 .01h-.01a.76.76 0 00.13 1.37c.18.07.39.06.57-.03l3.35-1.67c.26-.13.42-.4.42-.69v-3.9a.76.76 0 00-.8-.75zm-8.94 4.47a.08.08 0 00-.03 0 .75.75 0 00-.47.23.76.76 0 00-.2.52v2.69l-2.26-1.13a.08.08 0 00-.01 0 .76.76 0 00-1.03.91c.05.18.18.33.34.42l.01.01a.08.08 0 00.01.01l3.34 1.67c.22.12.49.11.7 0l3.34-1.67.02-.01a.76.76 0 00.31-1 .76.76 0 00-1-.34l-2.26 1.13v-2.7a.76.76 0 00-.8-.74z"})],-1)])),a[10]||(a[10]=(0,l.Lk)("p",null,"AR",-1))])):(0,l.Q3)("",!0),o.value?((0,l.uX)(),(0,l.Wv)(Ye,{key:1,onClose:n})):(0,l.Q3)("",!0)]),null!=I.value?((0,l.uX)(),(0,l.CE)("div",so,a[11]||(a[11]=[(0,l.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#ffffff",viewBox:"0 0 256 256"},[(0,l.Lk)("path",{d:"M232,48V88a8,8,0,0,1-16,0V56H184a8,8,0,0,1,0-16h40A8,8,0,0,1,232,48ZM72,200H40V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H72a8,8,0,0,0,0-16Zm152-40a8,8,0,0,0-8,8v32H184a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,224,160ZM32,96a8,8,0,0,0,8-8V56H72a8,8,0,0,0,0-16H32a8,8,0,0,0-8,8V88A8,8,0,0,0,32,96ZM188,167l-56,32a8,8,0,0,1-7.94,0L68,167A8,8,0,0,1,64,160V96a8,8,0,0,1,4-7l56-32a8,8,0,0,1,7.94,0l56,32a8,8,0,0,1,4,7v64A8,8,0,0,1,188,167ZM88.12,96,128,118.79,167.88,96,128,73.21ZM80,155.36l40,22.85V132.64L80,109.79Zm96,0V109.79l-40,22.85v45.57Z"})],-1),(0,l.Lk)("p",null,"Drag to rotate",-1)]))):(0,l.Q3)("",!0),(0,l.Lk)("div",io,[(0,l.bF)(r,{to:"/",class:"back"},{default:(0,l.k6)((()=>a[12]||(a[12]=[(0,l.Lk)("i",{class:"fa fa-angle-left"},null,-1),(0,l.Lk)("p",null,"Back to collections",-1)]))),_:1}),(0,l.Lk)("div",co,[(0,l.Lk)("p",uo,(0,d.v_)(E.value),1),(0,l.Lk)("div",po,["pro"===N.value?((0,l.uX)(),(0,l.CE)("div",vo,[(0,l.Lk)("div",{onClick:a[4]||(a[4]=e=>o.value=!o.value),class:"AR"},a[13]||(a[13]=[(0,l.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[(0,l.Lk)("path",{d:"M11.98 2.36a.75.75 0 00-.33.1L8.3 4.11H8.3a.08.08 0 00-.01.01.76.76 0 00-.31 1c.09.18.24.31.43.38.19.06.4.05.57-.04l2.26-1.13v2.7c0 .2.08.39.22.53a.76.76 0 001.08 0 .76.76 0 00.22-.54V4.34L15 5.47h.01a.76.76 0 001.03-.91.75.75 0 00-.34-.42l-.01-.01a.08.08 0 00-.01 0l-3.34-1.68a.75.75 0 00-.37-.09zm-5.57 2.8a.76.76 0 00-.34.08L2.72 6.9a.76.76 0 00-.42.7v3.9c0 .2.08.39.22.53a.76.76 0 001.07 0 .76.76 0 00.22-.54V8.81l2.26 1.13a.76.76 0 001.05-.91.76.76 0 00-.35-.42.08.08 0 00-.02-.02l-2-1 2-1c.3-.16.48-.52.4-.85a.77.77 0 00-.74-.58zm11.18 0a.77.77 0 00-.73.58c-.08.32.08.67.37.83l.02.02 2 1-2 1a.08.08 0 00-.02.02c-.17.1-.3.24-.35.42a.76.76 0 00.47.95c.19.06.4.05.58-.04l2.26-1.13v2.7c0 .2.08.39.22.53a.76.76 0 001.07 0 .76.76 0 00.22-.54V7.6a.76.76 0 00-.42-.69l-3.35-1.67a.76.76 0 00-.34-.08zm-2.24 4.47a.75.75 0 00-.33.08L12 11.2l-3.02-1.5a.76.76 0 00-1.05.91c.06.18.2.33.36.42a.08.08 0 000 .01h.01a.08.08 0 000 .01l2.94 1.47v2.89c0 .2.08.39.22.53a.76.76 0 001.08 0 .76.76 0 00.22-.53v-2.9l2.93-1.46.02-.02c.3-.16.45-.5.37-.83a.77.77 0 00-.73-.58zM3.01 14.11a.75.75 0 00-.7.75v3.9c-.01.29.15.56.41.69l3.35 1.67a.76.76 0 001.05-.91.76.76 0 00-.34-.42.08.08 0 00-.03-.02l-2-1 2-1 .02-.02c.17-.1.3-.24.35-.42a.76.76 0 00-.47-.95.77.77 0 00-.58.04l-2.26 1.13v-2.7c0-.2-.08-.4-.24-.55a.76.76 0 00-.56-.2zm17.88 0a.76.76 0 00-.7.75v2.69l-2.26-1.13a.76.76 0 00-1.05.91c.06.18.18.33.35.42a.08.08 0 00.01 0v.02a.08.08 0 00.01 0l2 1-2 1h-.01a.08.08 0 000 .01h-.01a.76.76 0 00.13 1.37c.18.07.39.06.57-.03l3.35-1.67c.26-.13.42-.4.42-.69v-3.9a.76.76 0 00-.8-.75zm-8.94 4.47a.08.08 0 00-.03 0 .75.75 0 00-.47.23.76.76 0 00-.2.52v2.69l-2.26-1.13a.08.08 0 00-.01 0 .76.76 0 00-1.03.91c.05.18.18.33.34.42l.01.01a.08.08 0 00.01.01l3.34 1.67c.22.12.49.11.7 0l3.34-1.67.02-.01a.76.76 0 00.31-1 .76.76 0 00-1-.34l-2.26 1.13v-2.7a.76.76 0 00-.8-.74z"})],-1)])),a[14]||(a[14]=(0,l.Lk)("p",null,"AR",-1))])):(0,l.Q3)("",!0),o.value?((0,l.uX)(),(0,l.Wv)(Ye,{key:1,onClose:n})):(0,l.Q3)("",!0)])]),null!=I.value?((0,l.uX)(),(0,l.CE)("div",mo)):(0,l.Q3)("",!0),null==I.value?((0,l.uX)(),(0,l.CE)("div",ko,[(0,l.Lk)("div",{class:"bigImage",style:(0,d.Tr)({backgroundImage:`url(${b.value})`})},null,4),(0,l.Lk)("div",go,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(L.value,((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:e._id,class:(0,d.C4)(["image",{active:e===b.value}]),style:(0,d.Tr)({backgroundImage:`url(${e})`}),onClick:o=>Pe(e)},null,14,fo)))),128))])])):(0,l.Q3)("",!0),null!=I.value?((0,l.uX)(),(0,l.CE)("div",ho,a[15]||(a[15]=[(0,l.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#ffffff",viewBox:"0 0 256 256"},[(0,l.Lk)("path",{d:"M232,48V88a8,8,0,0,1-16,0V56H184a8,8,0,0,1,0-16h40A8,8,0,0,1,232,48ZM72,200H40V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H72a8,8,0,0,0,0-16Zm152-40a8,8,0,0,0-8,8v32H184a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,224,160ZM32,96a8,8,0,0,0,8-8V56H72a8,8,0,0,0,0-16H32a8,8,0,0,0-8,8V88A8,8,0,0,0,32,96ZM188,167l-56,32a8,8,0,0,1-7.94,0L68,167A8,8,0,0,1,64,160V96a8,8,0,0,1,4-7l56-32a8,8,0,0,1,7.94,0l56,32a8,8,0,0,1,4,7v64A8,8,0,0,1,188,167ZM88.12,96,128,118.79,167.88,96,128,73.21ZM80,155.36l40,22.85V132.64L80,109.79Zm96,0V109.79l-40,22.85v45.57Z"})],-1),(0,l.Lk)("p",null,"Drag to rotate",-1)]))):(0,l.Q3)("",!0)]),(0,l.Lk)("div",yo,[(0,l.Lk)("div",Lo,[a[17]||(a[17]=(0,l.Lk)("h2",null,"Overview",-1)),Z.value.length>0?((0,l.uX)(),(0,l.CE)("ul",bo,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Z.value,((e,o)=>((0,l.uX)(),(0,l.CE)("li",{key:o},[(0,l.Lk)("p",null,(0,d.v_)(e.configurationId?.fieldName),1),a[16]||(a[16]=(0,l.Lk)("i",{class:"fa fa-angle-right"},null,-1))])))),128))])):((0,l.uX)(),(0,l.CE)("p",wo,"No configurations found for this product."))]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Z.value,((e,o)=>(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",{key:o,class:"config-ui__page"},[(0,l.Lk)("h2",Co,(0,d.v_)("color"===e.configurationId?.fieldType?"Choose the color for":"Choose an option for")+" "+(0,d.v_)(e.configurationId?.fieldName||`Layer ${o}`),1),(0,l.Lk)("div",_o,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.selectedOptions,((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o,class:(0,d.C4)({active:e.optionId?.name===G.value}),onClick:o=>ke(e.optionId?.name),style:(0,d.Tr)({backgroundColor:e.optionId?.name})},null,14,Eo)))),128))])])),[[t.aG,y.value===o]]))),128)),(0,l.Lk)("div",Io,[a[19]||(a[19]=(0,l.Lk)("h2",null,"Summary",-1)),Z.value.length>0?((0,l.uX)(),(0,l.CE)("ul",Po,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Z.value,((e,o)=>((0,l.uX)(),(0,l.CE)("li",{key:o,class:"borderBottom"},[(0,l.Lk)("p",null,(0,d.v_)(e.configurationId?.fieldName),1),(0,l.Lk)("ul",null,[H.value.length>0&&H.value.some((o=>o.configurationId===e.configurationId?._id))?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(H.value,((e,o)=>((0,l.uX)(),(0,l.CE)("li",{key:o},[(0,l.Lk)("p",{class:"border",style:(0,d.Tr)({backgroundColor:e.selectedItem?.optionName||"transparent"})},null,4)])))),128)):((0,l.uX)(),(0,l.CE)("li",To,a[18]||(a[18]=[(0,l.Lk)("p",{class:"border",style:{"background-color":"transparent"}},[(0,l.Lk)("span",null,"No option selected")],-1)])))])])))),128))])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Ao,[(0,l.Lk)("a",{href:"#",class:"backButton",onClick:we,style:{visibility:"hidden"}},[((0,l.uX)(),(0,l.CE)("svg",$o,a[20]||(a[20]=[(0,l.Lk)("path",{d:"M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"},null,-1)]))),a[21]||(a[21]=(0,l.Lk)("p",null,"Back",-1))]),(0,l.Lk)("a",{class:"nextButton",onClick:Ce,style:{visibility:"visible"}},a[22]||(a[22]=[(0,l.Lk)("p",null,"Next",-1),(0,l.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},[(0,l.Lk)("path",{d:"M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"})],-1)])),a[23]||(a[23]=(0,l.Lk)("a",{href:"#",class:"summaryButton",style:{display:"none"}},[(0,l.Lk)("p",null,"Summary"),(0,l.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},[(0,l.Lk)("path",{d:"M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"})])],-1))])])])],64)}}},No=So,Ko=No,Uo=a.p+"img/cross-circle.9c292941.svg",Fo=a.p+"img/add.37c77bcc.svg",Ro=a.p+"img/search.563d33be.svg",Vo=a.p+"img/logout.e6482983.svg",Xo={class:"mobileNav"},jo=["src"],Oo={class:"label"},Do=["src"],Bo={class:"label"},Jo=["src"],zo={class:"label"},qo=["src"],Mo={class:"label"},Qo={class:"label"},Go={class:"desktopNav"},Wo={class:"elements"},Ho={class:"menu"},Zo=["src"],Yo={class:"label"},ea=["src"],oa={class:"label"},aa=["src"],ta={class:"label"},la=["src"],na={class:"label"},ra=["src"],sa={class:"label"},ia=["src"],ca={class:"label"},ua={__name:"navComponent",setup(e){const o=(0,u.rd)(),n=(0,p.Kh)({firstName:"",lastName:"",email:"",newEmail:"",oldEmail:"",password:"",newPassword:"",oldPassword:"",newPasswordRepeat:"",country:"",city:"",postalCode:"",profilePicture:"",bio:"",role:"",activeUnactive:!0});(0,l.Gt)("user",n);const r=localStorage.getItem("jwtToken"),s=e=>{try{const o=e.split(".")[1],a=o.replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(a).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(t)}catch(o){return console.error("Error parsing JWT:",o),null}},i=s(r),c=i?.userId,m=i?.companyId||null;i&&c||o.push("/login");(0,p.KR)(null);const k="localhost"!==window.location.hostname,g=k?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",f=()=>{const e=localStorage.getItem("jwtToken");if(e){const o=e.split(".")[1],a=JSON.parse(atob(o)),t=a.userId,l=a.firstname,n=a.lastname,r=a.role,s=a.profilePicture||"";return{userId:t,firstName:l,lastName:n,role:r,profilePicture:s}}return console.error("No token found in localStorage"),null},h=async e=>{try{const o=await v.A.get(`${g}/users/${e}`),a=o.data?.data?.user||{};a?(n.firstName=a.firstname||"",n.lastName=a.lastname||"",n.role=a.role||"",n.profilePicture=a.profilePicture||""):console.error("No user found in the response.")}catch(o){console.error("Error fetching user data:",o)}},y=(0,p.Kh)({primaryColor:"#d4af37",secondaryColor:"#f0edea",backgroundColor:"#ffffff",textColor:"#ffffff",fontFamilyBodyText:"Work Sans",fontFamilyTitles:"Libre Barcode 128",logo_url:"../../src/assets/images/rebilt-favicon.svg"});(0,l.sV)((()=>{const e=f();e&&h(e.userId)}));const L=()=>{localStorage.removeItem("jwtToken"),o.push("/login")},b=(e,a)=>{const t=o.currentRoute.value.path;switch(e){case"products":return"/admin"===t?"../src/assets/icons/tag_active.svg":"../src/assets/icons/tag.svg";case"orders":return"/admin/orders"===t?"../src/assets/icons/inbox_active.svg":"../src/assets/icons/inbox.svg";case"partners":return"/admin/partners"===t?"../src/assets/icons/partners_active.svg":"../src/assets/icons/partners.svg";case"styling":return"/admin/styling"===t?"../src/assets/icons/styling_active.svg":"../src/assets/icons/styling.svg";case"users":return"/admin/users"===t?"../src/assets/icons/users_active.svg":"../src/assets/icons/users.svg";case"settings":return"/admin/settings"===t?"../src/assets/icons/settings_active.svg":"../src/assets/icons/settings.svg";case"logout":return"../assets/icons/logout.svg";default:return a}},w=(0,l.EW)((()=>n.profilePicture||new URL(a(996),a.b).href)),C=(0,p.KR)("");function _(e){C.value=e}function E(){C.value=""}const I=async()=>{try{const e=await v.A.get(`${g}/users/${c}`,{headers:{Authorization:`Bearer ${r}`}}),o=e.data?.data?.user||{};n.firstName=o.firstname||"",n.lastName=o.lastname||"",n.email=o.email||"",n.oldEmail=o.email||"",n.country=o.country||"",n.city=o.city||"",n.postalCode=o.postalCode||"",n.profilePicture=o.profilePicture||"",n.bio=o.bio||"",n.role=o.role||"",n.activeUnactive=o.activeUnactive??!0}catch(e){console.error("Error fetching user profile:",e)}};return(0,l.Gt)("user",n),(0,l.Gt)("baseURL",g),(0,l.Gt)("partnerId",m),(0,l.Gt)("userId",c),(0,l.Gt)("token",r),(0,l.sV)((async()=>{await I()})),(e,o)=>{const a=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("nav",Xo,["partner_owner"===n.role||"partner_admin"===n.role?((0,l.uX)(),(0,l.Wv)(a,{key:0,to:"/admin","exact-active-class":"active"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"menu-item",onMouseover:o[0]||(o[0]=e=>_("Products")),onMouseleave:E},[(0,l.Lk)("img",{src:b("products","../assets/icons/tag.svg"),alt:"icon"},null,8,jo),o[11]||(o[11]=(0,l.Lk)("p",null,"Products",-1)),(0,l.bo)((0,l.Lk)("span",Oo,"Products",512),[[t.aG,"Products"===C.value]])],32)])),_:1})):(0,l.Q3)("",!0),"partner_owner"===n.role||"partner_admin"===n.role?((0,l.uX)(),(0,l.Wv)(a,{key:1,to:"/admin/orders","exact-active-class":"active"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"menu-item",onMouseover:o[1]||(o[1]=e=>_("Orders")),onMouseleave:E},[(0,l.Lk)("img",{src:b("orders","../assets/icons/inbox.svg"),alt:"icon"},null,8,Do),o[12]||(o[12]=(0,l.Lk)("p",null,"Orders",-1)),(0,l.bo)((0,l.Lk)("span",Bo,"Orders",512),[[t.aG,"Orders"===C.value]])],32)])),_:1})):(0,l.Q3)("",!0),"platform_admin"===n.role?((0,l.uX)(),(0,l.Wv)(a,{key:2,to:"/admin/partners","exact-active-class":"active"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"menu-item",onMouseover:o[2]||(o[2]=e=>_("Partners")),onMouseleave:E},[(0,l.Lk)("img",{src:b("partners","../assets/icons/partners.svg"),alt:"icon"},null,8,Jo),o[13]||(o[13]=(0,l.Lk)("p",null,"Partners",-1)),(0,l.bo)((0,l.Lk)("span",zo,"Partners",512),[[t.aG,"Partners"===C.value]])],32)])),_:1})):(0,l.Q3)("",!0),"partner_owner"===n.role||"partner_admin"===n.role?((0,l.uX)(),(0,l.Wv)(a,{key:3,to:"/admin/users","exact-active-class":"active"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"menu-item",onMouseover:o[3]||(o[3]=e=>_("Users")),onMouseleave:E},[(0,l.Lk)("img",{src:b("users","../assets/icons/users.svg"),alt:"icon"},null,8,qo),o[14]||(o[14]=(0,l.Lk)("p",null,"Users",-1)),(0,l.bo)((0,l.Lk)("span",Mo,"Users",512),[[t.aG,"Users"===C.value]])],32)])),_:1})):(0,l.Q3)("",!0),(0,l.bF)(a,{to:"/admin/settings","exact-active-class":"active"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"menu-item profilePicture",onMouseover:o[4]||(o[4]=e=>_("Settings")),onMouseleave:E,style:(0,d.Tr)({backgroundImage:"url("+w.value+")"})},[(0,l.bo)((0,l.Lk)("span",Qo,"Settings",512),[[t.aG,"Settings"===C.value]])],36)])),_:1})]),(0,l.Lk)("nav",Go,[(0,l.Lk)("div",Wo,[(0,l.Lk)("div",{class:"logo",style:(0,d.Tr)({backgroundImage:"url("+y.logo_url+")"})},null,4),(0,l.Lk)("div",Ho,["partner_owner"===n.role||"partner_admin"===n.role?((0,l.uX)(),(0,l.Wv)(a,{key:0,to:"/admin","exact-active-class":"active"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"menu-item",onMouseover:o[5]||(o[5]=e=>_("Products")),onMouseleave:E},[(0,l.Lk)("img",{src:b("products","../assets/icons/package.svg"),alt:"icon"},null,8,Zo),(0,l.bo)((0,l.Lk)("span",Yo,"Products",512),[[t.aG,"Products"===C.value]])],32)])),_:1})):(0,l.Q3)("",!0),"partner_owner"===n.role||"partner_admin"===n.role?((0,l.uX)(),(0,l.Wv)(a,{key:1,to:"/admin/orders","exact-active-class":"active"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"menu-item",onMouseover:o[6]||(o[6]=e=>_("Orders")),onMouseleave:E},[(0,l.Lk)("img",{src:b("orders","../assets/icons/order.svg"),alt:"icon"},null,8,ea),(0,l.bo)((0,l.Lk)("span",oa,"Orders",512),[[t.aG,"Orders"===C.value]])],32)])),_:1})):(0,l.Q3)("",!0),"partner_owner"===n.role?((0,l.uX)(),(0,l.Wv)(a,{key:2,to:"/admin/styling","exact-active-class":"active"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"menu-item",onMouseover:o[7]||(o[7]=e=>_("Styling")),onMouseleave:E},[(0,l.Lk)("img",{src:b("styling","../assets/icons/styling.svg"),alt:"icon"},null,8,aa),(0,l.bo)((0,l.Lk)("span",ta,"Styling",512),[[t.aG,"Styling"===C.value]])],32)])),_:1})):(0,l.Q3)("",!0),"platform_admin"===n.role?((0,l.uX)(),(0,l.Wv)(a,{key:3,to:"/admin/partners","exact-active-class":"active"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"menu-item",onMouseover:o[8]||(o[8]=e=>_("Partners")),onMouseleave:E},[(0,l.Lk)("img",{src:b("partners","../assets/icons/users.svg"),alt:"icon"},null,8,la),(0,l.bo)((0,l.Lk)("span",na,"Partners",512),[[t.aG,"Partners"===C.value]])],32)])),_:1})):(0,l.Q3)("",!0),"partner_owner"===n.role||"partner_admin"===n.role?((0,l.uX)(),(0,l.Wv)(a,{key:4,to:"/admin/users","exact-active-class":"active"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"menu-item",onMouseover:o[9]||(o[9]=e=>_("Users")),onMouseleave:E},[(0,l.Lk)("img",{src:b("users","../assets/icons/users.svg"),alt:"icon"},null,8,ra),(0,l.bo)((0,l.Lk)("span",sa,"Users",512),[[t.aG,"Users"===C.value]])],32)])),_:1})):(0,l.Q3)("",!0),"partner_owner"===n.role||"partner_admin"===n.role?((0,l.uX)(),(0,l.Wv)(a,{key:5,to:"/admin/myconfigurations","exact-active-class":"active"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"menu-item",onMouseover:o[10]||(o[10]=e=>_("Configurations")),onMouseleave:E},[(0,l.Lk)("img",{src:b("settings","../assets/icons/settings.svg"),alt:"icon"},null,8,ia),(0,l.bo)((0,l.Lk)("span",ca,"Configurations",512),[[t.aG,"Configurations"===C.value]])],32)])),_:1})):(0,l.Q3)("",!0)])]),(0,l.Lk)("a",{onClick:(0,t.D$)(L,["prevent"])},o[15]||(o[15]=[(0,l.Lk)("img",{src:Vo,alt:"icon"},null,-1)]))])],64)}}},da=(0,r.A)(ua,[["__scopeId","data-v-837f2d1a"]]),pa=da,va={__name:"ProfilePicture",setup(e){const o=(0,u.rd)(),a=(0,p.Kh)({firstName:"",lastName:"",email:"",newEmail:"",oldEmail:"",password:"",newPassword:"",oldPassword:"",newPasswordRepeat:"",country:"",city:"",postalCode:"",profileImage:"",bio:"",role:"",activeUnactive:!0}),t=localStorage.getItem("jwtToken");t||o.push("/login");const n=e=>{const o=e.split(".")[1],a=o.replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(a).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(t)},r=n(t),s=r?.userId;s||o.push("/login");const i="localhost"!==window.location.hostname,c=i?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",m=async()=>{try{const e=await v.A.get(`${c}/users/${s}`,{headers:{Authorization:`Bearer ${t}`}}),o=e.data?.data?.user||{};a.firstName=o.firstname||"",a.lastName=o.lastname||"",a.email=o.email||"",a.oldEmail=o.email||"",a.country=o.country||"",a.city=o.city||"",a.postalCode=o.postalCode||"",a.profileImage=o.profileImage||"",a.bio=o.bio||"",a.role=o.role||"",a.activeUnactive=o.activeUnactive??!0,console.log(o)}catch(e){console.error("Error fetching user profile:",e)}};(0,l.sV)((()=>{m()}));const k=(0,p.KR)("");return(0,l.wB)((()=>a.profileImage),(e=>{k.value=e||"https://via.placeholder.com/150"})),(e,o)=>{const a=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.Wv)(a,{to:"/admin/settings","exact-active-class":"active"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"menu-item profileImage",style:(0,d.Tr)({backgroundImage:"url("+k.value+")"})},null,4)])),_:1})}}},ma=(0,r.A)(va,[["__scopeId","data-v-3e757442"]]),ka=ma,ga={key:0,class:"overlay"},fa={class:"content"},ha={key:0,class:"popup"},ya={class:"menu"},La={class:"btns"},ba={class:"search"},wa={class:"search"},Ca={class:"products mobile"},_a={class:"items"},Ea={class:"elements"},Ia={class:"text"},Pa={class:"name"},Ta={class:"products desktop"},Aa={class:"top"},$a=["checked"],xa={key:0,class:"list"},Sa=["onChange","checked"],Na={key:1,class:"no-products"},Ka={__name:"HomePage",setup(e){const o=(0,u.rd)(),a=(0,p.Kh)({firstName:"",lastName:"",email:"",newEmail:"",oldEmail:"",password:"",newPassword:"",oldPassword:"",newPasswordRepeat:"",country:"",city:"",postalCode:"",profilePicture:"",bio:"",role:"",activeUnactive:!0}),n=localStorage.getItem("jwtToken");n||o.push("/login");const r=e=>{try{const o=e.split(".")[1],a=o.replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(a).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(t)}catch(o){return console.error("Error parsing JWT:",o),null}},s=r(n),i=s?.userId,c=s?.companyId;i||o.push("/login");const m="localhost"!==window.location.hostname,k=m?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1";(0,p.KR)(null);(0,l.Gt)("user",a);const f=async()=>{try{const e=localStorage.getItem("jwtToken"),o=await fetch(`${k}/products`,{headers:{Authorization:`Bearer ${e}`}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const a=await o.json();P(e);w.value=a.data.products.filter((e=>e.partnerId===c)),w.value.forEach((e=>{e.configurations&&Array.isArray(e.configurations)?e.variantsCount=e.configurations.reduce(((e,o)=>e+(o.selectedOptions?o.selectedOptions.length:0)),0):e.variantsCount=0}))}catch(e){console.error("Error fetching data:",e)}},h=(0,p.KR)([]),y=((0,p.KR)([]),async()=>{try{const e=await v.A.get(`${k}/configurations`,{headers:{Authorization:`Bearer ${n}`}}),o=e.data?.data||[];return o}catch(e){return console.error("Error fetching configurations:",e),[]}}),L=async()=>{if(c)try{const e=await v.A.get(`${k}/partnerConfigurations`,{headers:{Authorization:`Bearer ${n}`},params:{partnerId:c}}),o=e.data?.data||[];h.value=o.filter((e=>String(e.partnerId)===String(c)));const a=await y();h.value.forEach((e=>{const o=a.find((o=>o._id===e.configurationId));o&&(e.fieldName=o.fieldName)}))}catch(e){console.error("Error fetching partner configurations:",e)}else console.warn("No partnerId provided.")},b=(0,p.KR)("All"),w=(0,p.KR)([]),C=(0,p.KR)(""),_=(0,p.KR)([]),E=(0,l.EW)((()=>_.value.length>0)),I=(0,p.KR)(!1),P=e=>{if(!e)return null;const o=JSON.parse(atob(e.split(".")[1]));return o.companyId},T=e=>{const o=_.value.indexOf(e);-1===o?_.value.push(e):_.value.splice(o,1)},A=e=>{_.value=e.target.checked?w.value.map((e=>e._id)):[]},$=()=>{0!==_.value.length&&N()},x=async()=>{await S(),K()},S=async()=>{try{for(const e of _.value){const o=await fetch(`${k}/products/${e}`,{method:"DELETE"});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`)}await f(),_.value=[]}catch(e){console.error("Error deleting products:",e)}},N=()=>{I.value=!0},K=()=>{I.value=!1},U=(0,p.KR)({});async function F(e){if(!e||!e.configurations)return console.warn("Product or configurations missing",e),0;const o=e.configurations;let a=0;try{await Promise.all(o.map((async e=>{if(e.configurationId)try{const o=await v.A.get(`${k}/configurations/${e.configurationId}`,{headers:{Authorization:`Bearer ${n}`}}),t=o.data.data?.options?.length||0;a+=t,U.value={...U.value,[e._id]:t}}catch(o){console.error(`Error fetching configuration options with ID ${e.configurationId}:`,o)}})))}catch(t){console.error("Error fetching options:",t)}return a}return(0,l.sV)((async()=>{await f(),await L(),w.value.forEach((e=>{F(e)}))})),(e,o)=>{const a=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),I.value?((0,l.uX)(),(0,l.CE)("div",ga)):(0,l.Q3)("",!0),(0,l.Lk)("div",fa,[o[18]||(o[18]=(0,l.Lk)("h2",null,"Products",-1)),I.value?((0,l.uX)(),(0,l.CE)("div",ha,[o[5]||(o[5]=(0,l.Lk)("img",{src:Uo,alt:"icon"},null,-1)),(0,l.Lk)("div",{class:"text"},[o[3]||(o[3]=(0,l.Lk)("h2",null,"Are you sure?",-1)),o[4]||(o[4]=(0,l.Lk)("p",null,"Do you really want to delete this item(s)?",-1)),(0,l.Lk)("div",{class:"btns"},[(0,l.Lk)("button",{onClick:K},"Cancel"),(0,l.Lk)("button",{onClick:x,class:"btn active"},"Delete")])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",ya,[(0,l.Lk)("div",La,[(0,l.bF)(a,{exact:"",to:"/admin/add-new-product",class:"btn active"},{default:(0,l.k6)((()=>o[6]||(o[6]=[(0,l.Lk)("p",null,"Add new",-1),(0,l.Lk)("img",{src:Fo,alt:"icon"},null,-1)]))),_:1}),(0,l.Lk)("div",{onClick:$,class:"btn display",style:(0,d.Tr)({display:E.value?"flex":"none"})},o[7]||(o[7]=[(0,l.Lk)("p",null,"Delete item(s)",-1)]),4)]),(0,l.Lk)("div",ba,[o[8]||(o[8]=(0,l.Lk)("img",{src:Ro,alt:"icon"},null,-1)),(0,l.bo)((0,l.Lk)("input",{placeholder:"Search","onUpdate:modelValue":o[0]||(o[0]=e=>C.value=e)},null,512),[[t.Jo,C.value]])]),(0,l.bo)((0,l.Lk)("select",{class:"filter","onUpdate:modelValue":o[1]||(o[1]=e=>b.value=e)},o[9]||(o[9]=[(0,l.Lk)("option",{value:"All"},"All",-1),(0,l.Lk)("option",{value:"optical"},"Optical",-1),(0,l.Lk)("option",{value:"sun"},"Sun",-1)]),512),[[t.u1,b.value]]),(0,l.bF)(ka)]),(0,l.Lk)("div",wa,[o[10]||(o[10]=(0,l.Lk)("img",{src:Ro,alt:"icon"},null,-1)),(0,l.bo)((0,l.Lk)("input",{placeholder:"Search","onUpdate:modelValue":o[2]||(o[2]=e=>C.value=e)},null,512),[[t.Jo,C.value]])]),(0,l.Lk)("div",Ca,[(0,l.Lk)("div",_a,[w.value.length?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(w.value,(e=>((0,l.uX)(),(0,l.Wv)(a,{key:e._id,to:{name:"EditProduct",params:{id:e._id}}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"image",style:(0,d.Tr)({backgroundImage:"url("+e.configurations[0].selectedOptions[0].images[0]+")"})},null,4),(0,l.Lk)("div",Ea,[(0,l.Lk)("div",Ia,[(0,l.Lk)("p",Pa,(0,d.v_)(e.productName),1),(0,l.Lk)("p",null,(0,d.v_)(e.configurations[0].selectedOptions.length)+" variant"+(0,d.v_)(e.configurations[0].selectedOptions.length>1?"s":""),1)]),(0,l.Lk)("div",{class:(0,d.C4)(["btn",{active:"active"===e.activeInactive}])},[(0,l.Lk)("p",null,(0,d.v_)(e.activeInactive),1)],2)])])),_:2},1032,["to"])))),128)):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",Ta,[(0,l.Lk)("div",Aa,[(0,l.Lk)("input",{type:"checkbox",onChange:A,checked:_.value.length===_.value.length&&_.value.length>0},null,40,$a),o[11]||(o[11]=(0,l.Lk)("p",null,"Product Code",-1)),o[12]||(o[12]=(0,l.Lk)("p",null,"Product name",-1)),o[13]||(o[13]=(0,l.Lk)("p",null,"Type of product",-1)),o[14]||(o[14]=(0,l.Lk)("p",null,"Brand",-1)),o[15]||(o[15]=(0,l.Lk)("p",null,"Description",-1)),o[16]||(o[16]=(0,l.Lk)("p",null,"Status",-1))]),w.value.length?((0,l.uX)(),(0,l.CE)("ul",xa,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(w.value,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e._id},[(0,l.Lk)("input",{type:"checkbox",onChange:o=>T(e._id),checked:_.value.includes(e._id)},null,40,Sa),(0,l.bF)(a,{to:{name:"EditProduct",params:{id:e._id}}},{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,(0,d.v_)(e.productCode),1),(0,l.Lk)("p",null,(0,d.v_)(e.productName),1),(0,l.Lk)("p",null,(0,d.v_)(e.productType),1),(0,l.Lk)("p",null,(0,d.v_)(e.brand),1),(0,l.Lk)("p",null,(0,d.v_)(e.description),1),(0,l.Lk)("div",{class:(0,d.C4)(["btn",{active:"active"===e.activeInactive}])},[(0,l.Lk)("p",null,(0,d.v_)(e.activeInactive),1)],2)])),_:2},1032,["to"])])))),128))])):((0,l.uX)(),(0,l.CE)("div",Na,o[17]||(o[17]=[(0,l.Lk)("p",null,"Geen producten gevonden voor de huidige zoekopdracht of filter.",-1)])))])])],64)}}},Ua=(0,r.A)(Ka,[["__scopeId","data-v-5110ea75"]]),Fa=Ua,Ra="localhost"!==window.location.hostname,Va=Ra?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",Xa=async(e,o)=>{try{if(!e)return console.error("Partner ID (companyId) is not available in the token."),void xu.push("/login");const a=await v.A.get(`${Va}/partners/${e}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}}),t=a.data?.data?.partner;return t||(console.error("Partner data not found in response"),null)}catch(a){return console.error("Error fetching partner data:",a.response||a),null}},ja="localhost"!==window.location.hostname,Oa=ja?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",Da=async(e,o)=>{if(!e)return console.warn("No partnerId provided."),[];try{const a=await v.A.get(`${Oa}/partnerConfigurations`,{headers:{Authorization:`Bearer ${o}`},params:{partnerId:e}}),t=await v.A.get(`${Oa}/configurations`,{headers:{Authorization:`Bearer ${o}`}}),l=a.data?.data||[],n=t.data?.data||[],r=await Promise.all(l.map((async e=>{const a=e.configurationId._id;try{const t=await v.A.get(`${Oa}/configurations/${a}`,{headers:{Authorization:`Bearer ${o}`}}),l=t.data?.data||{};return{...e,configurationDetails:l}}catch(t){return console.error(`Error fetching configuration details for ${a}:`,t),{...e,configurationDetails:{}}}})));return{partnerConfigs:r,configurations:n}}catch(a){return console.error("Error fetching partner configurations:",a),[]}},Ba={class:"text"},Ja=["onClick"],za={class:"dropdown-add-option"};function qa(e,o,a,n,r,s){return(0,l.uX)(),(0,l.CE)("div",{class:"dropdown-selected",onClick:o[3]||(o[3]=(...e)=>s.toggleDropdown&&s.toggleDropdown(...e))},[(0,l.Lk)("p",Ba,(0,d.v_)(r.selectedOption||a.buttonText),1),s.isOpen?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"dropdown-options",onClick:o[2]||(o[2]=(0,t.D$)((()=>{}),["stop"]))},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.types,((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o,class:(0,d.C4)(["dropdown-option",{selected:e===r.selectedOption}]),onClick:o=>s.selectOption(e)},[(0,l.Lk)("p",null,(0,d.v_)(e),1)],10,Ja)))),128)),(0,l.Lk)("div",za,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>r.newOption=e),type:"text",placeholder:"Add new option"},null,512),[[t.Jo,r.newOption]]),(0,l.Lk)("button",{onClick:o[1]||(o[1]=(...e)=>s.handleAddOption&&s.handleAddOption(...e))},"Add")])])):(0,l.Q3)("",!0)])}const Ma={name:"DropdownToggle",props:{fieldName:{type:String,required:!0},dropdownStates:{type:Object,required:!0},buttonText:{type:String,required:!0},types:{type:Array,required:!0}},data(){return{newOption:"",selectedOption:null}},computed:{isOpen(){return this.dropdownStates[this.fieldName]}},methods:{toggleDropdown(){for(const e in this.dropdownStates)e!==this.fieldName&&(this.dropdownStates[e]=!1);this.dropdownStates[this.fieldName]=!this.dropdownStates[this.fieldName]},selectOption(e){this.selectedOption=e,this.$emit("update:modelValue",e),this.toggleDropdown()},handleAddOption(e){e.stopPropagation(),this.newOption.trim()&&(this.$emit("addOption",this.newOption.trim()),this.newOption="")}}},Qa=(0,r.A)(Ma,[["render",qa],["__scopeId","data-v-a8090492"]]),Ga=Qa,Wa={class:"text"};function Ha(e,o,a,n,r,s){return(0,l.uX)(),(0,l.CE)("div",{class:"dropdown-selected",onClick:o[1]||(o[1]=(...e)=>s.toggleDropdown&&s.toggleDropdown(...e))},[(0,l.Lk)("p",Wa,(0,d.v_)(a.buttonText),1),s.isOpen?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"dropdown-options",onClick:o[0]||(o[0]=(0,t.D$)((()=>{}),["stop"]))},[(0,l.RG)(e.$slots,"default",{},void 0,!0)])):(0,l.Q3)("",!0)])}const Za={name:"DropdownToggle",props:{fieldName:{type:String,required:!0},dropdownStates:{type:Object,required:!0},buttonText:{type:String,default:"Choose your colors"}},data(){return{isAdding:!1}},computed:{isOpen(){return this.dropdownStates[this.fieldName]}},methods:{toggleDropdown(){for(const e in this.dropdownStates)e!==this.fieldName&&(this.dropdownStates[e]=!1);this.dropdownStates[this.fieldName]=!this.dropdownStates[this.fieldName]},handleAddAction(e){e.stopPropagation(),this.isAdding=!0,this.isAdding=!1}}},Ya=(0,r.A)(Za,[["render",Ha],["__scopeId","data-v-12b85d8e"]]),et=Ya,ot=["value","checked","onClick"],at={key:0,class:"dropdown-add-option"};function tt(e,o,a,n,r,s){return(0,l.uX)(),(0,l.CE)("div",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.colorOptions,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:e.optionId,class:"dropdown-option"},[(0,l.Lk)("input",{type:"checkbox",value:e.optionId,checked:s.isSelected(e),onClick:o=>s.toggleColor(e)},null,8,ot),(0,l.Lk)("span",{class:"color-bullet",style:(0,d.Tr)({backgroundColor:e.name||"transparent"})},null,4),o[2]||(o[2]=(0,l.Lk)("p",{class:"stroke"},"-",-1)),(0,l.Lk)("p",null,(0,d.v_)(e.name||"Unnamed Color"),1)])))),128)),s.isOpen?((0,l.uX)(),(0,l.CE)("div",at,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>r.newColor=e),type:"text",placeholder:"Add new color"},null,512),[[t.Jo,r.newColor]]),(0,l.Lk)("button",{onClick:o[1]||(o[1]=(...e)=>s.addColor&&s.addColor(...e))},"Add")])):(0,l.Q3)("",!0)])}const lt={name:"ColorSelectionToggle",props:{selectedColors:{type:Array,required:!0},dropdownStates:{type:Object,required:!0},fieldName:{type:String,required:!0},colorOptions:{type:Array,required:!0}},data(){return{newColor:"",isAddingColor:!1}},computed:{isOpen(){return this.dropdownStates[this.fieldName]}},methods:{isSelected(e){return this.selectedColors.some((o=>o.optionId===e.optionId))},toggleColor(e){const o=[...this.selectedColors],a=o.findIndex((o=>o.optionId===e.optionId));-1===a?o.push({optionId:e.optionId,name:e.name||"Unnamed Color",images:Array.isArray(e.images)?e.images:[]}):o.splice(a,1),this.$emit("update:selectedColors",o),e.name&&(this.dropdownStates[this.fieldName]=!1)},addColor(){if(!this.isAddingColor){if(this.isAddingColor=!0,this.newColor.trim()&&!this.colorOptions.some((e=>e.name===this.newColor.trim()))){const e={optionId:Date.now(),name:this.newColor.trim(),images:[]};this.colorOptions.push(e),this.$emit("update:colorOptions",this.colorOptions),this.newColor=""}this.isAddingColor=!1}}}},nt=(0,r.A)(lt,[["render",tt],["__scopeId","data-v-4a0f85b1"]]),rt=nt,st=a.p+"img/image-add.9b70fda6.svg",it={class:"color-upload-section"},ct=["id"],ut={key:0,class:"text"},dt=["src"],pt=["id"];function vt(e,o,a,t,n,r){return(0,l.uX)(),(0,l.CE)("div",it,[(0,l.Lk)("input",{type:"file",id:"images-"+a.index,style:{display:"none"},multiple:"",onChange:o[0]||(o[0]=e=>r.handleColorImageUpload(e,a.index))},null,40,ct),(0,l.Lk)("div",{class:"uploadImage",onClick:o[2]||(o[2]=()=>n.isModelLoaded?null:r.triggerFileInput(a.index)),style:(0,d.Tr)({justifyContent:a.colorUploads[a.index]?.images?.length?"flex-start":"center"})},[a.colorUploads[a.index]?.images?.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",ut,o[3]||(o[3]=[(0,l.Lk)("img",{src:st,alt:"image-add"},null,-1),(0,l.Lk)("p",null,"Bestanden toevoegen",-1)]))),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.previewImages(a.colorUploads[a.index]?.images),((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"image-preview"},[r.isImageUrl(e)?((0,l.uX)(),(0,l.CE)("img",{key:0,src:e,alt:"Uploaded file preview",width:"100"},null,8,dt)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[o[4]||(o[4]=(0,l.Lk)("p",null,"3D bestand geüpload:",-1)),(0,l.Lk)("div",{id:"threejs-"+a.index,class:"threejs-container"},null,8,pt),n.isModelLoaded?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:o[1]||(o[1]=e=>r.triggerFileInput(a.index)),class:"btn active"}," Upload nieuw 3D model ")):(0,l.Q3)("",!0)],64))])))),128))],4)])}const mt={name:"ImageUpload",props:{color:Object,index:Number,colorUploads:Array,partnerName:String,partnerPackage:String},data(){return{isModelLoaded:!1}},methods:{triggerFileInput(e){const o=document.getElementById(`images-${e}`);o?o.click():console.warn("File input not found")},async handleThumbnailUpload(e,o){const a=e.target.files;if(!a||0===a.length)return void console.warn("❌ Geen thumbnail bestand geselecteerd.");const t=Array.from(a).filter((e=>this.isImageFile(e)));if(!t.length)return void console.warn("❌ Geen geldige thumbnail geselecteerd.");const l=[];for(let r of a){if(!r){console.error("❌ Thumbnail bestand is null.");continue}if(!r.name){console.error("❌ Thumbnail bestand heeft geen naam.");continue}r.name.split(".").pop().toLowerCase();try{const e=await ae(r,this.color.name,this.partnerName);this.colorUploads[o]=this.colorUploads[o]||{images:[]},this.colorUploads[o].images.push(e),l.push(e),this.$emit("file-uploaded",l)}catch(n){console.error("Fout bij uploaden van thumbnail naar Cloudinary:",n)}}},async handleColorImageUpload(e,o){const a=e.target.files;if(console.log("📂 Bestanden geselecteerd:",a),console.log("🔢 Index van upload:",o),console.log("👤 Partner Package:",this.partnerPackage),console.log("🎨 Kleur:",this.color?.name),console.log("👥 Partner naam:",this.partnerName),!a||0===a.length)return void console.warn("❌ Geen bestanden geselecteerd.");const t=Array.from(a).filter((e=>!!e&&(!("pro"!==this.partnerPackage||!this.is3DFile(e))||("pro"!==this.partnerPackage&&this.is3DFile(e)?(alert("❌ Standaard-gebruikers kunnen alleen 2D-afbeeldingen uploaden."),!1):this.isImageFile(e)))));if(!t.length)return void console.warn("❌ Geen geldige bestanden geselecteerd.");const l=[];for(let r of t)if(r)if(r.name)try{console.log("🚀 Uploading file:",r.name);const e=await ae(r,this.color?.name||"default_color",this.partnerName||"default_partner");if(console.log("✅ Upload geslaagd! URL:",e),this.colorUploads[o]=this.colorUploads[o]||{images:[]},this.colorUploads[o].images.push(e),l.push(e),this.is3DFile(r)){const a=r.name.split(".").pop().toLowerCase();this.render3DModel(e,`threejs-${o}`,a)}this.$emit("file-uploaded",l)}catch(n){console.error("❌ Fout bij uploaden naar Cloudinary:",n.message,n)}else console.error("❌ Bestand heeft geen naam.");else console.error("❌ Bestand is null.")},render3DModel(e,o,a){this.isModelLoaded=!0},previewImages(e){return e||[]},isImageFile(e){return e&&e.type&&e.type.startsWith("image/")},isImageUrl(e){return/\.(jpeg|jpg|png|gif|webp)$/i.test(e)},is3DFile(e){return e&&e.name&&/\.(glb|gltf|fbx|obj)$/i.test(e.name)}}},kt=(0,r.A)(mt,[["render",vt],["__scopeId","data-v-2effda9c"]]),gt=kt,ft={class:"content"},ht={key:0,class:"row"},yt={class:"column"},Lt={class:"row"},bt={class:"column"},wt={class:"column"},Ct={class:"row"},_t={class:"column"},Et={class:"dropdown"},It={class:"column"},Pt={class:"row"},Tt={class:"column"},At={class:"column"},$t={class:"row"},xt={class:"column"},St=["for"],Nt=["onUpdate:modelValue","id"],Kt={key:2,class:"color-dropdown"},Ut={class:"dropdown"},Ft={class:"configurations"},Rt={class:"column"},Vt=["for"],Xt=["onUpdate:modelValue","id"],jt={key:3,class:"color-dropdown"},Ot={class:"dropdown"},Dt={key:0,class:"uploadzones"},Bt={key:1,class:"uploadzones"},Jt={class:"uploadzone"},zt={class:"row"},qt={class:"column"},Mt={class:"uploadzone"},Qt={class:"row"},Gt={class:"column"},Wt={__name:"AddNewProductPage",setup(e){v.A.defaults.baseURL=(void 0).VITE_API_BASE_URL;const o=(0,u.rd)(),a=(0,p.KR)([]),n=(0,p.KR)(""),r=(0,p.KR)(""),s=(0,p.KR)(""),i=(0,p.KR)(""),c=(0,p.KR)(""),m=(0,p.KR)(""),k=(0,p.KR)([]),f=(0,p.KR)({}),h=(0,p.KR)(null),y=(0,p.KR)(null),L=((0,p.KR)(null),(0,p.KR)(""),(0,p.KR)([]),localStorage.getItem("jwtToken")),b=L?JSON.parse(atob(L.split(".")[1])):{},w=b.companyId,C=(0,p.KR)(""),_=(0,p.KR)(""),E=((0,p.KR)([]),(0,p.KR)("")),I=(0,p.KR)([]),P=(0,p.KR)({}),T=e=>{const o=P.value[e]?.length||0;if(0===o)return"Select colors";const a=P.value[e].slice(0,2).map((e=>e.name)).join(", ");return P.value[e].length>2?`${a} + ${o-2} more`:a},A=(0,p.KR)([]),$=async e=>{try{const o=await ve(e);if(!o||!Array.isArray(o)||0===o.length)return void console.error("❌ Geen geldige kleuren ontvangen");A.value=o.map((e=>({optionId:e.optionId||"",name:e.color||"Unnamed Color",images:e.images||[]})))}catch(o){console.error("❌ Fout in fetchcolors:",o)}},x={},S=e=>{e&&0!==e.length?(console.log("✅ Bestanden succesvol geüpload:",e),h.value=e[0]):console.error("❌ Geen geldige upload-URL ontvangen.")},N=e=>{const o=e.target.files;if(console.log(o),!o||0===o.length)return void console.error("❌ Geen geldige afbeeldings-URL.");const a=o[0];a&&a.name?y.value=a:console.error("❌ Bestand heeft geen naam.")},K=(0,p.KR)(null),U=async()=>{try{if(!r.value||!c.value||!n.value)return void console.error("❌ Missing required fields.");if(Object.values(P.value).every((e=>0===e.length)))return void console.error("❌ No colors selected.");a.value.forEach((e=>{if("color"===e.configurationDetails.fieldType){const o=e.configurationId._id,a=P.value[o]||[];console.log("Selected colors for configId:",o,a),e.options.forEach((e=>{const t=x[o]?.find((o=>o.optionId===e.optionId))?.images||[];console.log("Color images for option",e.optionId,t),a.some((o=>o.optionId===e.optionId))&&(e.images=t)}))}}));const t=await we(w);_.value=t||"";let l=K.value?.files[0];if("pro"==_.value&&"3D"===C.value&&await ge({productCode:n.value,productName:r.value,productType:i.value||"sunglasses",productPrice:c.value,description:m.value,brand:s.value,activeInactive:"active",partnerId:w,configurations:a.value,file:l,thumbnail:y.value}),"pro"==_.value&&"2D"===C.value){if(console.log(_.value),console.log(h.value),!a.value||0===a.value.length)return void console.error("❌ Geen geldige configuraties gevonden!");console.log("Partner configurations:",a.value);const o=a.value[0]?.configurationId?._id||null;if(console.log("selectedConfigurationId in addNewProduct:",o),!o)return void console.error("❌ selectedConfigurationId ontbreekt in addNewProduct!");if(!h.value)return void console.error("❌ Geen afbeeldingen om te uploaden!");const t=Array.isArray(h.value)?h.value:[h.value];try{const e=JSON.parse(JSON.stringify(a.value));console.log("Partner configurations passed to add2DProduct:",e),await ke({file:h.value,configurationId:o,configurations:e,productCode:n.value,productName:r.value,productType:C.value||"sunglasses",productPrice:c.value,description:m.value,brand:s.value,activeInactive:"active",partnerId:w,images:t})}catch(e){console.error("Fout bij het toevoegen van product:",e)}}o.push("/")}catch(e){console.error("❌ Error adding product:",e)}};return(0,l.sV)((async()=>{if(w)try{await be();const e=await Xa(w,L);E.value=e?.name||"";const o=await we(w);_.value=o||"";const{partnerConfigs:t}=await Da(w,L);a.value=t||[],await $(w),await(0,l.dY)();const n=A.value;n.length>0?a.value.forEach((e=>{if("color"===e?.configurationDetails?.fieldType){const o=e.configurationId._id,a=e.options.map((e=>n.find((o=>o.optionId===e.optionId._id))));x[o]=a,P.value[o]=[]}})):console.warn("⚠️ Geen kleuren gevonden.");const r=await pe(w);I.value=r}catch(e){console.error("❌ Error tijdens initialisatie:",e)}else console.error("❌ Partner ID is niet beschikbaar.")})),(e,o)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),(0,l.Lk)("div",ft,[o[24]||(o[24]=(0,l.Lk)("h1",null,"Add new product",-1)),(0,l.Lk)("form",{onSubmit:(0,t.D$)(U,["prevent"])},[o[21]||(o[21]=(0,l.Lk)("h3",null,"Product info:",-1)),"pro"==_.value?((0,l.uX)(),(0,l.CE)("div",ht,[(0,l.Lk)("div",yt,[o[9]||(o[9]=(0,l.Lk)("label",{for:"2DOr3DProduct"},"Select Product Type:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>C.value=e),id:"2DOr3DProduct"},o[8]||(o[8]=[(0,l.Lk)("option",{value:"2D"},"2D Product",-1),(0,l.Lk)("option",{value:"3D"},"3D Product",-1)]),512),[[t.u1,C.value]])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",Lt,[(0,l.Lk)("div",bt,[o[10]||(o[10]=(0,l.Lk)("label",{for:"productCode"},"Product Code:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>n.value=e),id:"productCode",type:"text",required:""},null,512),[[t.Jo,n.value]])]),(0,l.Lk)("div",wt,[o[11]||(o[11]=(0,l.Lk)("label",{for:"productName"},"Product Name:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>r.value=e),id:"productName",type:"text",required:""},null,512),[[t.Jo,r.value]])])]),(0,l.Lk)("div",Ct,[(0,l.Lk)("div",_t,[o[12]||(o[12]=(0,l.Lk)("label",{for:"productType"},"Type Of Product:",-1)),(0,l.Lk)("div",Et,[(0,l.bF)(Ga,{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=e=>i.value=e),fieldName:"sole_top",dropdownStates:f.value,buttonText:"Select type of product",types:I.value,onAddOption:o[4]||(o[4]=e=>(0,p.R1)(me)(I.value,e))},null,8,["modelValue","dropdownStates","types"])])]),(0,l.Lk)("div",It,[o[13]||(o[13]=(0,l.Lk)("label",{for:"brand"},"Brand:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>s.value=e),id:"brand",type:"text",required:""},null,512),[[t.Jo,s.value]])])]),(0,l.Lk)("div",Pt,[(0,l.Lk)("div",Tt,[o[14]||(o[14]=(0,l.Lk)("label",{for:"productPrice"},"Price:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[6]||(o[6]=e=>c.value=e),id:"productPrice",type:"number",required:""},null,512),[[t.Jo,c.value]])]),(0,l.Lk)("div",At,[o[15]||(o[15]=(0,l.Lk)("label",{for:"description"},"Description:",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":o[7]||(o[7]=e=>m.value=e),id:"description",required:""},null,512),[[t.Jo,m.value]])])]),o[22]||(o[22]=(0,l.Lk)("h3",null,"Configurations:",-1)),"standard"==_.value?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:1},(0,l.pI)(a.value,((o,a)=>((0,l.uX)(),(0,l.CE)(l.FK,{key:o._id},[(0,l.Lk)("div",$t,[(0,l.Lk)("div",xt,[(0,l.Lk)("label",{for:o.configurationDetails.fieldName},(0,d.v_)(o.configurationDetails.fieldName)+": ",9,St),"Text"===o.configurationDetails.fieldType?(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:0,"onUpdate:modelValue":e=>o.value=e,id:o.configurationDetails.fieldName,type:"text"},null,8,Nt)),[[t.Jo,o.value]]):"Dropdown"===o.configurationDetails.fieldType?((0,l.uX)(),(0,l.Wv)(et,{key:1,fieldName:o.configurationDetails.fieldName,dropdownStates:f.value,buttonText:"Toggle Dropdown"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.configurations,((o,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a},[(0,l.Lk)("span",{class:"color-bullet",style:(0,d.Tr)({backgroundColor:e.color.name||"transparent"})},null,4),(0,l.eW)(" "+(0,d.v_)(e.color.name||"Unnamed Color"),1)])))),128))])),_:2},1032,["fieldName","dropdownStates"])):"color"===o.configurationDetails.fieldType?((0,l.uX)(),(0,l.CE)("div",Kt,[(0,l.Lk)("div",Ut,[(0,l.bF)(et,{fieldName:o.configurationDetails.fieldName,dropdownStates:f.value,buttonText:T(o.configurationId._id)},{default:(0,l.k6)((()=>[(0,l.bF)(rt,{selectedColors:P.value[o.configurationId._id],"onUpdate:selectedColors":e=>P.value[o.configurationId._id]=e,colors:x[o.configurationId._id]||[],dropdownStates:f.value,fieldName:o.configurationDetails.fieldName,colorOptions:x[o.configurationId._id]||[]},null,8,["selectedColors","onUpdate:selectedColors","colors","dropdownStates","fieldName","colorOptions"])])),_:2},1032,["fieldName","dropdownStates","buttonText"])])])):(0,l.Q3)("",!0)])]),"color"===o.configurationDetails.fieldType?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(P.value[o.configurationId._id]||[],((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o,class:"column"},[(0,l.Lk)("p",null,(0,d.v_)(e.name)+" - Upload images",1),e.name?((0,l.uX)(),(0,l.Wv)(gt,{key:0,onFileUploaded:S,color:e,index:o,colorUploads:k.value,partnerPackage:_.value,partnerName:E.value},null,8,["color","index","colorUploads","partnerPackage","partnerName"])):(0,l.Q3)("",!0)])))),128)):(0,l.Q3)("",!0)],64)))),128)):(0,l.Q3)("",!0),"pro"==_.value?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.Lk)("div",Ft,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.value,((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:e._id,class:"row"},[(0,l.Lk)("div",Rt,[e.configurationDetails?((0,l.uX)(),(0,l.CE)("label",{key:0,for:e.configurationDetails.fieldName},(0,d.v_)(e.configurationDetails.fieldName)+": ",9,Vt)):(0,l.Q3)("",!0),"Text"===e.configurationDetails?.fieldType?(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:1,"onUpdate:modelValue":o=>e.value=o,id:e.configurationDetails.fieldName,type:"text"},null,8,Xt)),[[t.Jo,e.value]]):"Dropdown"===e.configurationDetails?.fieldType?((0,l.uX)(),(0,l.Wv)(et,{key:2,fieldName:e.configurationDetails.fieldName,dropdownStates:f.value,buttonText:"Toggle Dropdown"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.options,((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o},[(0,l.Lk)("span",{class:"color-bullet",style:(0,d.Tr)({backgroundColor:e.name||"transparent"})},null,4),(0,l.eW)(" "+(0,d.v_)(e.name||"Unnamed Color"),1)])))),128))])),_:2},1032,["fieldName","dropdownStates"])):"color"===e.configurationDetails?.fieldType?((0,l.uX)(),(0,l.CE)("div",jt,[(0,l.Lk)("div",Ot,[(0,l.bF)(et,{fieldName:e.configurationDetails.fieldName,dropdownStates:f.value,buttonText:T(e.configurationId._id)},{default:(0,l.k6)((()=>[(0,l.bF)(rt,{selectedColors:P.value[e.configurationId._id],"onUpdate:selectedColors":o=>P.value[e.configurationId._id]=o,colors:x[e.configurationId._id]||[],dropdownStates:f.value,fieldName:e.configurationDetails.fieldName,colorOptions:x[e.configurationId._id]||[]},null,8,["selectedColors","onUpdate:selectedColors","colors","dropdownStates","fieldName","colorOptions"])])),_:2},1032,["fieldName","dropdownStates","buttonText"])])])):(0,l.Q3)("",!0)])])))),128))]),"2D"===C.value?((0,l.uX)(),(0,l.CE)("div",Dt,[o[16]||(o[16]=(0,l.Lk)("h3",null,"Upload Images for 2D Product:",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.value,((e,o)=>((0,l.uX)(),(0,l.CE)(l.FK,{key:e._id},["color"===e.configurationDetails.fieldType?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(P.value[e.configurationId._id]||[],((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o,class:"column"},[(0,l.Lk)("p",null,(0,d.v_)(e.name)+" - Upload images",1),e.name?((0,l.uX)(),(0,l.Wv)(gt,{key:0,onFileUploaded:S,color:e,index:o,colorUploads:k.value,partnerPackage:_.value,partnerName:E.value},null,8,["color","index","colorUploads","partnerPackage","partnerName"])):(0,l.Q3)("",!0)])))),128)):(0,l.Q3)("",!0)],64)))),128))])):(0,l.Q3)("",!0),"3D"===C.value?((0,l.uX)(),(0,l.CE)("div",Bt,[(0,l.Lk)("div",Jt,[o[18]||(o[18]=(0,l.Lk)("h3",null,"Upload 3D Model File:",-1)),(0,l.Lk)("div",zt,[(0,l.Lk)("div",qt,[(0,l.Lk)("input",{ref_key:"modelFileInput",ref:K,type:"file",onChange:S,accept:".glb,.fbx,.obj"},null,544),o[17]||(o[17]=(0,l.Lk)("p",null,"Upload 3D model file (GLB, FBX, OBJ formats)",-1))])])]),(0,l.Lk)("div",Mt,[o[20]||(o[20]=(0,l.Lk)("h3",null,"Upload Thumbnail for 3D Model:",-1)),(0,l.Lk)("div",Qt,[(0,l.Lk)("div",Gt,[(0,l.Lk)("input",{type:"file",onChange:N,accept:".jpeg,.jpg,.png,.gif"},null,32),o[19]||(o[19]=(0,l.Lk)("p",null,"Upload Thumbnail (JPG, PNG, GIF formats)",-1))])])])])):(0,l.Q3)("",!0)],64)):(0,l.Q3)("",!0),o[23]||(o[23]=(0,l.Lk)("button",{class:"btn active",type:"submit"},"Add Product",-1))],32)])],64))}},Ht=(0,r.A)(Wt,[["__scopeId","data-v-7c2856f6"]]),Zt=Ht,Yt={class:"content"},el={class:"row"},ol={class:"column"},al={class:"column"},tl={class:"row"},ll={class:"column"},nl={key:0,class:"dropdown"},rl={class:"column"},sl={class:"row"},il={class:"column"},cl={class:"column"},ul={class:"row"},dl={class:"column"},pl=["for"],vl=["onUpdate:modelValue","id"],ml={key:2,class:"color-dropdown"},kl={class:"dropdown"},gl={class:"configurations"},fl={class:"column"},hl=["for"],yl=["onUpdate:modelValue","id"],Ll={key:3,class:"color-dropdown"},bl={class:"dropdown"},wl={__name:"EditProduct",setup(e){v.A.defaults.baseURL=(void 0).VITE_API_BASE_URL;const o="localhost"!==window.location.hostname,a=o?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",n=(0,u.rd)(),r=(0,u.lq)(),s=r.params.id,i=localStorage.getItem("jwtToken"),c=i?JSON.parse(atob(i.split(".")[1])):{},m=c.companyId,k=(0,p.KR)([]),f=(0,p.KR)(""),h=(0,p.KR)(""),y=(0,p.KR)(""),L=(0,p.KR)(""),b=(0,p.KR)(""),w=(0,p.KR)(""),C=(0,p.KR)(""),_=(0,p.KR)(""),E=(0,p.KR)([]),I=(0,p.KR)(null),P=(0,p.KR)(""),T=(0,p.KR)(""),A=(0,p.KR)([]),$=((0,p.KR)([]),(0,p.KR)([]),(0,p.KR)([])),x=(0,p.KR)({sole_top:!1}),S=async()=>{try{const e=await v.A.get(`${a}/products/${s}`,{headers:{Authorization:`Bearer ${i}`}}),o=e.data?.data?.product;if(o){f.value=o.productCode,y.value=o.productName,L.value=o.productType,b.value=o.activeInactive,w.value=o.brand,C.value=o.productPrice,_.value=o.description;let e=[];o.configurations&&o.configurations.forEach(((o,a)=>{let t=[];o.selectedOptions&&o.selectedOptions.forEach((e=>{e.images&&e.images.length>0&&t.push(...e.images)})),e[a]={images:t}})),E.value=e}else console.error("Geen productdata gevonden.")}catch(e){console.error("Error fetching product data:",e)}},N=async()=>{try{if(!y.value||!C.value||!f.value)return void console.error("❌ Missing required fields.");if(!I.value)return void console.error("❌ No file uploaded.");await updateProduct(s,{productCode:f.value,productName:y.value,productType:P.value,productPrice:C.value,description:_.value,brand:w.value,file:I.value,configurations:k.value}),n.push("/")}catch(e){console.error("❌ Error updating product:",e)}},K=(0,p.KR)({}),U=e=>{const o=K.value[e]?.length||0;if(0===o)return"Select colors";const a=K.value[e].slice(0,2).map((e=>e.name)).join(", ");return K.value[e].length>2?`${a} + ${o-2} more`:a},F=(0,p.KR)([]),R=async e=>{try{const o=await ve(e);if(!o||!Array.isArray(o)||0===o.length)return void console.error("❌ Geen geldige kleuren ontvangen");F.value=o.map((e=>({optionId:e.optionId||"",name:e.color||"Unnamed Color",images:e.images||[]})))}catch(o){console.error("❌ Fout in fetchcolors:",o)}},V={},X=e=>{e&&e[0]?I.value=e:console.error("❌ Geen geldige afbeeldings-URL.")};return(0,l.sV)((async()=>{if(m)try{await be();const e=await Xa(m,i);h.value=e?.name||"";const o=await we(m);T.value=o||"";const{partnerConfigs:a}=await Da(m,i);k.value=a||[],await S(),await R(m),await(0,l.dY)();const t=F.value;t.length>0?k.value.forEach((e=>{if("color"===e?.configurationDetails?.fieldType){const o=e.configurationId._id,a=e.options.map((e=>t.find((o=>o.optionId===e.optionId._id))));V[o]=a,K.value[o]=[]}})):console.warn("⚠️ Geen kleuren gevonden.");const n=await pe(m);$.value=n}catch(e){console.error("❌ Error tijdens initialisatie:",e)}else console.error("❌ Partner ID is niet beschikbaar.")})),(e,o)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),(0,l.Lk)("div",Yt,[o[14]||(o[14]=(0,l.Lk)("h1",null,"Edit Product",-1)),(0,l.Lk)("form",{onSubmit:(0,t.D$)(N,["prevent"])},[(0,l.Lk)("div",el,[(0,l.Lk)("div",ol,[o[7]||(o[7]=(0,l.Lk)("label",{for:"productCode"},"Product Code:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>f.value=e),id:"productCode",type:"text",required:""},null,512),[[t.Jo,f.value]])]),(0,l.Lk)("div",al,[o[8]||(o[8]=(0,l.Lk)("label",{for:"productName"},"Product Name:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>y.value=e),id:"productName",type:"text",required:""},null,512),[[t.Jo,y.value]])])]),(0,l.Lk)("div",tl,[(0,l.Lk)("div",ll,[o[9]||(o[9]=(0,l.Lk)("label",{for:"productType"},"Type Of Product:",-1)),$.value.length>0?((0,l.uX)(),(0,l.CE)("div",nl,[(0,l.bF)(Ga,{modelValue:P.value,"onUpdate:modelValue":o[2]||(o[2]=e=>P.value=e),fieldName:"sole_top",dropdownStates:x.value,buttonText:"Select colors",types:$.value,onAddOption:o[3]||(o[3]=e=>(0,p.R1)(me)($.value,e))},null,8,["modelValue","dropdownStates","types"])])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",rl,[o[10]||(o[10]=(0,l.Lk)("label",{for:"brand"},"Brand:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>w.value=e),id:"brand",type:"text",required:""},null,512),[[t.Jo,w.value]])])]),(0,l.Lk)("div",sl,[(0,l.Lk)("div",il,[o[11]||(o[11]=(0,l.Lk)("label",{for:"productPrice"},"Price:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>C.value=e),id:"productPrice",type:"number",required:""},null,512),[[t.Jo,C.value]])]),(0,l.Lk)("div",cl,[o[12]||(o[12]=(0,l.Lk)("label",{for:"description"},"Description:",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":o[6]||(o[6]=e=>_.value=e),id:"description",required:""},null,512),[[t.Jo,_.value]])])]),"standard"==T.value?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(k.value,((o,a)=>((0,l.uX)(),(0,l.CE)(l.FK,{key:o._id},[(0,l.Lk)("div",ul,[(0,l.Lk)("div",dl,[(0,l.Lk)("label",{for:o.configurationDetails.fieldName},(0,d.v_)(o.configurationDetails.fieldName)+": ",9,pl),"Text"===o.configurationDetails.fieldType?(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:0,"onUpdate:modelValue":e=>o.value=e,id:o.configurationDetails.fieldName,type:"text"},null,8,vl)),[[t.Jo,o.value]]):"Dropdown"===o.configurationDetails.fieldType?((0,l.uX)(),(0,l.Wv)(et,{key:1,fieldName:o.configurationDetails.fieldName,dropdownStates:x.value,buttonText:"Toggle Dropdown"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.configurations,((o,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a},[(0,l.Lk)("span",{class:"color-bullet",style:(0,d.Tr)({backgroundColor:e.color.name||"transparent"})},null,4),(0,l.eW)(" "+(0,d.v_)(e.color.name||"Unnamed Color"),1)])))),128))])),_:2},1032,["fieldName","dropdownStates"])):"color"===o.configurationDetails.fieldType?((0,l.uX)(),(0,l.CE)("div",ml,[(0,l.Lk)("div",kl,[(0,l.bF)(et,{fieldName:o.configurationDetails.fieldName,dropdownStates:x.value,buttonText:U(o.configurationId._id)},{default:(0,l.k6)((()=>[(0,l.bF)(rt,{selectedColors:K.value[o.configurationId._id],"onUpdate:selectedColors":e=>K.value[o.configurationId._id]=e,colors:V[o.configurationId._id]||[],dropdownStates:x.value,fieldName:o.configurationDetails.fieldName,colorOptions:V[o.configurationId._id]||[]},null,8,["selectedColors","onUpdate:selectedColors","colors","dropdownStates","fieldName","colorOptions"])])),_:2},1032,["fieldName","dropdownStates","buttonText"])])])):(0,l.Q3)("",!0)])]),"color"===o.configurationDetails.fieldType?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(K.value[o.configurationId._id]||[],((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o,class:"column"},[(0,l.Lk)("p",null,(0,d.v_)(e.name)+" - Upload images",1),(0,l.bF)(gt,{onFileUploaded:X,existingFiles:A.value,partnerPackage:T.value,partnerName:h.value},null,8,["existingFiles","partnerPackage","partnerName"])])))),128)):(0,l.Q3)("",!0)],64)))),128)):(0,l.Q3)("",!0),"pro"==T.value?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("div",gl,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(k.value,((o,a)=>((0,l.uX)(),(0,l.CE)("div",{key:o._id,class:"row"},[(0,l.Lk)("div",fl,[o.configurationDetails?((0,l.uX)(),(0,l.CE)("label",{key:0,for:o.configurationDetails.fieldName},(0,d.v_)(o.configurationDetails.fieldName)+": ",9,hl)):(0,l.Q3)("",!0),"Text"===o.configurationDetails?.fieldType?(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:1,"onUpdate:modelValue":e=>o.value=e,id:o.configurationDetails.fieldName,type:"text"},null,8,yl)),[[t.Jo,o.value]]):"Dropdown"===o.configurationDetails?.fieldType?((0,l.uX)(),(0,l.Wv)(et,{key:2,fieldName:o.configurationDetails.fieldName,dropdownStates:x.value,buttonText:"Toggle Dropdown"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.configurations,((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o},[(0,l.Lk)("span",{class:"color-bullet",style:(0,d.Tr)({backgroundColor:e.name||"transparent"})},null,4),(0,l.eW)(" "+(0,d.v_)(e.name||"Unnamed Color"),1)])))),128))])),_:2},1032,["fieldName","dropdownStates"])):"color"===o.configurationDetails?.fieldType?((0,l.uX)(),(0,l.CE)("div",Ll,[(0,l.Lk)("div",bl,[(0,l.bF)(et,{fieldName:o.configurationDetails.fieldName,dropdownStates:x.value,buttonText:U(o.configurationId._id)},{default:(0,l.k6)((()=>[(0,l.bF)(rt,{selectedColors:K.value[o.configurationId._id],"onUpdate:selectedColors":e=>K.value[o.configurationId._id]=e,colors:V[o.configurationId._id]||[],dropdownStates:x.value,fieldName:o.configurationDetails.fieldName,colorOptions:V[o.configurationId._id]||[]},null,8,["selectedColors","onUpdate:selectedColors","colors","dropdownStates","fieldName","colorOptions"])])),_:2},1032,["fieldName","dropdownStates","buttonText"])])])):(0,l.Q3)("",!0)])])))),128))]),Object.values(K.value).some((e=>e.length>0))?((0,l.uX)(),(0,l.Wv)(gt,{key:0,onFileUploaded:X,colorUploads:E.value,partnerPackage:T.value,partnerName:h.value},null,8,["colorUploads","partnerPackage","partnerName"])):(0,l.Q3)("",!0)],64)):(0,l.Q3)("",!0),o[13]||(o[13]=(0,l.Lk)("button",{class:"btn active",type:"submit"},"Update Product",-1))],32)])],64))}},Cl=(0,r.A)(wl,[["__scopeId","data-v-e73a67c8"]]),_l=Cl,El={key:0,class:"overlay"},Il={class:"content"},Pl={key:0,class:"popup"},Tl={class:"menu"},Al={class:"btns"},$l={class:"search"},xl={class:"search"},Sl={class:"partners mobile"},Nl={class:"items"},Kl={class:"elements"},Ul={class:"text"},Fl={class:"name"},Rl={class:"partners desktop"},Vl={class:"top"},Xl=["checked"],jl={class:"table-container"},Ol={key:0,class:"list"},Dl=["onChange","checked"],Bl={key:1,class:"no-partners"},Jl={__name:"PartnersPage",setup(e){const o=(0,u.rd)(),a=(0,p.Kh)({firstName:"",lastName:"",email:"",newEmail:"",oldEmail:"",password:"",newPassword:"",oldPassword:"",newPasswordRepeat:"",country:"",city:"",postalCode:"",profilePicture:"",bio:"",role:"",activeUnactive:!0}),n=localStorage.getItem("jwtToken");n||o.push("/login");const r=e=>{try{const o=e.split(".")[1],a=o.replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(a).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(t)}catch(o){return console.error("Error parsing JWT:",o),null}},s=r(n),i=s?.userId,c=s?.partnerId||null;i||o.push("/login");const m=(0,p.KR)(null),k=async()=>{try{const e=await v.A.get(`${w}/users/${i}`,{headers:{Authorization:`Bearer ${n}`}}),t=e.data?.data?.user||{};a.firstName=t.firstname||"",a.lastName=t.lastname||"",a.email=t.email||"",a.oldEmail=t.email||"",a.country=t.country||"",a.city=t.city||"",a.postalCode=t.postalCode||"",a.profilePicture=t.profilePicture||"",a.bio=t.bio||"",a.role=t.role||"",a.activeUnactive=t.activeUnactive??!0,"platform_admin"!==t.role&&o.push("/login")}catch(e){console.error("Error fetching user profile:",e)}},f=async()=>{if(c)try{const e=await v.A.get(`${w}/partners/${c}`,{headers:{Authorization:`Bearer ${n}`}}),o=e.data?.data?.partner||{};m.value=o.package||"No package available"}catch(e){console.error("Error fetching partner data:",e),m.value="Error loading partner data"}};(0,l.sV)((async()=>{await k(),await f()})),(0,l.Gt)("user",a);const h=async()=>{try{const e=localStorage.getItem("jwtToken"),o=await fetch(`${w}/products`,{headers:{Authorization:`Bearer ${e}`}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const a=await o.json(),t=L(e);y.value=a.data.products.filter((e=>e.partnerId===t))}catch(e){console.error("Error fetching data:",e)}};(0,l.sV)(h);(0,p.KR)("All");const y=(0,p.KR)([]),L=e=>{if(!e)return null;const o=JSON.parse(atob(e.split(".")[1]));return o.companyId};(0,l.sV)((()=>{h()}));const b="localhost"!==window.location.hostname,w=b?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",C=(0,p.KR)("all"),_=(0,p.KR)([]),E=(0,p.KR)(""),I=(0,p.KR)([]),P=(0,l.EW)((()=>I.value.length>0)),T=(0,p.KR)(!1),A=async()=>{try{const e=localStorage.getItem("jwtToken"),o=await fetch(`${w}/partners`,{headers:{Authorization:`Bearer ${e}`}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const a=await o.json();a&&a.data&&a.data.partners?_.value=a.data.partners:console.error("No partners found in the response.")}catch(e){console.error("Error fetching partners:",e)}},$=e=>{const o=I.value.indexOf(e);-1===o?I.value.push(e):I.value.splice(o,1)},x=e=>{I.value=e.target.checked?_.value.map((e=>e._id)):[]},S=async()=>{await N(),U()},N=async()=>{try{for(const e of I.value){const o=await fetch(`${w}/partners/${e}`,{method:"DELETE"});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`)}await A(),I.value=[]}catch(e){console.error("Error deleting partners:",e)}},K=()=>{T.value=!0},U=()=>{T.value=!1},F=(0,l.EW)((()=>{if(!_.value)return[];const e=_.value.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(E.value.toLowerCase()))))),o=e.filter((e=>"all"===C.value||e.package===C.value));return o}));return(0,l.sV)((()=>{A(),setInterval((()=>{A()}),5e3)})),(e,o)=>{const a=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),T.value?((0,l.uX)(),(0,l.CE)("div",El)):(0,l.Q3)("",!0),(0,l.Lk)("div",Il,[o[19]||(o[19]=(0,l.Lk)("h2",null,"Partners",-1)),T.value?((0,l.uX)(),(0,l.CE)("div",Pl,[o[5]||(o[5]=(0,l.Lk)("img",{src:Uo,alt:"icon"},null,-1)),(0,l.Lk)("div",{class:"text"},[o[3]||(o[3]=(0,l.Lk)("h2",null,"Are you sure?",-1)),o[4]||(o[4]=(0,l.Lk)("p",null,"Do you really want to delete this item(s)?",-1)),(0,l.Lk)("div",{class:"btns"},[(0,l.Lk)("button",{onClick:U},"Cancel"),(0,l.Lk)("button",{onClick:S,class:"btn active"},"Delete")])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",Tl,[(0,l.Lk)("div",Al,[(0,l.bF)(a,{exact:"",to:"/admin/add-new-partner",class:"btn active"},{default:(0,l.k6)((()=>o[6]||(o[6]=[(0,l.Lk)("p",null,"Add new",-1),(0,l.Lk)("img",{src:Fo,alt:"icon"},null,-1)]))),_:1}),(0,l.Lk)("div",{class:"btn display",style:(0,d.Tr)({display:P.value?"flex":"none"}),onClick:K},o[7]||(o[7]=[(0,l.Lk)("p",null,"Delete item(s)",-1)]),4)]),(0,l.Lk)("div",$l,[o[8]||(o[8]=(0,l.Lk)("img",{src:Ro,alt:"icon"},null,-1)),(0,l.bo)((0,l.Lk)("input",{placeholder:"Search","onUpdate:modelValue":o[0]||(o[0]=e=>E.value=e)},null,512),[[t.Jo,E.value]])]),(0,l.bo)((0,l.Lk)("select",{class:"filter","onUpdate:modelValue":o[1]||(o[1]=e=>C.value=e)},o[9]||(o[9]=[(0,l.Lk)("option",{value:"all"},"All",-1),(0,l.Lk)("option",{value:"standard"},"Standard",-1),(0,l.Lk)("option",{value:"plus"},"Plus",-1),(0,l.Lk)("option",{value:"pro"},"Pro",-1)]),512),[[t.u1,C.value]])]),(0,l.Lk)("div",xl,[o[10]||(o[10]=(0,l.Lk)("img",{src:Ro,alt:"icon"},null,-1)),(0,l.bo)((0,l.Lk)("input",{placeholder:"Search","onUpdate:modelValue":o[2]||(o[2]=e=>E.value=e)},null,512),[[t.Jo,E.value]])]),(0,l.Lk)("div",Sl,[(0,l.Lk)("div",Nl,[F.value.length?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(F.value,(e=>((0,l.uX)(),(0,l.Wv)(a,{key:e._id,to:{name:"EditPartner",params:{id:e._id}}},{default:(0,l.k6)((()=>[o[12]||(o[12]=(0,l.Lk)("div",{class:"image",style:{backgroundImage:"url(http://localhost:5173/src/assets/images/Odette_lunettes.webp)"}},null,-1)),(0,l.Lk)("div",Kl,[(0,l.Lk)("div",Ul,[(0,l.Lk)("p",Fl,(0,d.v_)(e.name),1),(0,l.Lk)("p",null,(0,d.v_)(e.contact_email),1),(0,l.Lk)("p",null,(0,d.v_)(e.contact_phone),1),(0,l.Lk)("p",null,(0,d.v_)(e.package),1)]),o[11]||(o[11]=(0,l.Lk)("div",{class:"btn"},[(0,l.Lk)("p",null,"Active")],-1))])])),_:2},1032,["to"])))),128)):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",Rl,[(0,l.Lk)("div",Vl,[(0,l.Lk)("input",{type:"checkbox",onChange:x,checked:I.value.length===F.value.length&&F.value.length>0},null,40,Xl),o[13]||(o[13]=(0,l.Lk)("p",null,"Partner ID",-1)),o[14]||(o[14]=(0,l.Lk)("p",null,"Name",-1)),o[15]||(o[15]=(0,l.Lk)("p",null,"Contact Email",-1)),o[16]||(o[16]=(0,l.Lk)("p",null,"Contact Phone",-1)),o[17]||(o[17]=(0,l.Lk)("p",null,"Package",-1))]),(0,l.Lk)("div",jl,[F.value.length?((0,l.uX)(),(0,l.CE)("ul",Ol,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(F.value,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e._id},[(0,l.Lk)("input",{type:"checkbox",onChange:o=>$(e._id),checked:I.value.includes(e._id)},null,40,Dl),(0,l.bF)(a,{to:{name:"EditPartner",params:{id:e._id}}},{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,(0,d.v_)(e._id),1),(0,l.Lk)("p",null,(0,d.v_)(e.name),1),(0,l.Lk)("p",null,(0,d.v_)(e.contact_email),1),(0,l.Lk)("p",null,(0,d.v_)(e.contact_phone),1),(0,l.Lk)("p",null,(0,d.v_)(e.package),1)])),_:2},1032,["to"])])))),128))])):((0,l.uX)(),(0,l.CE)("div",Bl,o[18]||(o[18]=[(0,l.Lk)("p",null,"No partners found matching the selected filters.",-1)])))])])])],64)}}},zl=(0,r.A)(Jl,[["__scopeId","data-v-61f3a1da"]]),ql=zl,Ml={class:"content"},Ql={class:"row"},Gl={class:"column"},Wl={class:"row"},Hl={class:"column"},Zl={class:"column"},Yl={class:"row"},en={class:"column"},on={class:"column"},an={class:"row"},tn={class:"column"},ln={class:"column"},nn={class:"row"},rn={class:"column"},sn={__name:"AddNewPartnerPage",setup(e){const o="localhost"!==window.location.hostname,a=o?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",n=localStorage.getItem("jwtToken"),r=(0,u.rd)();n||r.push("/login");const s=(0,p.KR)(""),i=(0,p.KR)(""),c=(0,p.KR)(""),d=(0,p.KR)(""),v=(0,p.KR)(""),m=(0,p.KR)(""),k=(0,p.KR)(""),f=(0,p.KR)("standard"),h={primary_color:"rgb(151, 71, 255)",secondary_color:"rgb(0, 0, 0)",titles_color:"rgb(0, 113, 227)",text_color:"rgb(255, 255, 255)",background_color:"rgb(0, 0, 0)",button_color:"#146ef5",fontFamilyTitles:"Syne, serif",fontFamilyBodyText:"DM Sans, sans-serif",logo_url:"../../src/assets/images/rebilt-favicon.svg"},y=e=>{const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return o.test(e)},L=async()=>{if(!s.value||!f.value)return void alert("Naam en pakket zijn verplicht.");if(m.value&&!y(m.value))return void alert("Voer een geldig e-mailadres in.");const e={name:s.value,address:{street:i.value,city:c.value,postal_code:d.value,country:v.value},contact_email:m.value||null,contact_phone:k.value||null,package:f.value,...h};try{const o=await fetch(`${a}/partners`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(e)});if(!o.ok){const e=await o.json();throw new Error(`Fout bij het toevoegen van de partner: ${e.message}`)}await o.json();r.push("/admin/partners")}catch(o){console.error("Error adding partner:",o.message),alert("Er is een fout opgetreden bij het toevoegen van de partner. Controleer de console voor details.")}};return(e,o)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),(0,l.Lk)("div",Ml,[o[18]||(o[18]=(0,l.Lk)("h1",null,"Add new partner",-1)),(0,l.Lk)("form",{onSubmit:(0,t.D$)(L,["prevent"])},[(0,l.Lk)("div",Ql,[(0,l.Lk)("div",Gl,[o[8]||(o[8]=(0,l.Lk)("label",{for:"name"},"Naam:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.value=e),id:"name",type:"text",required:""},null,512),[[t.Jo,s.value]])])]),(0,l.Lk)("div",Wl,[(0,l.Lk)("div",Hl,[o[9]||(o[9]=(0,l.Lk)("label",{for:"street"},"Straat:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>i.value=e),id:"street",type:"text"},null,512),[[t.Jo,i.value]])]),(0,l.Lk)("div",Zl,[o[10]||(o[10]=(0,l.Lk)("label",{for:"city"},"Stad:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>c.value=e),id:"city",type:"text"},null,512),[[t.Jo,c.value]])])]),(0,l.Lk)("div",Yl,[(0,l.Lk)("div",en,[o[11]||(o[11]=(0,l.Lk)("label",{for:"postalCode"},"Postcode:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>d.value=e),id:"postalCode",type:"text"},null,512),[[t.Jo,d.value]])]),(0,l.Lk)("div",on,[o[12]||(o[12]=(0,l.Lk)("label",{for:"country"},"Land:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>v.value=e),id:"country",type:"text"},null,512),[[t.Jo,v.value]])])]),(0,l.Lk)("div",an,[(0,l.Lk)("div",tn,[o[13]||(o[13]=(0,l.Lk)("label",{for:"contactEmail"},"Contact E-mail:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>m.value=e),id:"contactEmail",type:"email"},null,512),[[t.Jo,m.value]])]),(0,l.Lk)("div",ln,[o[14]||(o[14]=(0,l.Lk)("label",{for:"contactPhone"},"Contact Telefoon:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[6]||(o[6]=e=>k.value=e),id:"contactPhone",type:"tel"},null,512),[[t.Jo,k.value]])])]),(0,l.Lk)("div",nn,[(0,l.Lk)("div",rn,[o[16]||(o[16]=(0,l.Lk)("label",{for:"subscriptionPackage"},"Pakket:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":o[7]||(o[7]=e=>f.value=e),id:"subscriptionPackage",required:""},o[15]||(o[15]=[(0,l.Lk)("option",{value:"standard"},"Standard",-1),(0,l.Lk)("option",{value:"plus"},"Plus",-1),(0,l.Lk)("option",{value:"pro"},"Pro",-1)]),512),[[t.u1,f.value]])])]),o[17]||(o[17]=(0,l.Lk)("button",{type:"submit",class:"btn active"},"Save",-1))],32)])],64))}},cn=(0,r.A)(sn,[["__scopeId","data-v-672cee12"]]),un=cn,dn={class:"content"},pn={class:"row"},vn={class:"column"},mn={class:"row"},kn={class:"column"},gn={class:"column"},fn={class:"row"},hn={class:"column"},yn={class:"column"},Ln={class:"row"},bn={class:"column"},wn={class:"column"},Cn={class:"row"},_n={class:"column"},En={__name:"EditPartner",setup(e){const o="localhost"!==window.location.hostname,a=o?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",n=(0,u.rd)(),r=(0,u.lq)(),s=localStorage.getItem("jwtToken");s||n.push("/login");const i=r.params.id,c=(0,p.KR)({name:"",address:{street:"",city:"",postal_code:"",country:""},contact_email:"",contact_phone:"",package:"standard"}),d=async()=>{if(!i)return console.error("Geen partnerId beschikbaar."),void alert("Geen partnerId beschikbaar.");try{const e=await fetch(`${a}/partners/${i}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const o=await e.json();c.value={...o.data.partner,address:{...o.data.partner.address}}}catch(e){console.error("Error fetching partner data:",e),alert("Er is een fout opgetreden bij het ophalen van de partnergegevens.")}};(0,l.sV)((()=>{d()}));const v=async()=>{if(c.value.name&&c.value.package)try{const e=await fetch(`${a}/partners/${i}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c.value.name,address:c.value.address,contact_email:c.value.contact_email,contact_phone:c.value.contact_phone,package:c.value.package})});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);await e.json();n.push("/admin/partners")}catch(e){console.error("Error updating partner:",e),alert("Er is een fout opgetreden bij het bijwerken van de partner.")}else alert("Naam en Pakket zijn verplicht.")};return(e,o)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),(0,l.Lk)("div",dn,[o[18]||(o[18]=(0,l.Lk)("h1",null,"Edit partner",-1)),c.value?((0,l.uX)(),(0,l.CE)("form",{key:0,onSubmit:(0,t.D$)(v,["prevent"])},[(0,l.Lk)("div",pn,[(0,l.Lk)("div",vn,[o[8]||(o[8]=(0,l.Lk)("label",{for:"name"},"Naam:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>c.value.name=e),type:"text",id:"name",required:""},null,512),[[t.Jo,c.value.name]])])]),(0,l.Lk)("div",mn,[(0,l.Lk)("div",kn,[o[9]||(o[9]=(0,l.Lk)("label",{for:"street"},"Straat:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>c.value.address.street=e),type:"text",id:"street"},null,512),[[t.Jo,c.value.address.street]])]),(0,l.Lk)("div",gn,[o[10]||(o[10]=(0,l.Lk)("label",{for:"city"},"Stad:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>c.value.address.city=e),type:"text",id:"city"},null,512),[[t.Jo,c.value.address.city]])])]),(0,l.Lk)("div",fn,[(0,l.Lk)("div",hn,[o[11]||(o[11]=(0,l.Lk)("label",{for:"postal_code"},"Postcode:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>c.value.address.postal_code=e),type:"text",id:"postal_code"},null,512),[[t.Jo,c.value.address.postal_code]])]),(0,l.Lk)("div",yn,[o[12]||(o[12]=(0,l.Lk)("label",{for:"country"},"Land:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>c.value.address.country=e),type:"text",id:"country"},null,512),[[t.Jo,c.value.address.country]])])]),(0,l.Lk)("div",Ln,[(0,l.Lk)("div",bn,[o[13]||(o[13]=(0,l.Lk)("label",{for:"contact_email"},"Contact Email:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>c.value.contact_email=e),type:"email",id:"contact_email"},null,512),[[t.Jo,c.value.contact_email]])]),(0,l.Lk)("div",wn,[o[14]||(o[14]=(0,l.Lk)("label",{for:"contact_phone"},"Contact Telefoon:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[6]||(o[6]=e=>c.value.contact_phone=e),type:"tel",id:"contact_phone"},null,512),[[t.Jo,c.value.contact_phone]])])]),(0,l.Lk)("div",Cn,[(0,l.Lk)("div",_n,[o[16]||(o[16]=(0,l.Lk)("label",{for:"package"},"Pakket:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":o[7]||(o[7]=e=>c.value.package=e),id:"package",required:""},o[15]||(o[15]=[(0,l.Lk)("option",{value:"",disabled:""},"Kies een pakket",-1),(0,l.Lk)("option",{value:"standard"},"Standard",-1),(0,l.Lk)("option",{value:"plus"},"Plus",-1),(0,l.Lk)("option",{value:"pro"},"Pro",-1)]),512),[[t.u1,c.value.package]])])]),o[17]||(o[17]=(0,l.Lk)("button",{type:"submit",class:"btn active"},"Save",-1))],32)):(0,l.Q3)("",!0)])],64))}},In=(0,r.A)(En,[["__scopeId","data-v-51264c17"]]),Pn=In,Tn={key:0,class:"overlay"},An={class:"content"},$n={key:0,class:"popup"},xn={class:"menu"},Sn={class:"btns"},Nn={class:"search"},Kn={class:"search"},Un={class:"orders mobile"},Fn={class:"items"},Rn={class:"orders desktop"},Vn={class:"top"},Xn=["checked"],jn={class:"table-container"},On={key:0,class:"list"},Dn=["onChange","checked"],Bn={key:1,class:"no-orders"},Jn={__name:"OrdersPage",setup(e){const o=(0,u.rd)(),a=()=>localStorage.getItem("jwtToken"),n=e=>{try{const o=e.split(".")[1],a=o.replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(a).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(t)}catch(o){return console.error("Error parsing JWT:",o),null}},r=a(),s=n(r),i=s?.userId,c=s?.partnerId||null;i||o.push("/login");const m="localhost"!==window.location.hostname,k=m?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",f=(0,p.Kh)({firstName:"",lastName:"",email:"",oldEmail:"",password:"",country:"",city:"",postalCode:"",profilePicture:"",bio:"",role:"",activeUnactive:!0}),h=(0,p.KR)(null),y=(0,p.KR)([]),L=(0,p.KR)([]),b=(0,p.KR)(""),w=(0,p.KR)("All"),C=async(e,o="GET",t={})=>{const l=a(),n={headers:{Authorization:`Bearer ${l}`},method:o,data:t};try{const o=await(0,v.A)(e,n);return o.data?.data||{}}catch(r){return console.error("Error fetching data:",r),null}},_=async()=>{const e=await C(`${k}/users/${i}`);e?.user&&Object.assign(f,e.user)},E=async()=>{if(c){const e=await C(`${k}/partners/${c}`);h.value=e?.partner?.package||"No package available"}};const I=async()=>{const e=await C(`${k}/orders`);y.value=e?.orders||[],y.value.forEach((e=>{if(e.productId&&e.productId.productCode){e.productId.productCode}}))};(0,l.sV)((async()=>{await _(),await E(),await I(),setInterval(I,5e3)}));const P=(0,l.EW)((()=>y.value.filter((e=>{const o=Object.values(e).some((e=>String(e).toLowerCase().includes(b.value.toLowerCase()))),a="All"===w.value||e.orderStatus===w.value;return o&&a})))),T=e=>{const o=L.value.indexOf(e);-1===o?L.value.push(e):L.value.splice(o,1)},A=e=>{L.value=e.target.checked?y.value.map((e=>e._id)):[]},$=(0,l.EW)((()=>L.value.length>0)),x=()=>{0!==L.value.length&&U()},S=async()=>{await N(),F()},N=async()=>{try{for(const e of L.value)y.value=y.value.filter((o=>o._id!==e)),await fetch(`${k}/orders/${e}`,{method:"DELETE"});L.value=[]}catch(e){console.error("Error deleting orders:",e)}},K=(0,p.KR)(!1),U=()=>{K.value=!0},F=()=>{K.value=!1};return(0,l.Gt)("user",f),(e,o)=>{const a=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),K.value?((0,l.uX)(),(0,l.CE)("div",Tn)):(0,l.Q3)("",!0),(0,l.Lk)("div",An,[o[11]||(o[11]=(0,l.Lk)("h2",null,"Orders",-1)),K.value?((0,l.uX)(),(0,l.CE)("div",$n,[o[5]||(o[5]=(0,l.Lk)("img",{src:Uo,alt:"icon"},null,-1)),(0,l.Lk)("div",{class:"text"},[o[3]||(o[3]=(0,l.Lk)("h2",null,"Are you sure?",-1)),o[4]||(o[4]=(0,l.Lk)("p",null,"Do you really want to delete this item(s)?",-1)),(0,l.Lk)("div",{class:"btns"},[(0,l.Lk)("button",{onClick:F},"Cancel"),(0,l.Lk)("button",{onClick:S,class:"btn active"},"Delete")])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",xn,[(0,l.Lk)("div",Sn,[(0,l.Lk)("p",null,"Aantal orders: "+(0,d.v_)(y.value.length),1),(0,l.Lk)("div",{onClick:x,class:"btn display",style:(0,d.Tr)({visibility:$.value?"visible":"hidden"})},o[6]||(o[6]=[(0,l.Lk)("p",null,"Delete item(s)",-1)]),4)]),(0,l.Lk)("div",Nn,[o[7]||(o[7]=(0,l.Lk)("img",{src:Ro,alt:"icon"},null,-1)),(0,l.bo)((0,l.Lk)("input",{placeholder:"Search","onUpdate:modelValue":o[0]||(o[0]=e=>b.value=e)},null,512),[[t.Jo,b.value]])]),(0,l.bo)((0,l.Lk)("select",{class:"filter","onUpdate:modelValue":o[1]||(o[1]=e=>w.value=e)},o[8]||(o[8]=[(0,l.Fv)('<option value="All" data-v-056fe690>All</option><option value="pending" data-v-056fe690>Pending</option><option value="shipped" data-v-056fe690>Shipped</option><option value="delivered" data-v-056fe690>Delivered</option><option value="cancelled" data-v-056fe690>Cancelled</option>',5)]),512),[[t.u1,w.value]])]),(0,l.Lk)("div",Kn,[o[9]||(o[9]=(0,l.Lk)("img",{src:Ro,alt:"icon"},null,-1)),(0,l.bo)((0,l.Lk)("input",{placeholder:"Search","onUpdate:modelValue":o[2]||(o[2]=e=>b.value=e)},null,512),[[t.Jo,b.value]])]),(0,l.Lk)("div",Un,[(0,l.Lk)("div",Fn,[P.value.length?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(P.value,(e=>((0,l.uX)(),(0,l.Wv)(a,{key:e._id,to:{name:"EditPartner",params:{id:e._id}}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("p",null,(0,d.v_)(e.customer.firstName)+" "+(0,d.v_)(e.customer.lastName),1),(0,l.Lk)("p",null,(0,d.v_)(e.createdAt),1)]),(0,l.Lk)("div",null,[(0,l.Lk)("p",null,(0,d.v_)(e.productId),1),(0,l.Lk)("p",null,(0,d.v_)(e.orderStatus),1)])])),_:2},1032,["to"])))),128)):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",Rn,[(0,l.Lk)("div",Vn,[(0,l.Lk)("input",{type:"checkbox",onChange:A,checked:L.value.length===P.value.length&&P.value.length>0},null,40,Xn),o[10]||(o[10]=(0,l.Fv)("<p data-v-056fe690>Order ID</p><p data-v-056fe690>ProductCode</p><p data-v-056fe690>LacesColor</p><p data-v-056fe690>LacesTexture</p><p data-v-056fe690>SoleBottomColor</p><p data-v-056fe690>SoleBottomTexture</p><p data-v-056fe690>SoleTopColor</p><p data-v-056fe690>SoleTopTexture</p><p data-v-056fe690>InsideColor</p><p data-v-056fe690>InsideTexture</p><p data-v-056fe690>Outside1Color</p><p data-v-056fe690>Outside1Texture</p><p data-v-056fe690>Outside2Color</p><p data-v-056fe690>Outside2Texture</p><p data-v-056fe690>Outside3Color</p><p data-v-056fe690>Outside3Texture</p><p data-v-056fe690>Status</p>",17))]),(0,l.Lk)("div",jn,[P.value.length?((0,l.uX)(),(0,l.CE)("ul",On,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(P.value,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e._id},[(0,l.Lk)("input",{type:"checkbox",onChange:o=>T(e._id),checked:L.value.includes(e._id)},null,40,Dn),(0,l.bF)(a,{to:{name:"EditOrder",params:{id:e._id}}},{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,(0,d.v_)(e._id),1),(0,l.Lk)("p",null,(0,d.v_)(e.productId?.productCode||"No product code"),1),(0,l.Lk)("p",null,(0,d.v_)(e.lacesColor),1),(0,l.Lk)("p",null,(0,d.v_)(e.lacesTexture),1),(0,l.Lk)("p",null,(0,d.v_)(e.soleBottomColor),1),(0,l.Lk)("p",null,(0,d.v_)(e.soleBottomTexture),1),(0,l.Lk)("p",null,(0,d.v_)(e.soleTopColor),1),(0,l.Lk)("p",null,(0,d.v_)(e.soleTopTexture),1),(0,l.Lk)("p",null,(0,d.v_)(e.insideColor),1),(0,l.Lk)("p",null,(0,d.v_)(e.insideTexture),1),(0,l.Lk)("p",null,(0,d.v_)(e.outside1Color),1),(0,l.Lk)("p",null,(0,d.v_)(e.outside1Texture),1),(0,l.Lk)("p",null,(0,d.v_)(e.outside2Color),1),(0,l.Lk)("p",null,(0,d.v_)(e.outside2Texture),1),(0,l.Lk)("p",null,(0,d.v_)(e.outside3Color),1),(0,l.Lk)("p",null,(0,d.v_)(e.outside3Texture),1),(0,l.Lk)("p",null,(0,d.v_)(e.orderStatus),1)])),_:2},1032,["to"])])))),128))])):(0,l.Q3)("",!0),0===P.value.length?((0,l.uX)(),(0,l.CE)("div",Bn," No orders found ")):(0,l.Q3)("",!0)])])])],64)}}},zn=(0,r.A)(Jn,[["__scopeId","data-v-056fe690"]]),qn=zn,Mn={class:"content"},Qn={class:"row"},Gn={class:"column"},Wn={class:"column"},Hn={class:"row"},Zn={class:"column"},Yn={class:"column"},er={__name:"EditOrder",setup(e){const o="localhost"!==window.location.hostname,a=o?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",n=(0,u.rd)(),r=(0,u.lq)(),s=localStorage.getItem("jwtToken");s||n.push("/login");const i=(0,p.KR)(null),c=(0,p.KR)(r.params.id||""),d=(0,p.KR)({customer:{firstName:"",lastName:"",email:"",message:"",address:{street:"",houseNumber:"",postalCode:"",city:""}},productId:"",lacesColor:"",soleBottomColor:"",soleTopColor:"",insideColor:"",outside1Color:"",outside2Color:"",outside3Color:"",lacesTexture:"",soleBottomTexture:"",soleTopTexture:"",insideTexture:"",outside1Texture:"",outside2Texture:"",outside3Texture:"",orderStatus:""}),v=async()=>{try{const e=await fetch(`${a}/orders/${c.value}`,{headers:{Authorization:`Bearer ${s}`}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const o=await e.json();i.value=o.data.order,Object.assign(d.value,i.value)}catch(e){console.error("Fout bij het ophalen van ordergegevens:",e)}},m=async()=>{try{const e=await fetch(`${a}/orders/${c.value}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(d.value)});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);n.push("/admin/orders")}catch(e){console.error("Fout bij het bijwerken van de order:",e)}};return(0,l.sV)(v),(e,o)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),(0,l.Lk)("div",Mn,[o[53]||(o[53]=(0,l.Lk)("h1",null,"Order Bewerken",-1)),i.value?((0,l.uX)(),(0,l.CE)("form",{key:0,onSubmit:(0,t.D$)(m,["prevent"])},[o[50]||(o[50]=(0,l.Lk)("h2",null,"Klantinformatie",-1)),(0,l.Lk)("div",Qn,[(0,l.Lk)("div",Gn,[o[24]||(o[24]=(0,l.Lk)("label",{for:"firstName"},"Voornaam:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"firstName","onUpdate:modelValue":o[0]||(o[0]=e=>d.value.customer.firstName=e),required:""},null,512),[[t.Jo,d.value.customer.firstName]]),o[25]||(o[25]=(0,l.Lk)("label",{for:"lastName"},"Achternaam:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"lastName","onUpdate:modelValue":o[1]||(o[1]=e=>d.value.customer.lastName=e),required:""},null,512),[[t.Jo,d.value.customer.lastName]]),o[26]||(o[26]=(0,l.Lk)("label",{for:"email"},"E-mail:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":o[2]||(o[2]=e=>d.value.customer.email=e),required:""},null,512),[[t.Jo,d.value.customer.email]]),o[27]||(o[27]=(0,l.Lk)("label",{for:"message"},"Bericht:",-1)),(0,l.bo)((0,l.Lk)("textarea",{id:"message","onUpdate:modelValue":o[3]||(o[3]=e=>d.value.customer.message=e)},null,512),[[t.Jo,d.value.customer.message]])]),(0,l.Lk)("div",Wn,[o[28]||(o[28]=(0,l.Lk)("h3",null,"Adres",-1)),o[29]||(o[29]=(0,l.Lk)("label",{for:"street"},"Straat:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"street","onUpdate:modelValue":o[4]||(o[4]=e=>d.value.customer.address.street=e),required:""},null,512),[[t.Jo,d.value.customer.address.street]]),o[30]||(o[30]=(0,l.Lk)("label",{for:"houseNumber"},"Huisnummer:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"houseNumber","onUpdate:modelValue":o[5]||(o[5]=e=>d.value.customer.address.houseNumber=e),required:""},null,512),[[t.Jo,d.value.customer.address.houseNumber]]),o[31]||(o[31]=(0,l.Lk)("label",{for:"postalCode"},"Postcode:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"postalCode","onUpdate:modelValue":o[6]||(o[6]=e=>d.value.customer.address.postalCode=e),required:""},null,512),[[t.Jo,d.value.customer.address.postalCode]]),o[32]||(o[32]=(0,l.Lk)("label",{for:"city"},"Stad:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"city","onUpdate:modelValue":o[7]||(o[7]=e=>d.value.customer.address.city=e),required:""},null,512),[[t.Jo,d.value.customer.address.city]])])]),o[51]||(o[51]=(0,l.Lk)("h2",null,"Productinformatie",-1)),(0,l.Lk)("div",Hn,[(0,l.Lk)("div",Zn,[o[33]||(o[33]=(0,l.Lk)("label",{for:"productId"},"Product ID:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"productId","onUpdate:modelValue":o[8]||(o[8]=e=>d.value.productId=e),required:""},null,512),[[t.Jo,d.value.productId]]),o[34]||(o[34]=(0,l.Lk)("label",{for:"lacesColor"},"Veterskleur:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"lacesColor","onUpdate:modelValue":o[9]||(o[9]=e=>d.value.lacesColor=e),required:""},null,512),[[t.Jo,d.value.lacesColor]]),o[35]||(o[35]=(0,l.Lk)("label",{for:"lacesTexture"},"Veters Texture:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"lacesTexture","onUpdate:modelValue":o[10]||(o[10]=e=>d.value.lacesTexture=e)},null,512),[[t.Jo,d.value.lacesTexture]]),o[36]||(o[36]=(0,l.Lk)("label",{for:"soleBottomColor"},"Zoolkleur (onderkant):",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"soleBottomColor","onUpdate:modelValue":o[11]||(o[11]=e=>d.value.soleBottomColor=e),required:""},null,512),[[t.Jo,d.value.soleBottomColor]]),o[37]||(o[37]=(0,l.Lk)("label",{for:"soleBottomTexture"},"Zool Texture (onderkant):",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"soleBottomTexture","onUpdate:modelValue":o[12]||(o[12]=e=>d.value.soleBottomTexture=e)},null,512),[[t.Jo,d.value.soleBottomTexture]]),o[38]||(o[38]=(0,l.Lk)("label",{for:"soleTopColor"},"Zoolkleur (bovenkant):",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"soleTopColor","onUpdate:modelValue":o[13]||(o[13]=e=>d.value.soleTopColor=e),required:""},null,512),[[t.Jo,d.value.soleTopColor]]),o[39]||(o[39]=(0,l.Lk)("label",{for:"soleTopTexture"},"Zool Texture (bovenkant):",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"soleTopTexture","onUpdate:modelValue":o[14]||(o[14]=e=>d.value.soleTopTexture=e)},null,512),[[t.Jo,d.value.soleTopTexture]])]),(0,l.Lk)("div",Yn,[o[41]||(o[41]=(0,l.Lk)("label",{for:"insideColor"},"Binnenkleur:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"insideColor","onUpdate:modelValue":o[15]||(o[15]=e=>d.value.insideColor=e),required:""},null,512),[[t.Jo,d.value.insideColor]]),o[42]||(o[42]=(0,l.Lk)("label",{for:"insideTexture"},"Binnen Texture:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"insideTexture","onUpdate:modelValue":o[16]||(o[16]=e=>d.value.insideTexture=e)},null,512),[[t.Jo,d.value.insideTexture]]),o[43]||(o[43]=(0,l.Lk)("label",{for:"outside1Color"},"Buitenkleur 1:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"outside1Color","onUpdate:modelValue":o[17]||(o[17]=e=>d.value.outside1Color=e),required:""},null,512),[[t.Jo,d.value.outside1Color]]),o[44]||(o[44]=(0,l.Lk)("label",{for:"outside1Texture"},"Buiten Texture 1:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"outside1Texture","onUpdate:modelValue":o[18]||(o[18]=e=>d.value.outside1Texture=e)},null,512),[[t.Jo,d.value.outside1Texture]]),o[45]||(o[45]=(0,l.Lk)("label",{for:"outside2Color"},"Buitenkleur 2:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"outside2Color","onUpdate:modelValue":o[19]||(o[19]=e=>d.value.outside2Color=e),required:""},null,512),[[t.Jo,d.value.outside2Color]]),o[46]||(o[46]=(0,l.Lk)("label",{for:"outside2Texture"},"Buiten Texture 2:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"outside2Texture","onUpdate:modelValue":o[20]||(o[20]=e=>d.value.outside2Texture=e)},null,512),[[t.Jo,d.value.outside2Texture]]),o[47]||(o[47]=(0,l.Lk)("label",{for:"outside3Color"},"Buitenkleur 3:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"outside3Color","onUpdate:modelValue":o[21]||(o[21]=e=>d.value.outside3Color=e),required:""},null,512),[[t.Jo,d.value.outside3Color]]),o[48]||(o[48]=(0,l.Lk)("label",{for:"outside3Texture"},"Buiten Texture 3:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"outside3Texture","onUpdate:modelValue":o[22]||(o[22]=e=>d.value.outside3Texture=e)},null,512),[[t.Jo,d.value.outside3Texture]]),o[49]||(o[49]=(0,l.Lk)("label",{for:"orderStatus"},"Status:",-1)),(0,l.bo)((0,l.Lk)("select",{id:"orderStatus","onUpdate:modelValue":o[23]||(o[23]=e=>d.value.orderStatus=e),required:""},o[40]||(o[40]=[(0,l.Lk)("option",{value:"pending"},"Pending",-1),(0,l.Lk)("option",{value:"shipped"},"Shipped",-1),(0,l.Lk)("option",{value:"delivered"},"Delivered",-1),(0,l.Lk)("option",{value:"cancelled"},"Cancelled",-1)]),512),[[t.u1,d.value.orderStatus]])])]),o[52]||(o[52]=(0,l.Lk)("button",{type:"submit",class:"btn active"},"Bewerk Order",-1))],32)):(0,l.Q3)("",!0)])],64))}},or=(0,r.A)(er,[["__scopeId","data-v-d71bd772"]]),ar=or,tr={class:"content"},lr={class:"elements"},nr={class:"top"},rr={class:"colours"},sr={class:"column"},ir={class:"row"},cr={class:"column"},ur={class:"row"},dr={class:"column"},pr={class:"row"},vr={class:"column"},mr={class:"row"},kr={class:"column"},gr={class:"row"},fr={class:"column"},hr={class:"row"},yr={class:"fonts"},Lr={class:"font"},br={class:"row"},wr={class:"font-preview"},Cr={class:"font-select"},_r=["selected"],Er=["value"],Ir={class:"font"},Pr={class:"row"},Tr={class:"font-preview"},Ar={class:"font-select"},$r=["selected"],xr=["value"],Sr={class:"images"},Nr={class:"column"},Kr={class:"row"},Ur=["src"],Fr={key:1},Rr="../../assets/images/rebilt-favicon.svg",Vr={__name:"StylingPage",setup(e){const o=(0,u.rd)(),a=(0,p.Kh)({firstName:"",lastName:"",email:"",newEmail:"",oldEmail:"",password:"",newPassword:"",oldPassword:"",newPasswordRepeat:"",country:"",city:"",postalCode:"",profilePicture:"",bio:"",role:"",activeUnactive:!0}),n=localStorage.getItem("jwtToken");n||o.push("/login");const r=e=>{try{const o=e.split(".")[1],a=o.replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(a).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(t)}catch(o){return console.error("Error parsing JWT:",o),null}},s=r(n),i=s?.userId,c=s?.companyId||null;i||o.push("/login");const m=(0,p.KR)(null),k="localhost"!==window.location.hostname,f=k?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",h=async()=>{try{const e=await v.A.get(`${f}/users/${i}`,{headers:{Authorization:`Bearer ${n}`}}),o=e.data?.data?.user||{};Object.assign(a,o)}catch(e){console.error("Error fetching user profile:",e)}},y=async()=>{if(c)try{const e=await v.A.get(`${f}/partners/${c}`,{headers:{Authorization:`Bearer ${n}`}}),o=e.data?.data?.partner||{};m.value=o.package||"No package available"}catch(e){console.error("Error fetching partner data:",e),m.value="Error loading partner data"}};(0,l.sV)((async()=>{await h(),await y()})),(0,l.Gt)("user",a),(0,l.wB)(a,(e=>{console.log("User data updated:",e)}),{deep:!0});const L=(0,p.Kh)({primaryColor:"#9747ff",secondaryColor:"#000000",textColor:"#ffffff",titlesColor:"#146ef5",backgroundColor:"#000000",buttonColor:"#146ef5",fonts:[],logo:"",backgroundImage:"",black:"#080808",white:"#fff",blue_600:"#0055d4",gray_100:"#f0f0f0",gray_200:"#d8d8d8",gray_300:"#ababab",gray_400:"#898989",gray_500:"#757575",gray_600:"#5a5a5a",gray_700:"#363636",gray_800:"#222",gray_900:"#171717"}),b=(0,p.KR)(""),w=(0,p.KR)(""),C=(0,p.KR)([]),_=async()=>{const e="AIzaSyBAS05cq9-WKD92VljeuLee5V7YkIrTTMw",o=`https://www.googleapis.com/webfonts/v1/webfonts?key=${e}`;try{const{data:e}=await v.A.get(o);C.value=e.items.map((e=>e.family))}catch(a){console.error("Error fetching Google Fonts:",a)}},E=async(e,o)=>{const a=`https://fonts.googleapis.com/css2?family=${e.replace(/ /g,"+")}:wght@400;700&display=swap`,t=document.head.querySelector(`link[href="${a}"]`);if(!t){const e=document.createElement("link");e.rel="stylesheet",e.href=a,document.head.appendChild(e)}"title"===o?b.value=e:"text"===o&&(w.value=e),await A()},I=e=>{const o=document.createElement("input");o.type="color",o.value=L[e],o.addEventListener("input",(async o=>{L[e]=o.target.value,await A()})),o.click()},P=async()=>{try{const e=await v.A.get(`${f}/partners/${c}`,{headers:{Authorization:`Bearer ${n}`}}),o=e.data?.data?.partner||{};Object.assign(L,{primaryColor:o.primary_color||"#9747ff",secondaryColor:o.secondary_color||"#000000",textColor:o.text_color||"#ffffff",titlesColor:o.titles_color||"#146ef5",backgroundColor:o.background_color||"#000000",buttonColor:o.button_Color||"#146ef5",logo:o.logo_url||"",backgroundImage:o.background_image_url||"",fontFamilyTitles:o.fontFamilyTitles||"Syne",fontFamilyBodyText:o.fontFamilyBodyText||"DM Sans"}),b.value=o.fontFamilyTitles||"Syne",w.value=o.fontFamilyBodyText||"DM Sans"}catch(e){console.error("Error fetching house style:",e)}},T=async()=>{const e={primaryColor:"#9747ff",secondaryColor:"#000000",textColor:"#ffffff",titlesColor:"#146ef5",backgroundColor:"#000000",buttonColor:"#146ef5",backgroundImage:"",fontFamilyTitles:"Syne",fontFamilyBodyText:"DM Sans",logo:"https://res.cloudinary.com/dzempjvto/image/upload/v1734208533/Stijn/Huisstijl/yzezrygcrnb8pztjyplp.jpg",black:"#080808",white:"#fff",blue_600:"#0055d4",gray_100:"#f0f0f0",gray_200:"#d8d8d8",gray_300:"#ababab",gray_400:"#898989",gray_500:"#757575",gray_600:"#5a5a5a",gray_700:"#363636",gray_800:"#222",gray_900:"#171717"};Object.assign(L,e);try{await A()}catch(o){console.error("Error updating house style:",o)}},A=async()=>{const e={name:"Odette Lunettes",address:{street:"92, Goudenregenlaan",city:"Sint-Niklaas",postal_code:"9100",country:"België"},contact_email:"jonasdebruyne734@gmail.com",contact_phone:"0472671833",package:"standard",primary_color:L.primaryColor,secondary_color:L.secondaryColor,titles_color:L.titlesColor,text_color:L.textColor,background_color:L.backgroundColor,button_color:L.buttonColor,fontFamilyBodyText:w.value,fontFamilyTitles:b.value,logo_url:L.logo||null,black:L.black,white:L.white,blue_600:L.blue_600,gray_100:L.gray_100,gray_200:L.gray_200,gray_300:L.gray_300,gray_400:L.gray_400,gray_500:L.gray_500,gray_600:L.gray_600,gray_700:L.gray_700,gray_800:L.gray_800,gray_900:L.gray_900};try{await v.A.put(`${f}/partners/${c}`,e,{headers:{Authorization:`Bearer ${n}`}})}catch(o){console.error("Error updating house style:",o)}};return(0,l.sV)((()=>{P(),_()})),(e,o)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),(0,l.Lk)("div",tr,[o[27]||(o[27]=(0,l.Lk)("h1",null,"Styling",-1)),(0,l.Lk)("div",lr,[(0,l.Lk)("div",nr,[o[13]||(o[13]=(0,l.Lk)("h2",null,"Colours",-1)),(0,l.Lk)("a",{href:"#",class:"btn active",onClick:(0,t.D$)(T,["prevent"])},o[12]||(o[12]=[(0,l.Lk)("p",null,"Reset",-1)]))]),(0,l.Lk)("div",rr,[(0,l.Lk)("div",sr,[o[14]||(o[14]=(0,l.Lk)("h3",null,"Primary Color",-1)),(0,l.Lk)("div",ir,[(0,l.Lk)("p",null,(0,d.v_)(L.primaryColor),1),(0,l.Lk)("div",{class:"color",style:(0,d.Tr)({backgroundColor:L.primaryColor}),onClick:o[0]||(o[0]=e=>I("primaryColor"))},null,4)])]),(0,l.Lk)("div",cr,[o[15]||(o[15]=(0,l.Lk)("h3",null,"Secondary Color",-1)),(0,l.Lk)("div",ur,[(0,l.Lk)("p",null,(0,d.v_)(L.secondaryColor),1),(0,l.Lk)("div",{class:"color",style:(0,d.Tr)({backgroundColor:L.secondaryColor}),onClick:o[1]||(o[1]=e=>I("secondaryColor"))},null,4)])]),(0,l.Lk)("div",dr,[o[16]||(o[16]=(0,l.Lk)("h3",null,"Text color",-1)),(0,l.Lk)("div",pr,[(0,l.Lk)("p",null,(0,d.v_)(L.textColor),1),(0,l.Lk)("div",{class:"color",style:(0,d.Tr)({backgroundColor:L.textColor}),onClick:o[2]||(o[2]=e=>I("textColor"))},null,4)])]),(0,l.Lk)("div",vr,[o[17]||(o[17]=(0,l.Lk)("h3",null,"Titles color",-1)),(0,l.Lk)("div",mr,[(0,l.Lk)("p",null,(0,d.v_)(L.titlesColor),1),(0,l.Lk)("div",{class:"color",style:(0,d.Tr)({backgroundColor:L.titlesColor}),onClick:o[3]||(o[3]=e=>I("titlesColor"))},null,4)])]),(0,l.Lk)("div",kr,[o[18]||(o[18]=(0,l.Lk)("h3",null,"Button color",-1)),(0,l.Lk)("div",gr,[(0,l.Lk)("p",null,(0,d.v_)(L.buttonColor),1),(0,l.Lk)("div",{class:"color",style:(0,d.Tr)({backgroundColor:L.buttonColor}),onClick:o[4]||(o[4]=e=>I("buttonColor"))},null,4)])]),(0,l.Lk)("div",fr,[o[19]||(o[19]=(0,l.Lk)("h3",null,"Background color",-1)),(0,l.Lk)("div",hr,[(0,l.Lk)("p",null,(0,d.v_)(L.backgroundColor),1),(0,l.Lk)("div",{class:"color",style:(0,d.Tr)({backgroundColor:L.backgroundColor}),onClick:o[5]||(o[5]=e=>I("backgroundColor"))},null,4)])])]),(0,l.Lk)("div",yr,[o[24]||(o[24]=(0,l.Lk)("h2",null,"Fonts",-1)),(0,l.Lk)("div",Lr,[o[21]||(o[21]=(0,l.Lk)("h3",null,"Font voor titles",-1)),(0,l.Lk)("div",br,[(0,l.Lk)("div",wr,[(0,l.Lk)("h3",null,'Voorbeeld met "'+(0,d.v_)(b.value)+'"',1),(0,l.Lk)("h3",{style:(0,d.Tr)({fontFamily:b.value})}," This is an example of a title in "+(0,d.v_)(b.value)+". ",5)]),(0,l.Lk)("div",Cr,[o[20]||(o[20]=(0,l.Lk)("label",{for:"font-dropdown"},"Selecteer een font:",-1)),(0,l.bo)((0,l.Lk)("select",{id:"font-dropdown","onUpdate:modelValue":o[6]||(o[6]=e=>b.value=e),onChange:o[7]||(o[7]=e=>E(b.value,"title"))},[(0,l.Lk)("option",{value:"",disabled:"",selected:!b.value}," Selecteer een font ",8,_r),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)([...C.value,...Array.isArray(L.fonts)?L.fonts:[]],(e=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:e,style:(0,d.Tr)({fontFamily:e})},(0,d.v_)(e),13,Er)))),128))],544),[[t.u1,b.value]])])])]),(0,l.Lk)("div",Ir,[o[23]||(o[23]=(0,l.Lk)("h3",null,"Font voor tekst",-1)),(0,l.Lk)("div",Pr,[(0,l.Lk)("div",Tr,[(0,l.Lk)("h3",null,'Voorbeeld met "'+(0,d.v_)(w.value)+'"',1),(0,l.Lk)("p",{style:(0,d.Tr)({fontFamily:w.value})}," This is an example of body text in "+(0,d.v_)(w.value)+". ",5)]),(0,l.Lk)("div",Ar,[o[22]||(o[22]=(0,l.Lk)("label",{for:"font-dropdown"},"Selecteer een font:",-1)),(0,l.bo)((0,l.Lk)("select",{id:"font-dropdown","onUpdate:modelValue":o[8]||(o[8]=e=>w.value=e),onChange:o[9]||(o[9]=e=>E(w.value,"text"))},[(0,l.Lk)("option",{value:"",disabled:"",selected:!w.value}," Selecteer een font ",8,$r),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)([...C.value,...L.fonts.map((e=>e.name))],(e=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:e,style:(0,d.Tr)({fontFamily:e})},(0,d.v_)(e),13,xr)))),128))],544),[[t.u1,w.value]])])])])]),(0,l.Lk)("div",Sr,[o[26]||(o[26]=(0,l.Lk)("h2",null,"Images",-1)),(0,l.Lk)("div",Nr,[o[25]||(o[25]=(0,l.Lk)("h3",null,"Logo",-1)),(0,l.Lk)("div",Kr,[L.logo?((0,l.uX)(),(0,l.CE)("img",{key:0,src:L.logo,alt:"Logo",class:"logo"},null,8,Ur)):((0,l.uX)(),(0,l.CE)("div",Fr,[(0,l.Lk)("img",{src:Rr,alt:"Logo",class:"logo"})])),(0,l.Lk)("button",{onClick:o[10]||(o[10]=(...o)=>e.triggerLogoUpload&&e.triggerLogoUpload(...o)),class:"btn active"}," Upload Logo "),(0,l.Lk)("input",{ref:"logoInput",type:"file",accept:"image/*",onChange:o[11]||(o[11]=(...o)=>e.handleLogoUpload&&e.handleLogoUpload(...o)),style:{display:"none"}},null,544)])])])])])],64))}},Xr=(0,r.A)(Vr,[["__scopeId","data-v-32030646"]]),jr=Xr,Or={key:0,class:"overlay"},Dr={class:"content"},Br={key:0,class:"popup"},Jr={class:"menu"},zr={class:"btns"},qr={class:"search"},Mr={class:"search"},Qr={class:"users mobile"},Gr={class:"items"},Wr={class:"elements"},Hr={class:"text"},Zr={class:"name"},Yr={class:"users desktop"},es={class:"top"},os={key:0,class:"list"},as=["onChange","checked"],ts={key:1,class:"empty-state"},ls={__name:"UsersPage",setup(e){const o=(0,u.rd)(),a=(0,p.Kh)({firstName:"",lastName:"",email:"",newEmail:"",oldEmail:"",password:"",newPassword:"",oldPassword:"",newPasswordRepeat:"",country:"",city:"",postalCode:"",profilePicture:"",bio:"",role:"",activeUnactive:!0}),n=localStorage.getItem("jwtToken");n||o.push("/login");const r=e=>{if(!e)return null;const o=e.split(".")[1],a=JSON.parse(atob(o));return a},s=localStorage.getItem("jwtToken");s||o.push("/login");r(n);const i=r(s),c=i?.companyId,m=e=>{try{const o=e.split(".")[1],a=o.replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(a).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(t)}catch(o){return console.error("Error parsing JWT:",o),null}},k=m(n),f=k?.userId,h=k?.partnerId||null;f||o.push("/login");const y="localhost"!==window.location.hostname,L=y?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",b=(0,p.KR)(null),w=async()=>{try{const e=await v.A.get(`${L}/users/${f}`,{headers:{Authorization:`Bearer ${n}`}}),t=e.data?.data?.user||{};a.firstName=t.firstname||"",a.lastName=t.lastname||"",a.email=t.email||"",a.oldEmail=t.email||"",a.country=t.country||"",a.city=t.city||"",a.postalCode=t.postalCode||"",a.profilePicture=t.profilePicture||"",a.bio=t.bio||"",a.role=t.role||"",a.activeUnactive=t.activeUnactive??!0,"partner_admin"!==t.role&&"partner_owner"!==t.role&&o.push("/login")}catch(e){console.error("Error fetching user profile:",e)}},C=async()=>{if(h)try{const e=await v.A.get(`${L}/partners/${h}`,{headers:{Authorization:`Bearer ${n}`}}),o=e.data?.data?.partner||{};b.value=o.package||"No package available"}catch(e){console.error("Error fetching partner data:",e),b.value="Error loading partner data"}};(0,l.sV)((async()=>{await w(),await C()})),(0,l.Gt)("user",a),(0,l.wB)(a,(e=>{console.log("User data updated:",e)}),{deep:!0});const _=(0,p.KR)([]),E=(0,p.KR)(""),I=(0,p.KR)("All"),P=(0,p.KR)([]),T=(0,p.KR)(!1),A=(0,l.EW)((()=>P.value.length>0)),$=(0,l.EW)((()=>0===_.value.length)),x=async()=>{try{const e=localStorage.getItem("jwtToken"),o=m(e);if(!o)throw new Error("Invalid token or failed to decode token");const a=await fetch(`${L}/users`,{headers:{Authorization:`Bearer ${e}`}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const t=await a.json(),l=o?.role;if("platform_admin"===l)_.value=t.data.users;else{const e=t.data.users.filter((e=>{const o=e.partnerId===c;return o}));_.value=e}}catch(e){console.error("Error fetching data:",e)}},S=(0,l.EW)((()=>_.value?_.value.filter((e=>{const o=e.firstname.toLowerCase().includes(E.value.toLowerCase())||e.lastname.toLowerCase().includes(E.value.toLowerCase())||e.email.toLowerCase().includes(E.value.toLowerCase()),a="All"===I.value||e.role===I.value;return o&&a})):[])),N=e=>{P.value=e?S.value.map((e=>e._id)):[]},K=e=>{const o=P.value.indexOf(e);-1===o?P.value.push(e):P.value.splice(o,1)},U=async()=>{if(P.value.length)try{await Promise.all(P.value.map((async e=>{const o=await fetch(`${L}/users/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`)}))),await x(),P.value=[]}catch(e){console.error("Error deleting users:",e)}},F=()=>T.value=!0,R=()=>T.value=!1,V=async()=>{await U(),R()};return(0,l.sV)(x),(e,o)=>{const a=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),T.value?((0,l.uX)(),(0,l.CE)("div",Or)):(0,l.Q3)("",!0),(0,l.Lk)("div",Dr,[o[19]||(o[19]=(0,l.Lk)("h2",null,"Users",-1)),T.value?((0,l.uX)(),(0,l.CE)("div",Br,[o[7]||(o[7]=(0,l.Lk)("img",{src:Uo,alt:"icon"},null,-1)),(0,l.Lk)("div",{class:"text"},[o[5]||(o[5]=(0,l.Lk)("h2",null,"Are you sure?",-1)),o[6]||(o[6]=(0,l.Lk)("p",null,"Do you really want to delete this user?",-1)),(0,l.Lk)("div",{class:"btns"},[(0,l.Lk)("button",{onClick:R},"Cancel"),(0,l.Lk)("button",{onClick:V,class:"btn active"},"Delete")])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",Jr,[(0,l.Lk)("div",zr,[(0,l.bF)(a,{exact:"",to:"/admin/add-new-user",class:"btn active"},{default:(0,l.k6)((()=>o[8]||(o[8]=[(0,l.Lk)("p",null,"Add new",-1),(0,l.Lk)("img",{src:Fo,alt:"icon"},null,-1)]))),_:1}),(0,l.Lk)("div",{class:"btn display",style:(0,d.Tr)({display:A.value?"flex":"none"}),onClick:F},o[9]||(o[9]=[(0,l.Lk)("p",null,"Delete item(s)",-1)]),4)]),(0,l.Lk)("div",qr,[o[10]||(o[10]=(0,l.Lk)("img",{src:Ro,alt:"icon"},null,-1)),(0,l.bo)((0,l.Lk)("input",{placeholder:"Search","onUpdate:modelValue":o[0]||(o[0]=e=>E.value=e)},null,512),[[t.Jo,E.value]])]),(0,l.bo)((0,l.Lk)("select",{class:"filter","onUpdate:modelValue":o[1]||(o[1]=e=>I.value=e)},o[11]||(o[11]=[(0,l.Lk)("option",{value:"All"},"All",-1),(0,l.Lk)("option",{value:"admin"},"Admin",-1),(0,l.Lk)("option",{value:"user"},"User",-1)]),512),[[t.u1,I.value]])]),(0,l.Lk)("div",Mr,[o[12]||(o[12]=(0,l.Lk)("img",{src:Ro,alt:"icon"},null,-1)),(0,l.bo)((0,l.Lk)("input",{placeholder:"Search","onUpdate:modelValue":o[2]||(o[2]=e=>E.value=e)},null,512),[[t.Jo,E.value]])]),(0,l.Lk)("div",Qr,[(0,l.Lk)("div",Gr,[S.value&&S.value.length>0?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(S.value,(e=>((0,l.uX)(),(0,l.Wv)(a,{key:e._id,to:{name:"EditUser",params:{id:e._id}}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",Wr,[(0,l.Lk)("div",Hr,[(0,l.Lk)("p",Zr,(0,d.v_)(e.firstname)+" "+(0,d.v_)(e.lastname),1),(0,l.Lk)("p",null,(0,d.v_)(e.email),1),(0,l.Lk)("p",null,(0,d.v_)(e.role),1)]),(0,l.Lk)("div",{class:(0,d.C4)(["btn",{active:"active"===e.activeUnactive}])},[(0,l.Lk)("p",null,(0,d.v_)(e.activeUnactive),1)],2)])])),_:2},1032,["to"])))),128)):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",Yr,[(0,l.Lk)("div",es,[(0,l.Lk)("input",{type:"checkbox",onChange:o[3]||(o[3]=e=>N(e.target.checked))},null,32),o[13]||(o[13]=(0,l.Lk)("p",null,"First name",-1)),o[14]||(o[14]=(0,l.Lk)("p",null,"Last name",-1)),o[15]||(o[15]=(0,l.Lk)("p",null,"Email",-1)),o[16]||(o[16]=(0,l.Lk)("p",null,"Role",-1)),o[17]||(o[17]=(0,l.Lk)("p",null,"Status",-1))]),S.value&&S.value.length>0?((0,l.uX)(),(0,l.CE)("ul",os,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(S.value,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e._id},[(0,l.bF)(a,{to:{name:"EditUser",params:{id:e._id}},class:"user-link"},{default:(0,l.k6)((()=>[(0,l.Lk)("input",{type:"checkbox",onChange:o=>K(e._id),checked:P.value.includes(e._id),onClick:o[4]||(o[4]=(0,t.D$)((()=>{}),["stop"]))},null,40,as),(0,l.Lk)("p",null,(0,d.v_)(e.firstname),1),(0,l.Lk)("p",null,(0,d.v_)(e.lastname),1),(0,l.Lk)("p",null,(0,d.v_)(e.email),1),(0,l.Lk)("p",null,(0,d.v_)(e.role),1),(0,l.Lk)("p",null,(0,d.v_)(e.activeUnactive),1)])),_:2},1032,["to"])])))),128))])):$.value?((0,l.uX)(),(0,l.CE)("div",ts,o[18]||(o[18]=[(0,l.Lk)("p",null,"No users found matching the selected filters.",-1)]))):(0,l.Q3)("",!0)])])],64)}}},ns=(0,r.A)(ls,[["__scopeId","data-v-f2316310"]]),rs=ns,ss={class:"content"},is={class:"row"},cs={class:"column"},us={class:"column"},ds={class:"row"},ps={class:"column"},vs={class:"column"},ms={class:"row"},ks={class:"column"},gs={class:"column"},fs={class:"row"},hs={class:"column"},ys=["value"],Ls={class:"column"},bs={class:"row"},ws={class:"column"},Cs={class:"column"},_s={class:"row"},Es={class:"column"},Is={class:"column"},Ps={__name:"AddNewUserPage",setup(e){const o="localhost"!==window.location.hostname,a=o?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",n=localStorage.getItem("jwtToken"),r=(0,u.rd)();n||r.push("/login");const s=(0,p.KR)(""),i=(0,p.KR)(""),c=(0,p.KR)(""),v=(0,p.KR)(""),m=(0,p.KR)("customer"),k=(0,p.KR)("active"),f=(0,p.KR)(""),h=(0,p.KR)(""),y=(0,p.KR)(""),L=(0,p.KR)(""),b=(0,p.KR)(""),w=(0,p.KR)(""),C=(0,p.KR)([]),_=e=>{const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return o.test(e)};(0,l.sV)((async()=>{try{const e=await fetch(`${a}/partners`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}});if(!e.ok)throw new Error("Fout bij het ophalen van partners");const o=await e.json();C.value=o.data.partners||[]}catch(e){console.error("Error fetching partners:",e.message),alert("Er is een fout opgetreden bij het ophalen van de partners.")}}));const E=async()=>{if(s.value&&i.value&&c.value&&v.value&&m.value&&k.value)if(_(c.value))try{const e={user:{firstname:s.value,lastname:i.value,email:c.value,password:v.value,role:m.value,activeUnactive:k.value}};f.value&&(e.user.partner=f.value),h.value&&(e.user.country=h.value),y.value&&(e.user.city=y.value),L.value&&(e.user.postalCode=L.value),b.value&&(e.user.profileImage=b.value),w.value&&(e.user.bio=w.value);const o=await fetch(`${a}/users/signup`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(e)});if(!o.ok){const e=await o.json();throw new Error(`Fout bij het toevoegen van de gebruiker: ${e.message}`)}await o.json();r.push("/admin/users")}catch(e){console.error("Error adding user or creating house style:",e.message),alert("Er is een fout opgetreden bij het toevoegen van de gebruiker of het aanmaken van de huisstijl. Controleer de console voor details.")}else alert("Vul een geldig e-mailadres in.");else alert("Vul alle velden in.")};return(e,o)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),(0,l.Lk)("div",ss,[o[28]||(o[28]=(0,l.Lk)("h1",null,"Add new user",-1)),(0,l.Lk)("form",{onSubmit:(0,t.D$)(E,["prevent"])},[(0,l.Lk)("div",is,[(0,l.Lk)("div",cs,[o[12]||(o[12]=(0,l.Lk)("label",{for:"firstname"},"First Name:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.value=e),id:"firstname",type:"text",required:""},null,512),[[t.Jo,s.value]])]),(0,l.Lk)("div",us,[o[13]||(o[13]=(0,l.Lk)("label",{for:"lastname"},"Last Name:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>i.value=e),id:"lastname",type:"text",required:""},null,512),[[t.Jo,i.value]])])]),(0,l.Lk)("div",ds,[(0,l.Lk)("div",ps,[o[14]||(o[14]=(0,l.Lk)("label",{for:"email"},"Email:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>c.value=e),id:"email",type:"email",required:""},null,512),[[t.Jo,c.value]])]),(0,l.Lk)("div",vs,[o[15]||(o[15]=(0,l.Lk)("label",{for:"password"},"Password:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>v.value=e),id:"password",type:"password",required:""},null,512),[[t.Jo,v.value]])])]),(0,l.Lk)("div",ms,[(0,l.Lk)("div",ks,[o[17]||(o[17]=(0,l.Lk)("label",{for:"role"},"Role:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>m.value=e),id:"role",required:""},o[16]||(o[16]=[(0,l.Lk)("option",{value:"customer"},"Customer",-1),(0,l.Lk)("option",{value:"partner_admin"},"Partner Admin",-1),(0,l.Lk)("option",{value:"partner_owner"},"Partner Owner",-1),(0,l.Lk)("option",{value:"platform_admin"},"Platform Admin",-1)]),512),[[t.u1,m.value]])]),(0,l.Lk)("div",gs,[o[19]||(o[19]=(0,l.Lk)("label",{for:"status"},"Status:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":o[5]||(o[5]=e=>k.value=e),id:"status",required:""},o[18]||(o[18]=[(0,l.Lk)("option",{value:"active"},"Active",-1),(0,l.Lk)("option",{value:"inactive"},"Inactive",-1)]),512),[[t.u1,k.value]])])]),(0,l.Lk)("div",fs,[(0,l.Lk)("div",hs,[o[21]||(o[21]=(0,l.Lk)("label",{for:"partner"},"Partner (optioneel):",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":o[6]||(o[6]=e=>f.value=e),id:"partner"},[o[20]||(o[20]=(0,l.Lk)("option",{value:""},"Selecteer een partner",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(C.value,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e._id,value:e.name},(0,d.v_)(e.name),9,ys)))),128))],512),[[t.u1,f.value]])]),(0,l.Lk)("div",Ls,[o[22]||(o[22]=(0,l.Lk)("label",{for:"country"},"Country (optioneel):",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[7]||(o[7]=e=>h.value=e),id:"country",type:"text"},null,512),[[t.Jo,h.value]])])]),(0,l.Lk)("div",bs,[(0,l.Lk)("div",ws,[o[23]||(o[23]=(0,l.Lk)("label",{for:"city"},"City (optioneel):",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[8]||(o[8]=e=>y.value=e),id:"city",type:"text"},null,512),[[t.Jo,y.value]])]),(0,l.Lk)("div",Cs,[o[24]||(o[24]=(0,l.Lk)("label",{for:"postalCode"},"Postal Code (optioneel):",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[9]||(o[9]=e=>L.value=e),id:"postalCode",type:"text"},null,512),[[t.Jo,L.value]])])]),(0,l.Lk)("div",_s,[(0,l.Lk)("div",Es,[o[25]||(o[25]=(0,l.Lk)("label",{for:"profileImage"},"Profile Image URL (optioneel):",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[10]||(o[10]=e=>b.value=e),id:"profileImage",type:"text"},null,512),[[t.Jo,b.value]])]),(0,l.Lk)("div",Is,[o[26]||(o[26]=(0,l.Lk)("label",{for:"bio"},"Bio (optioneel):",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":o[11]||(o[11]=e=>w.value=e),id:"bio",rows:"4"},null,512),[[t.Jo,w.value]])])]),o[27]||(o[27]=(0,l.Lk)("button",{type:"submit",class:"btn active"},"Add user",-1))],32)])],64))}},Ts=(0,r.A)(Ps,[["__scopeId","data-v-5bf07f5f"]]),As=Ts,$s={class:"content"},xs={class:"row"},Ss={class:"column"},Ns={class:"column"},Ks={class:"column"},Us={class:"row"},Fs={class:"column"},Rs={class:"column"},Vs={class:"column"},Xs={class:"column"},js={class:"row"},Os={class:"column"},Ds={class:"column"},Bs={class:"row"},Js={class:"column"},zs={class:"column"},qs={__name:"EditUser",setup(e){const o="localhost"!==window.location.hostname,a=o?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",n=(0,u.lq)(),r=(0,u.rd)(),s=localStorage.getItem("jwtToken");s||r.push("/login");const i=(0,p.KR)(""),c=(0,p.KR)(""),d=(0,p.KR)(""),v=(0,p.KR)(""),m=(0,p.KR)("customer"),k=(0,p.KR)("active"),f=(0,p.KR)(""),h=(0,p.KR)(""),y=(0,p.KR)(""),L=(0,p.KR)(""),b=(0,p.KR)(""),w=(0,p.KR)(null),C=e=>{const o=e.target.files[0];w.value=o},_=(0,p.KR)(null),E=n.params.id,I=e=>{if(!e||"string"!==typeof e)return!1;const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return o.test(e)},P=async()=>{try{const e=await fetch(`${a}/users/${E}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const o=await e.json();_.value=o.data.user,_.value&&(i.value=_.value.firstname,c.value=_.value.lastname,d.value=_.value.email,m.value=_.value.role,k.value=_.value.activeUnactive,y.value=_.value.country,L.value=_.value.city,b.value=_.value.postalCode,w.value=_.value.profileImage,h.value=_.value.bio)}catch(e){console.error("Error fetching user data:",e)}};(0,l.sV)((()=>{P()}));const T=async()=>{if(i.value&&c.value&&d.value&&m.value&&k.value)if(I(d.value))try{const e={user:{firstname:i.value,lastname:c.value,email:d.value,password:v.value,role:m.value,activeUnactive:k.value,company:f.value,bio:h.value,country:y.value,city:L.value,postalCode:b.value}},o=await fetch(`${a}/users/${E}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(e)});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);await o.json();r.push("/admin/users")}catch(e){console.error("Error updating user:",e),alert("Er is een fout opgetreden bij het bijwerken van de gebruiker.")}else alert("Voer een geldig e-mailadres in.");else alert("Vul alle velden in.")};return(e,o)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),(0,l.Lk)("div",$s,[o[24]||(o[24]=(0,l.Lk)("h1",null,"Edit user",-1)),_.value?((0,l.uX)(),(0,l.CE)("form",{key:0,onSubmit:(0,t.D$)(T,["prevent"])},[(0,l.Lk)("div",xs,[(0,l.Lk)("div",Ss,[o[10]||(o[10]=(0,l.Lk)("label",{for:"firstname"},"Voornaam:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>i.value=e),id:"firstname",type:"text",required:""},null,512),[[t.Jo,i.value]])]),(0,l.Lk)("div",Ns,[o[11]||(o[11]=(0,l.Lk)("label",{for:"lastname"},"Achternaam:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>c.value=e),id:"lastname",type:"text",required:""},null,512),[[t.Jo,c.value]])])]),(0,l.Lk)("div",Ks,[o[12]||(o[12]=(0,l.Lk)("label",{for:"email"},"E-mail:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>d.value=e),id:"email",type:"email",required:""},null,512),[[t.Jo,d.value]])]),(0,l.Lk)("div",Us,[(0,l.Lk)("div",Fs,[o[14]||(o[14]=(0,l.Lk)("label",{for:"role"},"Rol:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":o[3]||(o[3]=e=>m.value=e),id:"role"},o[13]||(o[13]=[(0,l.Lk)("option",{value:"customer"},"Customer",-1),(0,l.Lk)("option",{value:"partner_admin"},"Partner Admin",-1),(0,l.Lk)("option",{value:"partner_owner"},"Partner Owner",-1),(0,l.Lk)("option",{value:"platform_admin"},"Platform Admin",-1)]),512),[[t.u1,m.value]])]),(0,l.Lk)("div",Rs,[o[16]||(o[16]=(0,l.Lk)("label",{for:"status"},"Status:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>k.value=e),id:"status"},o[15]||(o[15]=[(0,l.Lk)("option",{value:"active"},"Actief",-1),(0,l.Lk)("option",{value:"inactive"},"Inactief",-1)]),512),[[t.u1,k.value]])])]),(0,l.Lk)("div",Vs,[o[17]||(o[17]=(0,l.Lk)("label",{for:"company"},"Bedrijf:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>f.value=e),id:"company",type:"text"},null,512),[[t.Jo,f.value]])]),(0,l.Lk)("div",Xs,[o[18]||(o[18]=(0,l.Lk)("label",{for:"bio"},"Bio:",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":o[6]||(o[6]=e=>h.value=e),id:"bio",rows:"4"},null,512),[[t.Jo,h.value]])]),(0,l.Lk)("div",js,[(0,l.Lk)("div",Os,[o[19]||(o[19]=(0,l.Lk)("label",{for:"country"},"Land:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[7]||(o[7]=e=>y.value=e),id:"country",type:"text"},null,512),[[t.Jo,y.value]])]),(0,l.Lk)("div",Ds,[o[20]||(o[20]=(0,l.Lk)("label",{for:"city"},"Stad:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[8]||(o[8]=e=>L.value=e),id:"city",type:"text"},null,512),[[t.Jo,L.value]])])]),(0,l.Lk)("div",Bs,[(0,l.Lk)("div",Js,[o[21]||(o[21]=(0,l.Lk)("label",{for:"postalCode"},"Postcode:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[9]||(o[9]=e=>b.value=e),id:"postalCode",type:"text"},null,512),[[t.Jo,b.value]])]),(0,l.Lk)("div",zs,[o[22]||(o[22]=(0,l.Lk)("label",{for:"profileImage"},"Profielafbeelding:",-1)),(0,l.Lk)("input",{type:"file",id:"profileImage",onChange:C},null,32)])]),o[23]||(o[23]=(0,l.Lk)("button",{type:"submit",class:"btn active"},"Edit user",-1))],32)):(0,l.Q3)("",!0)])],64))}},Ms=(0,r.A)(qs,[["__scopeId","data-v-452ef1d1"]]),Qs=Ms,Gs={class:"content"},Ws={class:"row"},Hs={class:"column"},Zs={class:"row"},Ys={class:"column"},ei={key:0,class:"row"},oi={class:"column"},ai={key:1,class:"row"},ti={class:"column"},li={key:2},ni={class:"color-list"},ri={__name:"AddNewConfigurationPage",setup(e){const o="localhost"!==window.location.hostname,a=o?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",n=localStorage.getItem("jwtToken"),r=(0,u.rd)();n||r.push("/login");const s=(0,p.KR)(""),i=(0,p.KR)(""),c=(0,p.KR)(""),v=(0,p.KR)([]),m=(0,p.KR)(""),k=(0,p.KR)([]),f=()=>"_"+Math.random().toString(36).substr(2,9),h=()=>{if(m.value&&!k.value.includes(m.value)){const e=f();k.value.push({id:e,hex:m.value}),v.value.push(e),m.value=""}else console.error("De geselecteerde kleur heeft geen bijbehorende kleur-ID.")},y=async()=>{const e={fieldName:s.value,fieldType:i.value,options:"Color"===i.value?k.value.map((e=>e.hex)):v.value,isColor:"Color"===i.value};try{const o=await fetch(`${a}/configurations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(e)});if(!o.ok){const e=await o.json();throw console.error("Error from server:",e),new Error(`Fout bij het toevoegen van de configuratie: ${e.message}`)}await o.json();r.back()}catch(o){console.error("Error adding configuration:",o.message),alert("Er is een fout opgetreden bij het toevoegen van de configuratie.")}},L=()=>{v.value=c.value.split(",").map((e=>e.trim())).filter((e=>e))};return(e,o)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),(0,l.Lk)("div",Gs,[o[13]||(o[13]=(0,l.Lk)("h1",null,"Nieuwe Configuratie Toevoegen",-1)),(0,l.Lk)("form",{onSubmit:(0,t.D$)(y,["prevent"])},[(0,l.Lk)("div",Ws,[(0,l.Lk)("div",Hs,[o[4]||(o[4]=(0,l.Lk)("label",{for:"fieldName"},"Veldnaam:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.value=e),id:"fieldName",type:"text",required:""},null,512),[[t.Jo,s.value]])])]),(0,l.Lk)("div",Zs,[(0,l.Lk)("div",Ys,[o[6]||(o[6]=(0,l.Lk)("label",{for:"fieldType"},"Veldtype:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>i.value=e),id:"fieldType",required:""},o[5]||(o[5]=[(0,l.Lk)("option",{value:""},"Selecteer een veldtype",-1),(0,l.Lk)("option",{value:"Text"},"Tekst",-1),(0,l.Lk)("option",{value:"Dropdown"},"Dropdown",-1),(0,l.Lk)("option",{value:"Color"},"Kleur",-1)]),512),[[t.u1,i.value]])])]),"Dropdown"===i.value?((0,l.uX)(),(0,l.CE)("div",ei,[(0,l.Lk)("div",oi,[o[7]||(o[7]=(0,l.Lk)("label",{for:"options"},"Opties:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>c.value=e),id:"options",type:"text",placeholder:"Voer opties in, gescheiden door komma's",onInput:L},null,544),[[t.Jo,c.value]]),o[8]||(o[8]=(0,l.Lk)("small",null,"Bijv. Optie 1, Optie 2, Optie 3",-1))])])):(0,l.Q3)("",!0),"Color"===i.value?((0,l.uX)(),(0,l.CE)("div",ai,[(0,l.Lk)("div",ti,[o[9]||(o[9]=(0,l.Lk)("label",{for:"color"},"Kleur:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>m.value=e),id:"color",type:"color"},null,512),[[t.Jo,m.value]]),(0,l.Lk)("button",{type:"button",onClick:h},"Voeg Kleur Toe"),o[10]||(o[10]=(0,l.Lk)("small",null,"Selecteer een kleur voor de configuratie",-1))])])):(0,l.Q3)("",!0),"Color"===i.value&&k.value.length>0?((0,l.uX)(),(0,l.CE)("div",li,[o[11]||(o[11]=(0,l.Lk)("h4",null,"Geselecteerde Kleuren:",-1)),(0,l.Lk)("ul",ni,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(k.value,((e,o)=>((0,l.uX)(),(0,l.CE)("li",{key:o,style:(0,d.Tr)({backgroundColor:e.hex}),class:"color-circle"},(0,d.v_)(e.hex),5)))),128))])])):(0,l.Q3)("",!0),o[12]||(o[12]=(0,l.Lk)("button",{type:"submit",class:"btn active"},"Voeg Configuratie Toe",-1))],32)])],64))}},si=(0,r.A)(ri,[["__scopeId","data-v-ff5ef5de"]]),ii=si,ci={class:"content"},ui={class:"row"},di={class:"column"},pi={class:"row"},vi={class:"column"},mi={key:0,class:"row"},ki={class:"column"},gi={key:1,class:"row"},fi={class:"column"},hi={class:"column"},yi={class:"color-list"},Li={class:"row"},bi=["disabled"],wi={key:0},Ci={key:1},_i={__name:"EditConfigurationPage",setup(e){const o=(0,u.rd)(),a=(0,u.lq)(),n=localStorage.getItem("jwtToken"),r="localhost"!==window.location.hostname?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1";n||o.push("/login");const s=e=>{try{const o=e.split(".")[1],a=o.replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(a).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(t)}catch(o){return console.error("Error parsing JWT:",o),null}},i=s(n),c=i?.userId,m=i?.companyId||null;c||o.push("/login");const k=(0,p.KR)(""),f=(0,p.KR)(""),h=(0,p.KR)(""),y=(0,p.KR)(""),L=(0,p.Kh)([]),b=(0,p.Kh)([]),w=(0,p.KR)(!1),C=async e=>{try{const o=await v.A.get(`${r}/options/${e}`,{headers:{Authorization:`Bearer ${n}`}});return o.data?.data?.name||`Unknown (${e})`}catch(o){return console.error(`Error fetching option ${e}:`,o.message),`Unknown (${e})`}},_=()=>{b.splice(0,b.length,...h.value.split(",").map((e=>e.trim())).filter((e=>""!==e)))},E=async()=>{if(y.value)try{const e=await v.A.post(`${r}/options`,{name:y.value,type:"Color"},{headers:{Authorization:`Bearer ${n}`}}),o=e.data.data;L.push({name:y.value,colorCode:o._id}),y.value=""}catch(e){console.error("Error adding color:",e.message),alert("Failed to add color. Please try again.")}else alert("Please select a color.")},I=async()=>{if(!k.value.trim())return void alert("Field name cannot be empty.");if("Dropdown"===f.value&&0===b.length)return void alert("Please provide at least one option for the dropdown.");if("Color"===f.value&&0===L.length)return void alert("Please select at least one color.");const e=a.params.id,t={fieldName:k.value,fieldType:f.value,options:"Color"===f.value?L.map((e=>e.name)):b,..."Color"===f.value&&{isColor:!0}};m&&(t.partnerId=m);try{w.value=!0;await v.A.put(`${r}/configurations/${e}`,t,{headers:{Authorization:`Bearer ${n}`}});o.back()}catch(l){console.error("Error updating configuration:",l.message),alert("Failed to update configuration. Please try again.")}finally{w.value=!1}},P=async()=>{const e=a.params.id;if(!e)return alert("Configuration ID is missing."),void o.push("/configurations");try{const o=await v.A.get(`${r}/configurations/${e}`,{headers:{Authorization:`Bearer ${n}`}}),a=o.data?.data||{};if(k.value=a.fieldName||"",f.value=a.fieldType||"","Dropdown"===a.fieldType&&Array.isArray(a.options)){const e=await Promise.all(a.options.map((e=>C(e))));b.splice(0,b.length,...e),h.value=e.join(", ")}else if("Color"===a.fieldType){const e=await Promise.all(a.options.map((async e=>{const o=await C(e);return{name:o,colorCode:e}})));L.splice(0,L.length,...e),y.value=e[0]?.colorCode||""}}catch(t){console.error("Error fetching configuration:",t.message),alert("Failed to load configuration. Please try again.")}};return(0,l.sV)((()=>{P()})),(e,o)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),(0,l.Lk)("div",ci,[o[11]||(o[11]=(0,l.Lk)("h1",null,"Edit Configuration",-1)),(0,l.Lk)("form",{onSubmit:(0,t.D$)(I,["prevent"])},[(0,l.Lk)("div",ui,[(0,l.Lk)("div",di,[o[4]||(o[4]=(0,l.Lk)("label",{for:"fieldName"},"Field Name:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>k.value=e),id:"fieldName",type:"text",placeholder:"Enter field name",required:""},null,512),[[t.Jo,k.value]])])]),(0,l.Lk)("div",pi,[(0,l.Lk)("div",vi,[o[6]||(o[6]=(0,l.Lk)("label",{for:"fieldType"},"Field Type:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>f.value=e),id:"fieldType",required:""},o[5]||(o[5]=[(0,l.Lk)("option",{value:""},"Select field type",-1),(0,l.Lk)("option",{value:"Text"},"Text",-1),(0,l.Lk)("option",{value:"Dropdown"},"Dropdown",-1),(0,l.Lk)("option",{value:"Color"},"Color",-1)]),512),[[t.u1,f.value]])])]),"Dropdown"===f.value?((0,l.uX)(),(0,l.CE)("div",mi,[(0,l.Lk)("div",ki,[o[7]||(o[7]=(0,l.Lk)("label",{for:"options"},"Options:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>h.value=e),id:"options",type:"text",placeholder:"Enter options separated by commas",onInput:_},null,544),[[t.Jo,h.value]]),o[8]||(o[8]=(0,l.Lk)("small",null,"Example: Option 1, Option 2, Option 3",-1))])])):(0,l.Q3)("",!0),"Color"===f.value?((0,l.uX)(),(0,l.CE)("div",gi,[(0,l.Lk)("div",fi,[o[9]||(o[9]=(0,l.Lk)("label",{for:"color"},"Color:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>y.value=e),id:"color",type:"color",required:""},null,512),[[t.Jo,y.value]]),(0,l.Lk)("button",{type:"button",onClick:E},"Add Color")]),(0,l.Lk)("div",hi,[o[10]||(o[10]=(0,l.Lk)("label",null,"Current Colors:",-1)),(0,l.Lk)("ul",yi,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(L,((e,o)=>((0,l.uX)(),(0,l.CE)("li",{key:o,class:"color-item",style:(0,d.Tr)({backgroundColor:e.colorCode})},(0,d.v_)(e.name),5)))),128))])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",Li,[(0,l.Lk)("button",{type:"submit",disabled:w.value},[w.value?((0,l.uX)(),(0,l.CE)("span",wi,"Saving...")):((0,l.uX)(),(0,l.CE)("span",Ci,"Save Configuration"))],8,bi)])],32)])],64))}},Ei=(0,r.A)(_i,[["__scopeId","data-v-5ec094ce"]]),Ii=Ei,Pi={key:0,class:"overlay"},Ti={class:"content"},Ai={class:"publishWebsite"},$i={class:"elements"},xi={class:"column input"},Si={class:"input-container"},Ni={class:"column"},Ki=["disabled"],Ui={class:"publishedNotPublished"},Fi={class:"ourConfigurations"},Ri={key:0,class:"popup"},Vi={class:"elements"},Xi={class:"menu"},ji={class:"btns"},Oi={class:"search"},Di={class:"configurations"},Bi={class:"top"},Ji={class:"table-container"},zi=["checked","onChange"],qi={__name:"MyConfigurationsPage",setup(e){const o=(0,u.rd)(),a=(0,p.Kh)({firstName:"",lastName:"",email:"",newEmail:"",oldEmail:"",password:"",newPassword:"",oldPassword:"",newPasswordRepeat:"",country:"",city:"",postalCode:"",profilePicture:"",bio:"",role:"",activeUnactive:!0}),n=localStorage.getItem("jwtToken");n||o.push("/login");const r=e=>{try{const o=e.split(".")[1],a=o.replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(a).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(t)}catch(o){return console.error("Error parsing JWT:",o),null}},s=r(n),i=s?.userId,c=s?.companyId||null;i||o.push("/login");const m=(0,p.KR)(null),k="localhost"!==window.location.hostname,f=k?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1";(0,l.Gt)("user",a),(0,l.wB)(a,(e=>{console.log("User data updated:",e)}),{deep:!0});const h=(0,p.KR)(""),y=(0,p.KR)([]);i||o.push("/login");const L=(0,p.KR)(""),b=(0,l.EW)({get(){return L.value.replace(".rebilt.be","")},set(e){L.value=e+".rebilt.be"}}),w=(0,p.KR)([]),C=(0,p.KR)([]),_=(0,p.KR)(!1),E=(0,p.Kh)({}),I=(0,p.KR)(!1),P=(0,l.EW)((()=>{const e=L.value.trim(),o=e.split(".")[0],a=/^[a-z-]+$/,t=[".be",".com",".nl"];return/[A-Z]/.test(o)?{isValid:!1,message:"The domain name cannot contain uppercase letters."}:/\d/.test(o)?{isValid:!1,message:"The domain name cannot contain numbers."}:t.some((e=>o.includes(e)))?{isValid:!1,message:"The domain name cannot contain .be, .com, .nl."}:a.test(o)?{isValid:!0,message:""}:{isValid:!1,message:"The domain name must only contain lowercase letters and hyphens."}})),T=async()=>{try{const e=await v.A.get(`${f}/partners/`,{headers:{Authorization:`Bearer ${n}`}});return e.data&&"object"===typeof e.data?e.data.data.partners.map((e=>e.domain)):(console.error("Ongeldige API response structuur:",e),[])}catch(e){return console.error("❌ Error fetching partner domains:",e),[]}},A=async()=>{if(!c)return;const e=L.value.trim();let o=e;if(e.endsWith(".rebilt.be")||(o+=".rebilt.be"),!Array.isArray(y.value))return console.error("allDomains is not an array:",y.value),void(P.value={isValid:!1,message:"Error: Domain list is not valid."});if(y.value.includes(o))return void(P.value={isValid:!1,message:"Error: This domain name is already taken."});const a={name:h.value,package:m.value,domain:o};try{const e=await v.A.put(`${f}/partners/${c}`,a,{headers:{Authorization:`Bearer ${n}`}});200===e.status&&(P.value={isValid:!0,message:"Domain updated successfully."})}catch(t){console.error("Error updating domain:",t),P.value={isValid:!1,message:"Failed to update the domain."}}},$=async()=>{try{const e=await v.A.get(`${f}/users/${i}`,{headers:{Authorization:`Bearer ${n}`}}),o=e.data?.data?.user||{};a.firstName=o.firstname||"",a.lastName=o.lastname||"",a.email=o.email||"",a.oldEmail=o.email||"",a.country=o.country||"",a.city=o.city||"",a.postalCode=o.postalCode||"",a.profilePicture=o.profilePicture||"",a.bio=o.bio||"",a.role=o.role||"",a.activeUnactive=o.activeUnactive??!0}catch(e){console.error("Error fetching user profile:",e)}},x=async()=>{if(c)try{const e=await v.A.get(`${f}/partners/${c}`,{headers:{Authorization:`Bearer ${n}`}}),o=e.data?.data?.partner||{};h.value=o.name||"No name available",m.value=o.package||"No package available",L.value=o.domain||""}catch(e){console.error("Error fetching partner data:",e),m.value="Error loading partner data"}},S=async()=>{_.value=!0;try{const e=await v.A.get(`${f}/configurations`,{headers:{Authorization:`Bearer ${n}`}});w.value=e.data?.data||[]}catch(e){console.error("Error fetching configurations:",e),w.value=[]}finally{_.value=!1}},N=async()=>{_.value=!0;try{const[e,o]=await Promise.all([v.A.get(`${f}/partnerconfigurations`,{headers:{Authorization:`Bearer ${n}`}}),v.A.get(`${f}/options`,{headers:{Authorization:`Bearer ${n}`}})]),a=e.data?.data||[],t=o.data?.data||[];t.forEach((e=>{E[e._id]=e})),C.value=a.filter((e=>e.partnerId===c))}catch(e){console.error("Error fetching partner configurations or options:",e),C.value=[]}finally{_.value=!1}};(0,l.sV)((async()=>{await $(),await x(),await N(),await S(),I.value=!0,y.value=await T()}));const K=(0,p.KR)([]),U=(0,p.KR)(""),F=e=>{K.value=e?C.value.map((e=>e._id)):[]},R=e=>{const o=K.value.indexOf(e);-1===o?K.value.push(e):K.value.splice(o,1)},V=(0,p.KR)(!1),X=()=>{V.value=!0},j=()=>{V.value=!1},O=async()=>{if(I.value)try{const e=K.value.length>0?K.value:C.value.map((e=>e._id));for(const o of e){const e=C.value.find((e=>e._id===o));if(!e){console.error(`Configuration with ID ${o} not found in partner configurations.`);continue}const a=await v.A.delete(`${f}/partnerConfigurations/${o}`,{headers:{Authorization:`Bearer ${n}`}});if(200!==a.status)throw new Error(`Failed to delete configuration with ID ${o}`);C.value=C.value.filter((e=>e._id!==o)),w.value=w.value.filter((e=>e._id!==o))}K.value=[],j()}catch(e){console.error("Error deleting configurations:",e),alert("An error occurred while trying to delete configurations.")}else console.error("Data is still loading. Please try again later.")},D=e=>w.value.find((o=>o._id===e.configurationId))||{},B=e=>Array.isArray(e)&&0!==e.length?e.map((e=>E[e]?.name||"Unknown option")).join(", "):"No options";return(e,o)=>{const a=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),V.value?((0,l.uX)(),(0,l.CE)("div",Pi)):(0,l.Q3)("",!0),(0,l.Lk)("div",Ti,[(0,l.Lk)("div",Ai,[o[5]||(o[5]=(0,l.Lk)("h2",null,"Publish website",-1)),(0,l.Lk)("div",$i,[(0,l.Lk)("div",xi,[o[4]||(o[4]=(0,l.Lk)("label",{for:"website"},"Domain:",-1)),(0,l.Lk)("div",Si,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>b.value=e),placeholder:"your-domain"},null,512),[[t.Jo,b.value]]),o[3]||(o[3]=(0,l.Lk)("span",{class:"suffix"},".rebilt.be",-1))]),(0,l.Lk)("span",{class:(0,d.C4)({"error-message":!P.value.isValid,hidden:P.value.isValid})},(0,d.v_)(P.value.message||"No errors yet"),3)]),(0,l.Lk)("div",Ni,[(0,l.Lk)("button",{onClick:A,class:"btn active",disabled:!P.value.isValid}," Publish Domain ",8,Ki),(0,l.Lk)("div",Ui,[(0,l.Lk)("div",{class:"bullet",style:(0,d.Tr)({backgroundColor:P.value.isValid?"#53e971":"red"})},null,4),(0,l.Lk)("span",{style:(0,d.Tr)({color:P.value.isValid?"#53e971":"red"})},(0,d.v_)(P.value.isValid?"Published":"Not published"),5)])])])]),(0,l.Lk)("div",Fi,[o[14]||(o[14]=(0,l.Lk)("h2",null,"Our configurations",-1)),V.value?((0,l.uX)(),(0,l.CE)("div",Ri,[o[6]||(o[6]=(0,l.Lk)("h2",null,"Are you sure?",-1)),o[7]||(o[7]=(0,l.Lk)("p",null,"Do you really want to delete the selected item(s)?",-1)),(0,l.Lk)("div",{class:"popup-buttons"},[(0,l.Lk)("button",{onClick:j},"Cancel"),(0,l.Lk)("button",{onClick:O,class:"btn active"},"Delete")])])):(0,l.Q3)("",!0),(0,l.Lk)("div",Vi,[(0,l.Lk)("div",Xi,[(0,l.Lk)("div",ji,[(0,l.bF)(a,{to:"/admin/settings",class:"btn active"},{default:(0,l.k6)((()=>o[8]||(o[8]=[(0,l.Lk)("p",null,[(0,l.eW)("Add New "),(0,l.Lk)("img",{src:Fo,alt:"icon"})],-1)]))),_:1}),(0,l.Lk)("div",{class:"btn display",style:(0,d.Tr)({visibility:K.value.length>0?"visible":"hidden"}),onClick:X},o[9]||(o[9]=[(0,l.Lk)("p",null,"Delete item(s)",-1)]),4)]),(0,l.Lk)("div",Oi,[o[10]||(o[10]=(0,l.Lk)("img",{src:Ro,alt:"icon"},null,-1)),(0,l.bo)((0,l.Lk)("input",{placeholder:"Search","onUpdate:modelValue":o[1]||(o[1]=e=>U.value=e)},null,512),[[t.Jo,U.value]])])]),(0,l.Lk)("div",Di,[(0,l.Lk)("div",Bi,[(0,l.Lk)("input",{type:"checkbox",onChange:o[2]||(o[2]=e=>F(e.target.checked))},null,32),o[11]||(o[11]=(0,l.Lk)("p",null,"Field Name",-1)),o[12]||(o[12]=(0,l.Lk)("p",null,"Type",-1)),o[13]||(o[13]=(0,l.Lk)("p",null,"Options",-1))]),(0,l.Lk)("div",Ji,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(C.value,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e._id,class:"listItem"},[(0,l.Lk)("input",{type:"checkbox",checked:K.value.includes(e._id),onChange:o=>R(e._id)},null,40,zi),(0,l.bF)(a,{to:{name:"EditConfiguration",params:{id:e.configurationId},query:{partnerId:e.partnerId}}},{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,(0,d.v_)(D(e)?.fieldName||"No name"),1)])),_:2},1032,["to"]),(0,l.Lk)("p",null,(0,d.v_)(D(e)?.fieldType||"No type"),1),(0,l.Lk)("p",null,(0,d.v_)(B(D(e)?.options)||"No options"),1)])))),128))])])])])])],64)}}},Mi=(0,r.A)(qi,[["__scopeId","data-v-2e116ee9"]]),Qi=Mi,Gi={class:"content"},Wi={key:0,class:"popup"},Hi={class:"menu"},Zi={class:"btns"},Yi={class:"search"},ec={class:"configurations"},oc={class:"top"},ac=["checked"],tc={class:"table-container"},lc=["checked","onChange"],nc={key:0,class:"no-data"},rc={__name:"ManageConfigurationsPage",setup(e){const o=(0,u.rd)(),a=(0,p.Kh)({firstName:"",lastName:"",email:"",newEmail:"",oldEmail:"",password:"",newPassword:"",oldPassword:"",newPasswordRepeat:"",country:"",city:"",postalCode:"",profilePicture:"",bio:"",role:"",activeUnactive:!0}),n=localStorage.getItem("jwtToken");n||o.push("/login");const r=e=>{if(!e)return null;const o=e.split(".")[1],a=JSON.parse(atob(o));return a},s=localStorage.getItem("jwtToken");s||o.push("/login");r(n),r(s);const i=e=>{try{const o=e.split(".")[1],a=o.replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(a).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(t)}catch(o){return console.error("Error parsing JWT:",o),null}},c=i(n),m=c?.userId,k=c?.partnerId||null;m||o.push("/login");const f="localhost"!==window.location.hostname,h=f?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",y=(0,p.KR)(null),L=async()=>{try{const e=await v.A.get(`${h}/users/${m}`,{headers:{Authorization:`Bearer ${n}`}}),o=e.data?.data?.user||{};a.firstName=o.firstname||"",a.lastName=o.lastname||"",a.email=o.email||"",a.oldEmail=o.email||"",a.country=o.country||"",a.city=o.city||"",a.postalCode=o.postalCode||"",a.profilePicture=o.profilePicture||"",a.bio=o.bio||"",a.role=o.role||"",a.activeUnactive=o.activeUnactive??!0}catch(e){console.error("Error fetching user profile:",e)}},b=async()=>{if(k)try{const e=await v.A.get(`${h}/partners/${k}`,{headers:{Authorization:`Bearer ${n}`}}),o=e.data?.data?.partner||{};y.value=o.package||"No package available"}catch(e){console.error("Error fetching partner data:",e),y.value="Error loading partner data"}};(0,l.sV)((async()=>{await L(),await b()})),(0,l.Gt)("user",a);const w=(0,p.KR)([]),C=(0,p.KR)([]),_=(0,p.KR)([]),E=(0,p.KR)(""),I=(0,p.KR)(!1),P=(0,l.EW)((()=>C.value.length>0)),T=async()=>{try{const e=await v.A.get(`${h}/configurations`,{headers:{Authorization:`Bearer ${n}`}});w.value=e.data?.data||[],A()}catch(e){console.error("Error fetching configurations:",e)}},A=async()=>{try{const e=await v.A.get(`${h}/options`,{headers:{Authorization:`Bearer ${n}`}});_.value=e.data?.data||[]}catch(e){console.error("Error fetching options:",e)}},$=(0,l.EW)((()=>{const e=E.value.toLowerCase();return w.value.filter((o=>Object.values(o).join(" ").toLowerCase().includes(e)))})),x=e=>{const o=C.value.indexOf(e);o>-1?C.value.splice(o,1):C.value.push(e)},S=()=>{C.value.length===w.value.length?C.value=[]:C.value=w.value.map((e=>e._id))},N=e=>{const o=_.value.find((o=>o._id===e));return o?o.name:"Unknown"},K=()=>{I.value=!0},U=()=>{I.value=!1},F=async()=>{if(0!==C.value.length)try{for(const e of C.value)await v.A.delete(`${h}/configurations/${e}`,{headers:{Authorization:`Bearer ${n}`}});await T(),C.value=[]}catch(e){console.error("Error deleting configurations:",e)}};return(0,l.sV)((()=>{T()})),(e,o)=>{const a=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),(0,l.Lk)("div",Gi,[I.value?((0,l.uX)(),(0,l.CE)("div",Wi,[o[3]||(o[3]=(0,l.Lk)("img",{src:Uo,alt:"icon"},null,-1)),(0,l.Lk)("div",{class:"text"},[o[1]||(o[1]=(0,l.Lk)("h2",null,"Are you sure?",-1)),o[2]||(o[2]=(0,l.Lk)("p",null,"Do you really want to delete this item(s)?",-1)),(0,l.Lk)("div",{class:"btns"},[(0,l.Lk)("button",{onClick:U},"Cancel"),(0,l.Lk)("button",{onClick:F,class:"btn active"}," Delete ")])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",Hi,[(0,l.Lk)("div",Zi,[(0,l.bF)(a,{to:"/admin/add-new-configuration",class:"btn active"},{default:(0,l.k6)((()=>o[4]||(o[4]=[(0,l.eW)(" Add New "),(0,l.Lk)("img",{src:Fo,alt:"icon"},null,-1)]))),_:1}),(0,l.Lk)("div",{class:"btn display",style:(0,d.Tr)({visibility:P.value?"visible":"hidden"}),onClick:K},o[5]||(o[5]=[(0,l.Lk)("p",null,"Delete item(s)",-1)]),4)]),(0,l.Lk)("div",Yi,[o[6]||(o[6]=(0,l.Lk)("img",{src:Ro,alt:"icon"},null,-1)),(0,l.bo)((0,l.Lk)("input",{placeholder:"Search","onUpdate:modelValue":o[0]||(o[0]=e=>E.value=e)},null,512),[[t.Jo,E.value]])])]),(0,l.Lk)("div",ec,[(0,l.Lk)("div",oc,[(0,l.Lk)("input",{type:"checkbox",onChange:S,checked:C.value.length===w.value.value?.length},null,40,ac),o[7]||(o[7]=(0,l.Lk)("p",null,"Field Name",-1)),o[8]||(o[8]=(0,l.Lk)("p",null,"Type",-1)),o[9]||(o[9]=(0,l.Lk)("p",null,"Options",-1)),o[10]||(o[10]=(0,l.Lk)("p",null,"Partner ID",-1))]),(0,l.Lk)("div",tc,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)($.value,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e._id,class:"listItem"},[(0,l.Lk)("input",{type:"checkbox",checked:C.value.includes(e._id),onChange:o=>x(e._id)},null,40,lc),(0,l.bF)(a,{to:{name:"EditConfiguration",params:{id:e._id},query:{partnerId:e.partnerId}}},{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,(0,d.v_)(e.fieldName),1),(0,l.Lk)("p",null,(0,d.v_)(e.fieldType),1),(0,l.Lk)("p",null,(0,d.v_)(e.options&&Array.isArray(e.options)?e.options.map(N).join(", "):""),1),(0,l.Lk)("p",null,(0,d.v_)(e.partnerId||"None"),1)])),_:2},1032,["to"])])))),128))]),$.value.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",nc," No configurations found. "))])])],64)}}},sc=(0,r.A)(rc,[["__scopeId","data-v-73694da4"]]),ic=sc,cc=a.p+"img/paintbrush.015bd336.svg",uc=a.p+"img/check-circle.d372be9b.svg",dc={class:"content"},pc={class:"top"},vc={class:"elements"},mc={class:"menu"},kc={key:0,class:"myProfile"},gc={class:"info"},fc={class:"pictureWithText"},hc={class:"personalInformation"},yc={class:"fields"},Lc={class:"column"},bc={class:"column"},wc={class:"column"},Cc={class:"address"},_c={class:"fields"},Ec={class:"column"},Ic={class:"column"},Pc={class:"column"},Tc={key:1,class:"account"},Ac={class:"accountElements"},$c={class:"column"},xc={class:"row"},Sc={key:2,class:"configurations"},Nc={key:0},Kc={key:1,class:"configurationsItems"},Uc=["onUpdate:modelValue","id","checked"],Fc=["for"],Rc={class:"frameBtn"},Vc={key:3,class:"subscription"},Xc={class:"subscriptionElements"},jc={key:0,class:"column"},Oc={class:"row"},Dc={key:0,class:"popup"},Bc={class:"popup-content"},Jc={class:"fields"},zc={class:"row"},qc={class:"column"},Mc={class:"column"},Qc={class:"row"},Gc={class:"column"},Wc={class:"column"},Hc={class:"row"},Zc={class:"column"},Yc={class:"column"},eu={class:"column"},ou={class:"column"},au={key:0,class:"popup"},tu={class:"popup-content"},lu={class:"fields"},nu={class:"column"},ru={class:"column"},su={key:0,class:"popup"},iu={class:"popup-content"},cu={class:"fields"},uu={class:"column"},du={class:"column"},pu={class:"column"},vu={key:0,class:"popup"},mu={class:"popup-content"},ku={class:"row"},gu={class:"fields"},fu={class:"column"},hu=["selected"],yu=["selected"],Lu=["selected"],bu={class:"errorMessage"},wu={key:0,class:"deletePopup"},Cu={key:0,class:"popup"},_u={key:0,class:"popup"},Eu={key:0,class:"popup"},Iu={class:"successpopup"},Pu={class:"text"},Tu={__name:"SettingsPage",setup(e){const o=(0,u.rd)(),a=(0,p.Kh)({firstName:"",lastName:"",email:"",newEmail:"",oldEmail:"",password:"",newPassword:"",oldPassword:"",newPasswordRepeat:"",country:"",city:"",postalCode:"",profilePicture:"",bio:"",role:"",activeUnactive:!0}),n=localStorage.getItem("jwtToken");n||o.push("/login");const r=e=>{const o=e.split(".")[1],a=o.replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(a).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(t)},s=r(n),i=s?.userId,c=s?.companyId,m=(0,p.KR)(!1),k=()=>{m.value=!0};i||o.push("/login");const f="localhost"!==window.location.hostname,h=f?"https://rebilt-backend.onrender.com/api/v1":"http://localhost:3000/api/v1",y=(0,p.KR)([]),L=(0,p.KR)([]),b=(0,p.KR)([]),w=e=>{const o=new Set(L.value.map((e=>e._id)));return o.has(e)},C=async()=>{try{const e=await v.A.get(`${h}/configurations`,{headers:{Authorization:`Bearer ${n}`}});y.value=e.data?.data||[],await _()}catch(e){console.error("Error fetching all configurations:",e)}},_=async()=>{if(c)try{const e=await v.A.get(`${h}/partnerConfigurations`,{headers:{Authorization:`Bearer ${n}`},params:{partnerId:c}});L.value=e.data?.data||[];const o=new Set(L.value.map((e=>e.configurationId)));b.value=y.value.map((e=>{const a=o.has(e._id);return{...e,checked:a,disabled:!o.has(e._id)}}))}catch(e){console.error("Error fetching partner configurations:",e)}},E=async()=>{try{const e=b.value.map((async e=>{const o={partnerId:c,configurationId:e._id,options:e.options||{}};if(c===e._id)return void alert("PartnerId en ConfigurationId kunnen niet hetzelfde zijn!");const a=L.value.find((o=>o.configurationId===e._id&&o.partnerId===c));if(e.checked){if(!a)return v.A.post(`${h}/partnerConfigurations`,o,{headers:{Authorization:`Bearer ${n}`}}).then((e=>{console.log("Config toegevoegd:",e.data)})).catch((e=>{console.error("Fout bij toevoegen configuratie:",e.response?e.response.data:e)}))}else if(a)return v.A.delete(`${h}/partnerConfigurations/${a._id}`,{headers:{Authorization:`Bearer ${n}`}}).then((e=>{console.log("Config verwijderd:",e.data)})).catch((e=>{console.error("Fout bij verwijderen configuratie:",e.response?e.response.data:e)}))}));await Promise.all(e),alert("Configuraties zijn succesvol opgeslagen!"),m.value=!1,b.value.forEach((e=>{e.originalChecked=e.checked})),await _()}catch(e){console.error("Error saving updated configurations:",e),alert("Er is een fout opgetreden bij het opslaan van de configuraties.")}};(0,l.sV)((()=>{C()})),(0,l.Gt)("partnerId",c);const I=(0,p.KR)("My profile"),P=(0,p.KR)(!1),T=(0,p.KR)(!1),A=(0,p.KR)(!1),$=(0,p.KR)(!1),x=(0,p.KR)(!1),S=(0,p.KR)(!1),N=(0,p.KR)(!1),K=(0,p.KR)(!1),U=(0,p.KR)(null),F=e=>{I.value=e},R=async()=>{try{const e=await v.A.get(`${h}/users/${i}`,{headers:{Authorization:`Bearer ${n}`}}),o=e.data?.data?.user||{};a.firstName=o.firstname||"",a.lastName=o.lastname||"",a.email=o.email||"",a.oldEmail=o.email||"",a.country=o.country||"",a.city=o.city||"",a.postalCode=o.postalCode||"",a.profilePicture=o.profilePicture||"",a.bio=o.bio||"",a.role=o.role||"",a.activeUnactive=o.activeUnactive??!0}catch(e){console.error("Error fetching user profile:",e)}},V=async()=>{if(c)try{const e=await v.A.get(`${h}/partners/${c}`,{headers:{Authorization:`Bearer ${n}`}}),o=e.data?.data?.partner||{};U.value=o.package||"No package available"}catch(e){console.error("Error fetching partner data:",e),U.value="Error loading partner data"}},X=async()=>{try{if(!a.firstName||!a.lastName||!a.email)throw new Error("First Name, Last Name, and Email are required fields.");const e=await v.A.put(`${h}/users/${i}`,{user:{firstname:a.firstName,lastname:a.lastName,email:a.email,password:a.password,role:a.role,activeUnactive:a.activeUnactive,country:a.country,city:a.city,postalCode:a.postalCode,profileImage:a.profilePicture,bio:a.bio}},{headers:{Authorization:`Bearer ${n}`}});if(200!==e.status)throw new Error(`Unexpected response status: ${e.status}`);J(),H(),await R()}catch(e){console.error("Error updating profile:",e),e.response&&console.error("Server responded with error:",e.response.data)}},j=async()=>{try{await v.A.put(`${h}/users/${i}`,{user:{email:a.newEmail}},{headers:{Authorization:`Bearer ${n}`}});q(),Z(),await R()}catch(e){console.error("Error updating email:",e)}},O=async()=>{try{if(!a.oldPassword||!a.newPassword||!a.newPasswordRepeat)throw new Error("Please enter the old password, the new password, and the repetition of the new password.");if(a.newPassword!==a.newPasswordRepeat)throw new Error("The new password and the repetition of the new password do not match.");await v.A.put(`${h}/users/${i}`,{user:{oldPassword:a.oldPassword,newPassword:a.newPassword}},{headers:{Authorization:`Bearer ${n}`}});Q(),Y()}catch(e){console.error("Error updating password:",e)}},D=async()=>{try{await v.A.delete(`${h}/users/${i}`,{headers:{Authorization:`Bearer ${n}`}}),localStorage.removeItem("jwtToken"),o.push("/login")}catch(e){console.error("Error deleting account:",e)}},B=()=>P.value=!0,J=()=>P.value=!1,z=()=>T.value=!0,q=()=>T.value=!1,M=()=>A.value=!0,Q=()=>A.value=!1,G=()=>x.value=!0,W=()=>x.value=!1,H=()=>S.value=!0,Z=()=>N.value=!0,Y=()=>K.value=!0,ee=()=>S.value=!1,oe=()=>N.value=!1;return(0,l.sV)((async()=>{await R(),await V()})),(0,l.Gt)("user",a),(0,l.wB)(a,(e=>{console.log("User data updated:",e)}),{deep:!0}),(0,l.wB)(b,(e=>{const o=e.reduce(((e,o)=>(e[o._id]=o.checked,e)),{});localStorage.setItem("selectedConfigurations",JSON.stringify(o));const a=e.some(((e,o)=>e.checked!==b.value[o]?.checked));m.value=a}),{deep:!0}),(e,o)=>{const n=(0,l.g2)("font-awesome-icon");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g),(0,l.bF)(pa),(0,l.Lk)("div",dc,[(0,l.Lk)("div",pc,[o[22]||(o[22]=(0,l.Lk)("h1",null,"Settings",-1)),(0,l.bF)(n,{icon:"caret-right"})]),(0,l.Lk)("div",vc,[(0,l.Lk)("div",mc,[(0,l.Lk)("p",{class:(0,d.C4)({active:"My profile"===I.value}),onClick:o[0]||(o[0]=e=>F("My profile"))}," My profile ",2),(0,l.Lk)("p",{class:(0,d.C4)({active:"Login settings"===I.value}),onClick:o[1]||(o[1]=e=>F("Login settings"))}," Login settings ",2),"partner_owner"===a.role||"partner_admin"===a.role?((0,l.uX)(),(0,l.CE)("p",{key:0,class:(0,d.C4)({active:"configurations"===I.value}),onClick:o[2]||(o[2]=e=>F("configurations"))}," Configurations ",2)):(0,l.Q3)("",!0),"partner_admin"===a.role&&U.value?((0,l.uX)(),(0,l.CE)("p",{key:1,class:(0,d.C4)({active:"Subscription"===I.value}),onClick:o[3]||(o[3]=e=>F("Subscription")),role:"button",tabindex:"0"}," Subscription ",2)):(0,l.Q3)("",!0)]),"My profile"===I.value?((0,l.uX)(),(0,l.CE)("div",kc,[(0,l.Lk)("div",{class:"row"},[o[24]||(o[24]=(0,l.Lk)("h2",{class:"border",style:{visibility:"hidden"}},"My profile",-1)),(0,l.Lk)("button",{onClick:B,class:"btn"},o[23]||(o[23]=[(0,l.Lk)("img",{src:cc,alt:"icon"},null,-1),(0,l.Lk)("p",null,"Edit",-1)]))]),(0,l.Lk)("div",gc,[(0,l.Lk)("div",fc,[o[25]||(o[25]=(0,l.Lk)("div",{class:"profilePicture"},null,-1)),(0,l.Lk)("div",null,[(0,l.Lk)("h3",null,(0,d.v_)(a.firstName)+" "+(0,d.v_)(a.lastName),1),(0,l.Lk)("p",null,(0,d.v_)(a.bio?a.bio:a.role),1)])])]),(0,l.Lk)("div",hc,[o[29]||(o[29]=(0,l.Lk)("h3",null,"Personal Information",-1)),(0,l.Lk)("div",yc,[(0,l.Lk)("div",Lc,[o[26]||(o[26]=(0,l.Lk)("label",null,"First name",-1)),(0,l.Lk)("p",null,(0,d.v_)(a.firstName),1)]),(0,l.Lk)("div",bc,[o[27]||(o[27]=(0,l.Lk)("label",null,"Last name",-1)),(0,l.Lk)("p",null,(0,d.v_)(a.lastName),1)]),(0,l.Lk)("div",wc,[o[28]||(o[28]=(0,l.Lk)("label",null,"Email address",-1)),(0,l.Lk)("p",null,(0,d.v_)(a.email),1)])])]),(0,l.Lk)("div",Cc,[o[33]||(o[33]=(0,l.Lk)("h3",null,"Address",-1)),(0,l.Lk)("div",_c,[(0,l.Lk)("div",Ec,[o[30]||(o[30]=(0,l.Lk)("label",null,"Country",-1)),(0,l.Lk)("p",null,(0,d.v_)(a.country),1)]),(0,l.Lk)("div",Ic,[o[31]||(o[31]=(0,l.Lk)("label",null,"City",-1)),(0,l.Lk)("p",null,(0,d.v_)(a.city),1)]),(0,l.Lk)("div",Pc,[o[32]||(o[32]=(0,l.Lk)("label",null,"Postal code",-1)),(0,l.Lk)("p",null,(0,d.v_)(a.postalCode),1)])])])])):(0,l.Q3)("",!0),"Login settings"===I.value?((0,l.uX)(),(0,l.CE)("div",Tc,[o[41]||(o[41]=(0,l.Lk)("h2",{class:"border"},"Account",-1)),(0,l.Lk)("div",Ac,[(0,l.Lk)("div",$c,[o[35]||(o[35]=(0,l.Lk)("h3",null,"Change email",-1)),(0,l.Lk)("div",xc,[(0,l.Lk)("p",null,(0,d.v_)(a.email),1),(0,l.Lk)("button",{onClick:z,class:"link"},o[34]||(o[34]=[(0,l.Lk)("p",null,"Change email",-1)]))])]),(0,l.Lk)("div",{class:"column"},[o[38]||(o[38]=(0,l.Lk)("h3",null,"Change password",-1)),(0,l.Lk)("div",{class:"row"},[o[37]||(o[37]=(0,l.Lk)("p",null,"••••••••",-1)),(0,l.Lk)("button",{onClick:M,class:"link"},o[36]||(o[36]=[(0,l.Lk)("p",null,"Change password",-1)]))])]),(0,l.Lk)("div",{class:"column"},[(0,l.Lk)("div",{class:"row"},[o[40]||(o[40]=(0,l.Lk)("h3",null,"Delete account",-1)),(0,l.Lk)("button",{onClick:G,class:"deletelink"},o[39]||(o[39]=[(0,l.Lk)("p",null,"Delete account",-1)]))])])])])):(0,l.Q3)("",!0),"configurations"===I.value?((0,l.uX)(),(0,l.CE)("div",Sc,[o[42]||(o[42]=(0,l.Lk)("h2",{class:"border"},"Configurations",-1)),b.value.length?((0,l.uX)(),(0,l.CE)("div",Kc,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(b.value,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e._id,class:"row"},[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":o=>e.checked=o,id:"config-"+e._id,onChange:k,checked:w(e._id)},null,40,Uc),[[t.lH,e.checked]]),(0,l.Lk)("label",{for:"config-"+e._id},(0,d.v_)(e.fieldName||"Naam niet beschikbaar"),9,Fc)])))),128))])):((0,l.uX)(),(0,l.CE)("div",Nc," Geen configuraties beschikbaar. ")),(0,l.Lk)("div",Rc,[m.value?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:E,class:"btn active"}," Save ")):(0,l.Q3)("",!0)])])):(0,l.Q3)("",!0),"Subscription"===I.value&&"partner_admin"===a.role?((0,l.uX)(),(0,l.CE)("div",Vc,[o[45]||(o[45]=(0,l.Lk)("h2",{class:"border"},"Subscription",-1)),(0,l.Lk)("div",Xc,[U.value?((0,l.uX)(),(0,l.CE)("div",jc,[o[44]||(o[44]=(0,l.Lk)("h3",null,"Package",-1)),(0,l.Lk)("div",Oc,[(0,l.Lk)("p",null,(0,d.v_)(U.value),1),(0,l.Lk)("button",{onClick:o[4]||(o[4]=(...o)=>e.openChangeSubscriptionPopup&&e.openChangeSubscriptionPopup(...o)),class:"link"},o[43]||(o[43]=[(0,l.Lk)("p",null,"Change subscription",-1)]))])])):(0,l.Q3)("",!0)])])):(0,l.Q3)("",!0)]),(0,l.bF)(t.eB,{name:"fade"},{default:(0,l.k6)((()=>[P.value?((0,l.uX)(),(0,l.CE)("div",Dc,[(0,l.Lk)("div",Bc,[(0,l.Lk)("div",{class:"row"},[(0,l.Lk)("span",{class:"close",onClick:J},"×"),o[46]||(o[46]=(0,l.Lk)("h2",null,"Edit Profile",-1))]),(0,l.Lk)("div",Jc,[(0,l.Lk)("div",zc,[(0,l.Lk)("div",qc,[o[47]||(o[47]=(0,l.Lk)("label",null,"First name",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>a.firstName=e),placeholder:"Voornaam"},null,512),[[t.Jo,a.firstName]])]),(0,l.Lk)("div",Mc,[o[48]||(o[48]=(0,l.Lk)("label",null,"Last name",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[6]||(o[6]=e=>a.lastName=e),placeholder:"Achternaam"},null,512),[[t.Jo,a.lastName]])])]),(0,l.Lk)("div",Qc,[(0,l.Lk)("div",Gc,[o[49]||(o[49]=(0,l.Lk)("label",null,"Email address",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[7]||(o[7]=e=>a.email=e),placeholder:"E-mail"},null,512),[[t.Jo,a.email]])]),(0,l.Lk)("div",Wc,[o[50]||(o[50]=(0,l.Lk)("label",null,"Country",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[8]||(o[8]=e=>a.country=e),placeholder:"Land"},null,512),[[t.Jo,a.country]])])]),(0,l.Lk)("div",Hc,[(0,l.Lk)("div",Zc,[o[51]||(o[51]=(0,l.Lk)("label",null,"City",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[9]||(o[9]=e=>a.city=e),placeholder:"Stad"},null,512),[[t.Jo,a.city]])]),(0,l.Lk)("div",Yc,[o[52]||(o[52]=(0,l.Lk)("label",null,"Postal code",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[10]||(o[10]=e=>a.postalCode=e),placeholder:"Postcode"},null,512),[[t.Jo,a.postalCode]])])]),(0,l.Lk)("div",eu,[o[53]||(o[53]=(0,l.Lk)("label",null,"Profile Picture URL",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[11]||(o[11]=e=>a.profilePicture=e),placeholder:"URL voor profielfoto"},null,512),[[t.Jo,a.profilePicture]])]),(0,l.Lk)("div",ou,[o[54]||(o[54]=(0,l.Lk)("label",null,"Bio",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":o[12]||(o[12]=e=>a.bio=e),placeholder:"Bio"},null,512),[[t.Jo,a.bio]])]),(0,l.Lk)("button",{onClick:X,class:"btn"},"Save")])])])):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(t.eB,{name:"fade"},{default:(0,l.k6)((()=>[T.value?((0,l.uX)(),(0,l.CE)("div",au,[(0,l.Lk)("div",tu,[(0,l.Lk)("div",{class:"row"},[(0,l.Lk)("span",{class:"close",onClick:q},"×"),o[55]||(o[55]=(0,l.Lk)("h2",null,"Change Email Address",-1))]),(0,l.Lk)("div",lu,[(0,l.Lk)("div",nu,[o[56]||(o[56]=(0,l.Lk)("label",null,"Old Email Address",-1)),(0,l.Lk)("p",null,(0,d.v_)(a.email),1)]),(0,l.Lk)("div",ru,[o[57]||(o[57]=(0,l.Lk)("label",null,"New Email Address",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[13]||(o[13]=e=>a.newEmail=e),placeholder:"example@mail.be"},null,512),[[t.Jo,a.newEmail]])]),(0,l.Lk)("button",{onClick:j,class:"btn"},"Save")])])])):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(t.eB,{name:"fade"},{default:(0,l.k6)((()=>[A.value?((0,l.uX)(),(0,l.CE)("div",su,[(0,l.Lk)("div",iu,[(0,l.Lk)("div",{class:"row"},[(0,l.Lk)("span",{class:"close",onClick:Q},"×"),o[58]||(o[58]=(0,l.Lk)("h2",null,"Change Password",-1))]),(0,l.Lk)("div",cu,[(0,l.Lk)("div",uu,[o[59]||(o[59]=(0,l.Lk)("label",null,"Old password",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[14]||(o[14]=e=>a.oldpassword=e),type:"password",placeholder:"••••••••"},null,512),[[t.Jo,a.oldpassword]])]),(0,l.Lk)("div",du,[o[60]||(o[60]=(0,l.Lk)("label",null,"New password",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[15]||(o[15]=e=>a.newpassword=e),type:"password",placeholder:"••••••••"},null,512),[[t.Jo,a.newpassword]])]),(0,l.Lk)("div",pu,[o[61]||(o[61]=(0,l.Lk)("label",null,"Repeat new password",-1)),(0,l.bo)((0,l.Lk)("input",{type:"password","onUpdate:modelValue":o[16]||(o[16]=e=>a.newPasswordRepeat=e),placeholder:"••••••••"},null,512),[[t.Jo,a.newPasswordRepeat]])]),o[62]||(o[62]=(0,l.Lk)("p",{class:"errorMessage"},null,-1))]),(0,l.Lk)("button",{class:"btn",onClick:o[17]||(o[17]=e=>O(a.oldpassword,a.newpassword))}," Save ")])])):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(t.eB,{name:"fade"},{default:(0,l.k6)((()=>[$.value?((0,l.uX)(),(0,l.CE)("div",vu,[(0,l.Lk)("div",mu,[(0,l.Lk)("div",ku,[(0,l.Lk)("span",{class:"close",onClick:o[18]||(o[18]=(...o)=>e.closeChangeSubscriptionPopup&&e.closeChangeSubscriptionPopup(...o))},"×"),o[63]||(o[63]=(0,l.Lk)("h2",null,"Change Subscription",-1))]),(0,l.Lk)("div",gu,[(0,l.Lk)("div",fu,[o[64]||(o[64]=(0,l.Lk)("label",null,"Package",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":o[19]||(o[19]=o=>e.selectedPackage=o)},[(0,l.Lk)("option",{value:"standard",selected:"standard"===e.selectedPackage}," Standard ",8,hu),(0,l.Lk)("option",{value:"plus",selected:"plus"===e.selectedPackage}," Plus ",8,yu),(0,l.Lk)("option",{value:"pro",selected:"pro"===e.selectedPackage}," Pro ",8,Lu)],512),[[t.u1,e.selectedPackage]])]),(0,l.Lk)("p",bu,(0,d.v_)(e.errorMessage),1)]),(0,l.Lk)("button",{class:"btn",onClick:o[20]||(o[20]=(...o)=>e.updateSubscription&&e.updateSubscription(...o))},"Save")])])):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(t.eB,{name:"fade"},{default:(0,l.k6)((()=>[x.value?((0,l.uX)(),(0,l.CE)("div",wu,[o[67]||(o[67]=(0,l.Lk)("img",{src:Uo,alt:"icon"},null,-1)),(0,l.Lk)("div",{class:"text"},[o[65]||(o[65]=(0,l.Lk)("h2",null,"Are you sure?",-1)),o[66]||(o[66]=(0,l.Lk)("p",null,"Do you really want to delete your account?",-1)),(0,l.Lk)("div",{class:"btns"},[(0,l.Lk)("button",{onClick:W},"Cancel"),(0,l.Lk)("button",{onClick:D,class:"btn active"}," Delete ")])])])):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(t.eB,{name:"fade"},{default:(0,l.k6)((()=>[S.value?((0,l.uX)(),(0,l.CE)("div",Cu,[(0,l.Lk)("div",{class:"successpopup"},[o[69]||(o[69]=(0,l.Lk)("img",{src:uc,alt:"icon"},null,-1)),(0,l.Lk)("div",{class:"text"},[o[68]||(o[68]=(0,l.Lk)("div",null,[(0,l.Lk)("h2",null,"Succesfully!"),(0,l.Lk)("p",null,"Your profile has been edited successfully.")],-1)),(0,l.Lk)("button",{onClick:ee,class:"btn active"}," OK ")])])])):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(t.eB,{name:"fade"},{default:(0,l.k6)((()=>[N.value?((0,l.uX)(),(0,l.CE)("div",_u,[(0,l.Lk)("div",{class:"successpopup"},[o[71]||(o[71]=(0,l.Lk)("img",{src:uc,alt:"icon"},null,-1)),(0,l.Lk)("div",{class:"text"},[o[70]||(o[70]=(0,l.Lk)("div",null,[(0,l.Lk)("h2",null,"Succesfully!"),(0,l.Lk)("p",null,"Your e-mail address has been changed.")],-1)),(0,l.Lk)("button",{onClick:oe,class:"btn active"}," OK ")])])])):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(t.eB,{name:"fade"},{default:(0,l.k6)((()=>[K.value?((0,l.uX)(),(0,l.CE)("div",Eu,[(0,l.Lk)("div",Iu,[o[73]||(o[73]=(0,l.Lk)("img",{src:uc,alt:"icon"},null,-1)),(0,l.Lk)("div",Pu,[o[72]||(o[72]=(0,l.Lk)("div",null,[(0,l.Lk)("h2",null,"Succesfully!"),(0,l.Lk)("p",null,"Your password has been changed.")],-1)),(0,l.Lk)("button",{onClick:o[21]||(o[21]=(...o)=>e.closeSuccessPasswordPopup&&e.closeSuccessPasswordPopup(...o)),class:"btn active"}," OK ")])])])):(0,l.Q3)("",!0)])),_:1})])],64)}}},Au=(0,r.A)(Tu,[["__scopeId","data-v-2538fbc6"]]),$u=Au,xu=(0,u.aE)({history:(0,u.LA)(),routes:[{path:"/",name:"Collections",component:Oe},{path:"/product/:productId",name:"DetailsProduct",component:Ko},{path:"/login",name:"Login",component:I},{path:"/forgotPassword",name:"ForgotPassword",component:K},{path:"/verificationCode",name:"VerificationCode",component:B},{path:"/newPassword",name:"NewPassword",component:Z},{path:"/admin",name:"Home",component:Fa},{path:"/admin/add-new-product",name:"AddNewProduct",component:Zt},{path:"/admin/edit-product/:id",name:"EditProduct",component:_l},{path:"/admin/partners",name:"Partners",component:ql},{path:"/admin/add-new-partner",name:"AddNewPartner",component:un},{path:"/admin/edit-partner/:id",name:"EditPartner",component:Pn},{path:"/admin/orders",name:"Orders",component:qn},{path:"/admin/edit-order/:id",name:"EditOrder",component:ar},{path:"/admin/styling",name:"Styling",component:jr},{path:"/admin/users",name:"Users",component:rs},{path:"/admin/edit-user/:id",name:"EditUser",component:Qs},{path:"/admin/add-new-user",name:"AddNewUser",component:As},{path:"/admin/settings",name:"Settings",component:$u},{path:"/admin/manageconfigurations",name:"ManageConfigurations",component:ic},{path:"/admin/myconfigurations",name:"MyConfigurations",component:Qi},{path:"/admin/add-new-configuration",name:"AddNewConfiguration",component:ii},{path:"/admin/edit-configuration/:id",name:"EditConfiguration",component:Ii}]});var Su=a(445);(0,t.Ef)(c).use(xu).use((0,Su.Ey)()).mount("#app")}},o={};function a(t){var l=o[t];if(void 0!==l)return l.exports;var n=o[t]={exports:{}};return e[t].call(n.exports,n,n.exports,a),n.exports}a.m=e,(()=>{var e=[];a.O=(o,t,l,n)=>{if(!t){var r=1/0;for(u=0;u<e.length;u++){for(var[t,l,n]=e[u],s=!0,i=0;i<t.length;i++)(!1&n||r>=n)&&Object.keys(a.O).every((e=>a.O[e](t[i])))?t.splice(i--,1):(s=!1,n<r&&(r=n));if(s){e.splice(u--,1);var c=l();void 0!==c&&(o=c)}}return o}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[t,l,n]}})(),(()=>{a.d=(e,o)=>{for(var t in o)a.o(o,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{a.p="/"})(),(()=>{a.b=document.baseURI||self.location.href;var e={524:0};a.O.j=o=>0===e[o];var o=(o,t)=>{var l,n,[r,s,i]=t,c=0;if(r.some((o=>0!==e[o]))){for(l in s)a.o(s,l)&&(a.m[l]=s[l]);if(i)var u=i(a)}for(o&&o(t);c<r.length;c++)n=r[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},t=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var t=a.O(void 0,[504],(()=>a(202)));t=a.O(t)})();
//# sourceMappingURL=app.4e1bf4af.js.map